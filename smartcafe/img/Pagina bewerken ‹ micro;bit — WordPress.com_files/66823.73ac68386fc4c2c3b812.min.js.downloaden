"use strict";(globalThis.webpackChunkcalypso=globalThis.webpackChunkcalypso||[]).push([[66823],{"./components/data/query-site-domains/index.jsx":(e,n,t)=>{t.d(n,{Z:()=>d});var a=t("../node_modules/prop-types/index.js"),s=t.n(a),i=t("../node_modules/react/index.js"),o=t("../node_modules/react-redux/es/index.js"),r=t("./state/sites/domains/actions.js"),_=t("./state/sites/domains/selectors.js");function d({siteId:e}){const n=(0,o.I0)();return(0,i.useEffect)((()=>{n((e=>(n,t)=>{e&&!(0,_.JZ)(t(),e)&&n((0,r.Pz)(e))})(e))}),[n,e]),null}d.propTypes={siteId:s().number.isRequired}},"./lib/domains/constants.js":(e,n,t)=>{t.d(n,{dt:()=>a,fN:()=>s,Bz:()=>i,lU:()=>o,_q:()=>r,j4:()=>_,DZ:()=>d,VL:()=>l,ES:()=>c});const a={MAPPED:"MAPPED",REGISTERED:"REGISTERED",SITE_REDIRECT:"SITE_REDIRECT",WPCOM:"WPCOM",TRANSFER:"TRANSFER"},s={PENDING_OWNER:"PENDING_OWNER",PENDING_REGISTRY:"PENDING_REGISTRY",CANCELLED:"CANCELLED",COMPLETED:"COMPLETED",PENDING_START:"PENDING_START"},i={OPENHRS:"OpenHRS",OPENSRS:"OpenSRS",WWD:"WWD",MAINTENANCE:"Registrar TLD Maintenance"},o={AVAILABLE:"available",AVAILABLE_PREMIUM:"available_premium",AVAILABILITY_CHECK_ERROR:"availability_check_error",CONFLICTING_CNAME_EXISTS:"conflicting_cname_exists",DISALLOWED:"blacklisted_domain",DOMAIN_SUGGESTIONS_THROTTLED:"domain_suggestions_throttled",DOTBLOG_SUBDOMAIN:"dotblog_subdomain",EMPTY_QUERY:"empty_query",EMPTY_RESULTS:"empty_results",FORBIDDEN:"forbidden_domain",FORBIDDEN_SUBDOMAIN:"forbidden_subdomain",IN_REDEMPTION:"in_redemption",INVALID:"invalid_domain",INVALID_QUERY:"invalid_query",INVALID_TLD:"invalid_tld",MAINTENANCE:"tld_in_maintenance",MAPPABLE:"mappable",MAPPED:"mapped_domain",MAPPED_OTHER_SITE_SAME_USER:"mapped_to_other_site_same_user",MAPPED_SAME_SITE_NOT_TRANSFERRABLE:"mapped_to_same_site_not_transferrable",MAPPED_SAME_SITE_TRANSFERRABLE:"mapped_to_same_site_transferrable",NOT_AVAILABLE:"not_available",NOT_REGISTRABLE:"available_but_not_registrable",PURCHASES_DISABLED:"domain_registration_unavailable",RECENTLY_UNMAPPED:"recently_mapped",RECENTLY_EXPIRED:"recently_expired",REGISTERED:"registered_domain",REGISTERED_OTHER_SITE_SAME_USER:"registered_on_other_site_same_user",REGISTERED_SAME_SITE:"registered_on_same_site",RESTRICTED:"restricted_domain",TLD_NOT_SUPPORTED:"tld_not_supported",TLD_NOT_SUPPORTED_AND_DOMAIN_NOT_AVAILABLE:"tld_not_supported_and_domain_not_available",TLD_NOT_SUPPORTED_TEMPORARILY:"tld_not_supported_temporarily",TRANSFER_PENDING:"transfer_pending",TRANSFER_PENDING_SAME_USER:"transfer_pending_same_user",TRANSFERRABLE:"transferrable",TRANSFERRABLE_PREMIUM:"transferrable_premium",UNKNOWN:"unknown",UNKOWN_ACTIVE:"unknown_active_domain_with_wpcom",WPCOM_STAGING_DOMAIN:"wpcom_staging_domain"},r={G_SUITE:{PROVIDER:"g-suite",SERVICE:"G-Suite"},MICROSOFT_OFFICE365:{PROVIDER:"microsoft-office365",SERVICE:"O365"},ZOHO_MAIL:{PROVIDER:"zoho-mail",SERVICE:"Zoho"}},_={NONE:"NONE",PENDING:"PENDING",PENDING_ASYNC:"PENDING_ASYNC",ACCEPTED_CONTRACTUAL_MINIMUM:"ACCEPTED_CONTRACTUAL_MINIMUM",ACCEPTED_FULL:"ACCEPTED_FULL",DENIED:"DENIED",FORCED_ALL_CONTRACTUAL:"FORCED_ALL_CONTRACTUAL"},d={DISCOVERY_TXT_RECORD_NAME:"_domainconnect",API_URL:"public-api.wordpress.com/rest/v1.3/domain-connect"},l={SSL_DISABLED:"disabled",SSL_PENDING:"pending",SSL_ACTIVE:"active"},c={DOMAIN_ITEM:"DOMAIN_ITEM",PAGE_TITLE:"PAGE_TITLE"}},"./lib/domains/utils/get-domain-type.js":(e,n,t)=>{t.d(n,{G:()=>s});var a=t("./lib/domains/constants.js");function s(e){return"redirect"===e.type?a.dt.SITE_REDIRECT:"transfer"===e.type?a.dt.TRANSFER:e.wpcom_domain?a.dt.WPCOM:e.has_registration?a.dt.REGISTERED:a.dt.MAPPED}},"./state/analytics/actions/compose-analytics.js":(e,n,t)=>{t.d(n,{N:()=>o});var a=t("../node_modules/lodash-es/flatMap.js"),s=t("../node_modules/lodash-es/property.js"),i=t("./state/action-types.ts");function o(...e){return{type:i.y$E,meta:{analytics:(0,a.Z)(e,(0,s.Z)("meta.analytics"))}}}},"./state/sites/domains/actions.js":(e,n,t)=>{t.d(n,{nN:()=>M,A:()=>w,pK:()=>L,Pz:()=>y,UL:()=>h,FX:()=>B});var a=t("../node_modules/debug/src/browser.js"),s=t.n(a),i=t("../packages/i18n-calypso/src/index.js"),o=t("../node_modules/lodash-es/map.js"),r=t("./lib/wp/browser.js"),_=t("./state/action-types.ts"),d=t("./state/sites/actions.js"),l=t("../node_modules/lodash-es/mapKeys.js"),c=t("../node_modules/lodash-es/camelCase.js");var u=t("./lib/domains/constants.js");function E(e){switch(e.gdpr_consent_status){case"NONE":return u.j4.NONE;case"PENDING":return u.j4.PENDING;case"PENDING_ASYNC":return u.j4.PENDING_ASYNC;case"ACCEPTED_CONTRACTUAL_MINIMUM":return u.j4.ACCEPTED_CONTRACTUAL_MINIMUM;case"ACCEPTED_FULL":return u.j4.ACCEPTED_FULL;case"DENIED":return u.j4.DENIED;case"FORCED_ALL_CONTRACTUAL":return u.j4.FORCED_ALL_CONTRACTUAL;default:return null}}var m=t("./lib/domains/utils/get-domain-type.js");function p(e){return"pending_owner"===e.transfer_status?u.fN.PENDING_OWNER:"pending_registry"===e.transfer_status?u.fN.PENDING_REGISTRY:"cancelled"===e.transfer_status?u.fN.CANCELLED:"completed"===e.transfer_status?u.fN.COMPLETED:"pending_start"===e.transfer_status?u.fN.PENDING_START:null}function I(e){if(e)return(0,l.Z)(e,((e,n)=>(0,c.default)(n)))}function N(e){if(!e||!e.errors)return null;const n=Object.entries(e.errors).map((e=>{const[n,t]=e;return{code:n,message:t[0]}}));return n.length?n[0]:null}const R=e=>{let n=null;return e.transfer_start_date&&(n=new Date(e.transfer_start_date),n.setDate(n.getDate()+7),n=n.toISOString()),{aRecordsRequiredForMapping:e.a_records_required_for_mapping,autoRenewalDate:String(e.auto_renewal_date),adminEmail:e.admin_email,autoRenewing:Boolean(e.auto_renewing),blogId:Number(e.blog_id),bundledPlanSubscriptionId:e.bundled_plan_subscription_id,canSetAsPrimary:Boolean(e.can_set_as_primary),connectionMode:String(e.connection_mode),contactInfoDisclosureAvailable:Boolean(e.contact_info_disclosure_available),contactInfoDisclosed:Boolean(e.contact_info_disclosed),currentUserCanAddEmail:Boolean(e.current_user_can_add_email),currentUserCanCreateSiteFromDomainOnly:Boolean(e.current_user_can_create_site_from_domain_only),currentUserCanManage:Boolean(e.current_user_can_manage),currentUserCannotAddEmailReason:N(e.current_user_cannot_add_email_reason),domain:String(e.domain),domainLockingAvailable:Boolean(e.domain_locking_available),domainRegistrationAgreementUrl:(t=e,t?.domain_registration_agreement_url??null),emailForwardsCount:Number(e.email_forwards_count),expired:Boolean(e.expired),expiry:e.expiry?String(e.expiry):null,expirySoon:Boolean(e.expiry_soon),gdprConsentStatus:E(e),googleAppsSubscription:I(e.google_apps_subscription),titanMailSubscription:I(e.titan_mail_subscription),hasRegistration:Boolean(e.has_registration),hasWpcomNameservers:e.has_wpcom_nameservers,hasZone:Boolean(e.has_zone),isLocked:Boolean(e.is_locked),isRenewable:Boolean(e.is_renewable),isRedeemable:Boolean(e.is_redeemable),isEligibleForInboundTransfer:Boolean(e.is_eligible_for_inbound_transfer),isAutoRenewing:Boolean(e.auto_renewing),isPendingIcannVerification:Boolean(e.is_pending_icann_verification),isPremium:Boolean(e.is_premium),isPrimary:Boolean(e.primary_domain),isPendingWhoisUpdate:Boolean(e.pending_whois_update),isSubdomain:Boolean(e.is_subdomain),isWPCOMDomain:Boolean(e.wpcom_domain),isWpcomStagingDomain:Boolean(e.is_wpcom_staging_domain),manualTransferRequired:Boolean(e.manual_transfer_required),mustRemovePrivacyBeforeContactUpdate:Boolean(e.must_remove_privacy_before_contact_update),newRegistration:Boolean(e.new_registration),name:String(e.domain),owner:String(e.owner),partnerDomain:Boolean(e.partner_domain),pendingRegistration:Boolean(e.pending_registration),pendingRegistrationTime:String(e.pending_registration_time),pendingTransfer:e.pending_transfer,pointsToWpcom:Boolean(e.points_to_wpcom),privateDomain:e.private_domain,privacyAvailable:Boolean(e.privacy_available),registrar:String(e.registrar),registrationDate:String(e.registration_date),renewableUntil:String(e.renewable_until),redeemableUntil:String(e.redeemable_until),sslStatus:e.ssl_status?String(e.ssl_status):null,subdomainPart:String(e.subdomain_part),subscriptionId:e.subscription_id,supportsDomainConnect:Boolean(e.supports_domain_connect),supportsGdprConsentManagement:Boolean(e.supports_gdpr_consent_management),supportsTransferApproval:Boolean(e.supports_transfer_approval),tldMaintenanceEndTime:e.tld_maintenance_end_time,transferAwayEligibleAt:e.transfer_away_eligible_at?String(e.transfer_away_eligible_at):null,transferLockOnWhoisUpdateOptional:Boolean(e.transfer_lock_on_whois_update_optional),type:(0,m.G)(e),transferStatus:p(e),transferStartDate:e.transfer_start_date?String(e.transfer_start_date):null,transferEndDate:n,whoisUpdateUnmodifiableFields:e.whois_update_unmodifiable_fields};var t};var D=t("../node_modules/lodash-es/get.js"),T=t("./state/data-layer/handler-registry.js"),A=t("./state/data-layer/wpcom-http/actions.js"),g=t("./state/data-layer/wpcom-http/utils.js"),S=t("./state/notices/actions.ts");const f=e=>n=>(0,A.d)({apiVersion:"1",method:"POST",path:"/domains/"+n.domain+"/privacy/"+e},n),C=e=>({siteId:n,domain:t})=>{const a=(e=>{switch(e){case _.ON1:return(0,i.Iu)("Privacy has been successfully disabled!");case _.DGo:return(0,i.Iu)("Yay, privacy has been successfully enabled!");case _.tGX:return(0,i.Iu)("Your contact information is now publicly visible!");case _.HYG:return(0,i.Iu)("Your contact information is now redacted!");default:return""}})(e);return[{type:e,siteId:n,domain:t},(0,S.RT)(a,{duration:5e3})]},b=e=>({siteId:n,domain:t},a)=>{const s=(0,D.Z)(a,"message",(0,i.Iu)("Unknown error when updating the domain privacy settings"));return[{type:e,siteId:n,domain:t},(0,S.tF)(s,{duration:2e4,id:"domain-privacy-settings-save-failure-notice",isPersistent:!0,href:"https://wordpress.com/help/contact",button:(0,i.Iu)("Get Help"),showDismiss:!1})]};(0,T.Z9)("state/data-layer/wpcom/domains/privacy/index.js",{[_.sBg]:[(0,g.BN)({fetch:f("enable"),onSuccess:C(_.DGo),onError:b(_.zVI)})],[_.HCR]:[(0,g.BN)({fetch:f("disable"),onSuccess:C(_.ON1),onError:b(_.T6o)})],[_.w6q]:[(0,g.BN)({fetch:f("disclose"),onSuccess:C(_.tGX),onError:b(_.M5U)})],[_.K1T]:[(0,g.BN)({fetch:f("redact"),onSuccess:C(_.HYG),onError:b(_.sQe)})]});const P=s()("calypso:state:sites:domains:actions"),O=()=>{};function y(e){return n=>(n((e=>{const n={type:_.wOJ,siteId:e};return P("returning action: %o",n),n})(e)),r.Z.req.get(`/sites/${e}/domains`,{apiVersion:"1.2"}).then((t=>{const{domains:a=[]}=t;n((e=>{const n={type:_.RI4,siteId:e};return P("returning action: %o",n),n})(e)),n(((e,n)=>{const t={type:_.t2O,siteId:e,domains:(0,o.Z)(n,R)};return P("returning action: %o",t),t})(e,a))})).catch((t=>{const a=t instanceof Error?t.message:(0,i.Iu)("There was a problem fetching site domains. Please try again later or contact support.");n(((e,n)=>{const t={type:_.dyA,siteId:e,error:n};return P("returning action: %o",t),t})(e,a))})))}function L(e,n){return{type:_.sBg,siteId:e,domain:n}}function M(e,n){return{type:_.HCR,siteId:e,domain:n}}const B=(e,n,t=O)=>a=>(P("setPrimaryDomain",e,n),r.Z.req.post(`/sites/${e}/domains/primary`,{domain:n},((n,s)=>n?t(n,s):a(y(e)).then((()=>{t(null,s),a((0,d.LV)(e))})))));function w(e,n){return{type:_.w6q,siteId:e,domain:n}}function h(e,n){return{type:_.K1T,siteId:e,domain:n}}},"./state/sites/domains/selectors.js":(e,n,t)=>{t.d(n,{eT:()=>s,BL:()=>i,CC:()=>o,fw:()=>r,hB:()=>_,zd:()=>d,JZ:()=>l,kJ:()=>c,wb:()=>u});const a=Object.freeze([]),s=(e,n)=>n&&e.sites.domains.items[n]||a,i=(e,n)=>{const t=s(e,n);if(!Array.isArray(t))return null;return t.find((({isWPCOMDomain:e,isWpcomStagingDomain:n})=>e||n))||null},o=e=>e.sites.domains.items,r=e=>e.allDomains.domains??[],_=(e,n)=>n?s(e,n.ID):a,d=(e,n)=>Boolean(e?.sites?.domains?.items?.[n]),l=(e,n)=>e.sites.domains.requesting[n]||!1,c=e=>e.sites.domains.requesting,u=(e,n,t)=>e?.sites?.domains?.updatingPrivacy?.[n]?.[t]},"./state/sites/selectors/get-site-id.js":(e,n,t)=>{t.d(n,{Z:()=>s});var a=t("./state/sites/selectors/get-site.js");function s(e,n){if(!n)return null;const t=(0,a.Z)(e,n);return t?t.ID:null}},"./state/ui/actions/set-sites.js":(e,n,t)=>{t.d(n,{B:()=>s,_:()=>i});var a=t("./state/action-types.ts");t("./state/ui/init.js");function s(e){return{type:a.bgv,siteId:e}}function i(){return{type:a.bgv,siteId:null}}}}]);