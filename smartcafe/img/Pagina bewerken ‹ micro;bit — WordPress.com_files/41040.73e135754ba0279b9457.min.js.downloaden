"use strict";(globalThis.webpackChunkcalypso=globalThis.webpackChunkcalypso||[]).push([[41040],{"./components/data/query-post-types/index.jsx":(t,e,s)=>{s.d(e,{Z:()=>u});var o=s("../node_modules/lodash-es/isEqual.js"),i=s("../node_modules/lodash-es/pick.js"),n=(s("../node_modules/prop-types/index.js"),s("../node_modules/react/index.js")),a=s("../node_modules/react-redux/es/index.js"),r=s("./state/post-types/actions.js"),p=s("./state/site-settings/selectors.js"),c=s("./state/sites/selectors/get-site-option.js");const l=["jetpack_portfolio","jetpack_testimonial"];class d extends n.Component{UNSAFE_componentWillMount(){this.request(this.props)}UNSAFE_componentWillReceiveProps(t){const{siteSettings:e,siteId:s,themeSlug:n}=this.props,{siteSettings:a,siteId:r,themeSlug:p}=t,c=n&&p&&n!==p,d=!(0,o.Z)((0,i.Z)(e,l),(0,i.Z)(a,l));(s!==r||c||d)&&this.request(t)}request(t){t.requestPostTypes(t.siteId)}render(){return null}}const u=(0,a.$j)(((t,{siteId:e})=>({siteSettings:(0,p.$1)(t,e),themeSlug:(0,c.Z)(t,e,"theme_slug")})),{requestPostTypes:r.r})(d)},"./components/web-preview/index.jsx":(t,e,s)=>{s.d(e,{Z:()=>r});var o=s("../node_modules/@babel/runtime/helpers/esm/extends.js"),i=s("../node_modules/react/index.js"),n=s("./components/async-load/index.jsx"),a=function(t){Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(9228),s.e(84760),s.e(8427),s.e(55078),s.e(49390),s.e(83309),s.e(14890),s.e(74456),s.e(73482),s.e(19414),s.e(58404),s.e(757),s.e(55902),s.e(88343)]).then(s.bind(s,"./components/web-preview/component.jsx")).then((function(e){t(e.default)}))};const r=t=>t.showPreview?i.createElement(n.Z,(0,o.default)({},t,{require:a,placeholder:null})):null},"./lib/analytics/page-view-tracker/index.jsx":(t,e,s)=>{s.d(e,{Z:()=>f});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/debug/src/browser.js"),n=s.n(i),a=s("../node_modules/lodash-es/get.js"),r=(s("../node_modules/prop-types/index.js"),s("../node_modules/react/index.js")),p=s("../node_modules/react-redux/es/index.js"),c=s("./lib/route/path.ts"),l=s("./state/analytics/actions/record-with-client-id.js"),d=s("./state/analytics/actions/enhance-with-site-type.js"),u=s("./state/current-user/selectors.js"),y=s("./state/sites/selectors/get-site-slug.js"),h=s("./state/ui/selectors/get-selected-site-id.js"),j=s("./state/utils/with-enhancers.ts");const m=n()("calypso:analytics:PageViewTracker"),b=()=>{};class g extends r.Component{constructor(...t){super(...t),(0,o.Z)(this,"state",{timer:null}),(0,o.Z)(this,"queuePageView",(()=>{const{delay:t=0,path:e,recorder:s=b,hasSelectedSiteLoaded:o,isUserAuthenticated:i,title:n}=this.props;if(m(`Queuing Page View: "${n}" at "${e}" with ${t}ms delay`),!(!o&&i||this.state.timer))return t?void this.setState({timer:setTimeout((()=>s(e,n)),t)}):this.recordViewWithProperties()}))}componentDidMount(){m("Component has mounted."),this.queuePageView()}componentWillUnmount(){m("Component has unmounted."),clearTimeout(this.state.timer)}componentDidUpdate(t){t.path===this.props.path&&t.selectedSiteId===this.props.selectedSiteId||this.queuePageView()}recordViewWithProperties(){const{path:t,recorder:e=b,title:s,properties:o,options:i}=this.props;return e(t,s,"default",o,i)}render(){return null}}(0,o.Z)(g,"displayName","PageViewTracker");const w={recorder:(0,j.i)(l.y,[d.R])},f=(0,p.$j)((t=>{const e=(0,h.Z)(t),s=(0,y.Z)(t,e),o="undefined"==typeof window?"":(0,c.lQ)((0,a.Z)(window,"location.pathname",""));return{hasSelectedSiteLoaded:!o||"number"==typeof o&&o===e||o===s,selectedSiteId:e,isUserAuthenticated:(0,u.rc)(t)}}),w)(g)},"./state/analytics/actions/enhance-with-site-type.js":(t,e,s)=>{s.d(e,{R:()=>a});var o=s("../node_modules/lodash-es/set.js"),i=s("./state/action-types.ts"),n=s("./state/ui/selectors/get-selected-site.js");function a(t,e){const s=(0,n.Z)(e());return null!==s&&(t.type===i.u2u?(0,o.Z)(t,"meta.analytics[0].payload.properties.site_type",s.jetpack?"jetpack":"wpcom"):(0,o.Z)(t,"meta.analytics[0].payload.site_type",s.jetpack?"jetpack":"wpcom")),t}},"./state/analytics/actions/record-with-client-id.js":(t,e,s)=>{s.d(e,{v:()=>c,y:()=>l});var o=s("../node_modules/lodash-es/set.js"),i=s("./state/action-types.ts"),n=s("./state/oauth2-clients/ui/selectors.js"),a=s("./state/utils/with-enhancers.ts"),r=s("./state/analytics/actions/record.js");const p=(t,e)=>{const s=(0,n.HK)(e());return s&&(t.type===i.u2u?(0,o.Z)(t,"meta.analytics[0].payload.properties.client_id",s):(0,o.Z)(t,"meta.analytics[0].payload.client_id",s)),t},c=(0,a.i)(r.jN,p),l=(0,a.i)(r.AR,p)},"./state/post-types/actions.js":(t,e,s)=>{s.d(e,{s:()=>r,r:()=>p});var o=s("./state/action-types.ts"),i=s("./state/data-layer/handler-registry.js"),n=s("./state/data-layer/wpcom-http/actions.js");const a=(0,s("./state/data-layer/wpcom-http/utils.js").BN)({fetch:t=>(0,n.d)({method:"GET",path:`/sites/${t.siteId}/post-types`},t),onSuccess:(t,e)=>r(t.siteId,e.post_types),onError:()=>{}});(0,i.Z9)("state/data-layer/wpcom/sites/post-types/index.js",{[o.aH1]:[a]});s("./state/post-types/init.js");function r(t,e){return{type:o.EXL,siteId:t,types:e}}function p(t){return{type:o.aH1,siteId:t}}},"./state/post-types/init.js":(t,e,s)=>{var o=s("./state/redux-store.ts"),i=s("../packages/state-utils/src/index.ts"),n=s("../node_modules/lodash-es/keyBy.js"),a=s("./state/action-types.ts"),r=s("./state/utils/schema-utils.js"),p=s("./state/utils/keyed-reducer.ts"),c=s("./state/utils/with-persistence.ts"),l=s("./state/utils/reducer-utils.ts");var d=s("../node_modules/lodash-es/merge.js");const u=(0,r.G)({type:"object",patternProperties:{"^[0-9]+$":{type:"object",patternProperties:{"^.*$":{type:"array",items:{type:"object",required:["name"],properties:{name:{type:"string"},label:{type:"string"},labels:{type:"object"},description:{type:"string"},hierarchical:{type:"boolean"},public:{type:"boolean"},capabilities:{type:"object"}}}}},additionalProperties:!1}},additionalProperties:!1},((t={},e)=>e.type===a.yGX?{...t,[e.siteId]:{...t[e.siteId],[e.postType]:e.taxonomies}}:t)),y=(0,l.U)({requesting:function(t={},e){switch(e.type){case a.qNU:case a.g0p:case a.onT:return(0,d.Z)({},t,{[e.siteId]:{[e.postType]:a.qNU===e.type}})}return t},items:u}),h=(0,r.G)({type:"object",additionalProperties:!1,patternProperties:{"^\\d+$":{type:"object",additionalProperties:{type:"object",required:["name"],properties:{name:{type:"string"},label:{type:"string"},labels:{type:"object"},description:{type:"string"},map_meta_cap:{type:"boolean"},capabilities:{type:"object"},api_queryable:{type:"boolean"},hierarchical:{type:"boolean"},supports:{type:"object"}}}}}},(0,p.J)("siteId",(0,c.$)(((t=null,e)=>e.type===a.EXL?(0,n.Z)(e.types,"name"):t)))),j=(0,l.U)({items:h,taxonomies:y}),m=(0,i.xi)("postTypes",j);(0,o.x)(["postTypes"],m)},"./state/post-types/selectors.js":(t,e,s)=>{s.d(e,{ec:()=>o,z_:()=>i,jS:()=>n,m_:()=>a,ZI:()=>r});s("./state/post-types/init.js");function o(t,e){return t.postTypes.items[e]||null}function i(t,e,s){const i=o(t,e);return i&&i[s]||null}function n(t,e,s,o,n){const a=i(t,e,s);if(a){let t=a.labels[o];return!n||"en"!==n&&"en-gb"!==n||(t=t[0].toUpperCase()+t.slice(1).toLowerCase()),t}return null}function a(t,e,s,o){if("post"===s)if("publicize"===o)return!0;const n=i(t,e,s);if(n)return!!n.supports[o];if("page"===s)if("publicize"===o)return!1;return null}function r(t,e,s){const i=o(t,e);return!!i&&!!i[s]}},"./state/posts/actions/receive-post.js":(t,e,s)=>{s.d(e,{h:()=>i});var o=s("./state/posts/actions/receive-posts.js");s("./state/posts/init.js");function i(t,e){return(0,o.x)([t],e)}},"./state/posts/actions/receive-posts.js":(t,e,s)=>{s.d(e,{x:()=>i});var o=s("./state/action-types.ts");s("./state/posts/init.js");function i(t,e){const s={type:o.hYA,posts:t};return e&&(s.saveMarker=e),s}},"./state/posts/actions/restore-post.js":(t,e,s)=>{s.d(e,{t:()=>l});var o=s("../packages/i18n-calypso/src/index.js"),i=s("../node_modules/lodash-es/truncate.js"),n=s("./lib/wp/browser.js"),a=s("./state/action-types.ts"),r=s("./state/notices/actions.ts"),p=s("./state/posts/actions/receive-post.js"),c=s("./state/posts/selectors/get-site-post.js");s("./state/posts/init.js");function l(t,e,s=!1){return(l,d)=>{l({type:a.F1Z,siteId:t,postId:e});const u=n.Z.site(t).post(e).restore();return u.then((i=>{l({type:a.rn5,siteId:t,postId:e}),l((0,p.h)(i)),s||l((0,r.RT)((0,o.Iu)("Post successfully restored")))}),(n=>{if(l({type:a.JZv,siteId:t,postId:e,error:n}),s)return;const p=(0,c.i)(d(),t,e);let u;u=p?(0,o.Iu)('An error occurred while restoring "%s"',{args:[(0,i.Z)(p.title,{length:24})]}):(0,o.Iu)("An error occurred while restoring the post"),l((0,r.tF)(u))})),u}}},"./state/posts/actions/save-post-success.js":(t,e,s)=>{s.d(e,{j:()=>r});var o=s("../packages/i18n-calypso/src/index.js"),i=s("./state/action-types.ts"),n=s("./state/notices/actions.ts"),a=s("./state/posts/actions/restore-post.js");s("./state/posts/init.js");function r(t,e=null,s,r,p=!1){return c=>{if(c({type:i.hZH,siteId:t,postId:e,savedPost:s,post:r}),!p)switch(r.status){case"trash":{const t="trash_"+s.global_ID;c((0,n.RT)((0,o.Iu)("Post successfully moved to trash."),{id:t,button:(0,o.Iu)("Undo"),onClick:()=>{c((0,n.qq)(t)),c((0,a.t)(s.site_ID,s.ID))}}));break}case"publish":c((0,n.RT)((0,o.Iu)("Post successfully published")))}}}},"./state/posts/actions/trash-post.js":(t,e,s)=>{s.d(e,{W:()=>r});var o=s("./lib/wp/browser.js"),i=s("./state/action-types.ts"),n=s("./state/posts/actions/receive-post.js"),a=s("./state/posts/actions/save-post-success.js");s("./state/posts/init.js");function r(t,e,s=!1){return r=>{const p={status:"trash"};r({type:i.CNw,siteId:t,postId:e,post:p});const c=o.Z.site(t).post(e).delete();return c.then((o=>{r((0,a.j)(t,e,o,p,s)),r((0,n.h)(o))}),(s=>{r({type:i.am4,siteId:t,postId:e,error:s})})),c}}},"./state/utils/with-enhancers.ts":(t,e,s)=>{s.d(e,{i:()=>o});const o=(t,e)=>(...s)=>{const o=t(...s);return Array.isArray(e)||(e=[e]),(t,s,i)=>{const n=o=>t((t=>e.reduce(((t,e)=>e(t,s)),t))(o)),a=t=>"function"==typeof t?t(a,s,i):n(t);return a(o)}}}}]);