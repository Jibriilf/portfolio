/*! For license information please see entry-main.a86f8a7611069c396397.min.js.LICENSE.txt */
(globalThis.webpackChunkcalypso=globalThis.webpackChunkcalypso||[]).push([[63024],{"../node_modules/moment/locale lazy recursive ^\\.\\/.*$ include: \\.js$":(e,t,s)=>{var n={"./af":["../node_modules/moment/locale/af.js",13555],"./af.js":["../node_modules/moment/locale/af.js",13555],"./ar":["../node_modules/moment/locale/ar.js",36568],"./ar-dz":["../node_modules/moment/locale/ar-dz.js",35083],"./ar-dz.js":["../node_modules/moment/locale/ar-dz.js",35083],"./ar-kw":["../node_modules/moment/locale/ar-kw.js",19467],"./ar-kw.js":["../node_modules/moment/locale/ar-kw.js",19467],"./ar-ly":["../node_modules/moment/locale/ar-ly.js",52511],"./ar-ly.js":["../node_modules/moment/locale/ar-ly.js",52511],"./ar-ma":["../node_modules/moment/locale/ar-ma.js",19794],"./ar-ma.js":["../node_modules/moment/locale/ar-ma.js",19794],"./ar-sa":["../node_modules/moment/locale/ar-sa.js",13445],"./ar-sa.js":["../node_modules/moment/locale/ar-sa.js",13445],"./ar-tn":["../node_modules/moment/locale/ar-tn.js",81338],"./ar-tn.js":["../node_modules/moment/locale/ar-tn.js",81338],"./ar.js":["../node_modules/moment/locale/ar.js",36568],"./az":["../node_modules/moment/locale/az.js",34273],"./az.js":["../node_modules/moment/locale/az.js",34273],"./be":["../node_modules/moment/locale/be.js",18736],"./be.js":["../node_modules/moment/locale/be.js",18736],"./bg":["../node_modules/moment/locale/bg.js",23136],"./bg.js":["../node_modules/moment/locale/bg.js",23136],"./bm":["../node_modules/moment/locale/bm.js",25546],"./bm.js":["../node_modules/moment/locale/bm.js",25546],"./bn":["../node_modules/moment/locale/bn.js",41259],"./bn.js":["../node_modules/moment/locale/bn.js",41259],"./bo":["../node_modules/moment/locale/bo.js",31741],"./bo.js":["../node_modules/moment/locale/bo.js",31741],"./br":["../node_modules/moment/locale/br.js",96303],"./br.js":["../node_modules/moment/locale/br.js",96303],"./bs":["../node_modules/moment/locale/bs.js",79398],"./bs.js":["../node_modules/moment/locale/bs.js",79398],"./ca":["../node_modules/moment/locale/ca.js",32551],"./ca.js":["../node_modules/moment/locale/ca.js",32551],"./cs":["../node_modules/moment/locale/cs.js",21205],"./cs.js":["../node_modules/moment/locale/cs.js",21205],"./cv":["../node_modules/moment/locale/cv.js",31268],"./cv.js":["../node_modules/moment/locale/cv.js",31268],"./cy":["../node_modules/moment/locale/cy.js",34571],"./cy.js":["../node_modules/moment/locale/cy.js",34571],"./da":["../node_modules/moment/locale/da.js",63187],"./da.js":["../node_modules/moment/locale/da.js",63187],"./de":["../node_modules/moment/locale/de.js",56069],"./de-at":["../node_modules/moment/locale/de-at.js",99640],"./de-at.js":["../node_modules/moment/locale/de-at.js",99640],"./de-ch":["../node_modules/moment/locale/de-ch.js",88920],"./de-ch.js":["../node_modules/moment/locale/de-ch.js",88920],"./de.js":["../node_modules/moment/locale/de.js",56069],"./dv":["../node_modules/moment/locale/dv.js",43117],"./dv.js":["../node_modules/moment/locale/dv.js",43117],"./el":["../node_modules/moment/locale/el.js",9130],"./el.js":["../node_modules/moment/locale/el.js",9130],"./en-au":["../node_modules/moment/locale/en-au.js",210],"./en-au.js":["../node_modules/moment/locale/en-au.js",210],"./en-ca":["../node_modules/moment/locale/en-ca.js",9323],"./en-ca.js":["../node_modules/moment/locale/en-ca.js",9323],"./en-gb":["../node_modules/moment/locale/en-gb.js",33461],"./en-gb.js":["../node_modules/moment/locale/en-gb.js",33461],"./en-ie":["../node_modules/moment/locale/en-ie.js",62409],"./en-ie.js":["../node_modules/moment/locale/en-ie.js",62409],"./en-il":["../node_modules/moment/locale/en-il.js",39488],"./en-il.js":["../node_modules/moment/locale/en-il.js",39488],"./en-in":["../node_modules/moment/locale/en-in.js",94897],"./en-in.js":["../node_modules/moment/locale/en-in.js",94897],"./en-nz":["../node_modules/moment/locale/en-nz.js",44145],"./en-nz.js":["../node_modules/moment/locale/en-nz.js",44145],"./en-sg":["../node_modules/moment/locale/en-sg.js",72133],"./en-sg.js":["../node_modules/moment/locale/en-sg.js",72133],"./eo":["../node_modules/moment/locale/eo.js",45506],"./eo.js":["../node_modules/moment/locale/eo.js",45506],"./es":["../node_modules/moment/locale/es.js",58632],"./es-do":["../node_modules/moment/locale/es-do.js",57933],"./es-do.js":["../node_modules/moment/locale/es-do.js",57933],"./es-us":["../node_modules/moment/locale/es-us.js",84503],"./es-us.js":["../node_modules/moment/locale/es-us.js",84503],"./es.js":["../node_modules/moment/locale/es.js",58632],"./et":["../node_modules/moment/locale/et.js",35427],"./et.js":["../node_modules/moment/locale/et.js",35427],"./eu":["../node_modules/moment/locale/eu.js",68631],"./eu.js":["../node_modules/moment/locale/eu.js",68631],"./fa":["../node_modules/moment/locale/fa.js",86308],"./fa.js":["../node_modules/moment/locale/fa.js",86308],"./fi":["../node_modules/moment/locale/fi.js",85667],"./fi.js":["../node_modules/moment/locale/fi.js",85667],"./fil":["../node_modules/moment/locale/fil.js",22531],"./fil.js":["../node_modules/moment/locale/fil.js",22531],"./fo":["../node_modules/moment/locale/fo.js",5854],"./fo.js":["../node_modules/moment/locale/fo.js",5854],"./fr":["../node_modules/moment/locale/fr.js",6685],"./fr-ca":["../node_modules/moment/locale/fr-ca.js",52743],"./fr-ca.js":["../node_modules/moment/locale/fr-ca.js",52743],"./fr-ch":["../node_modules/moment/locale/fr-ch.js",15907],"./fr-ch.js":["../node_modules/moment/locale/fr-ch.js",15907],"./fr.js":["../node_modules/moment/locale/fr.js",6685],"./fy":["../node_modules/moment/locale/fy.js",65],"./fy.js":["../node_modules/moment/locale/fy.js",65],"./ga":["../node_modules/moment/locale/ga.js",24397],"./ga.js":["../node_modules/moment/locale/ga.js",24397],"./gd":["../node_modules/moment/locale/gd.js",55288],"./gd.js":["../node_modules/moment/locale/gd.js",55288],"./gl":["../node_modules/moment/locale/gl.js",54856],"./gl.js":["../node_modules/moment/locale/gl.js",54856],"./gom-deva":["../node_modules/moment/locale/gom-deva.js",65058],"./gom-deva.js":["../node_modules/moment/locale/gom-deva.js",65058],"./gom-latn":["../node_modules/moment/locale/gom-latn.js",34246],"./gom-latn.js":["../node_modules/moment/locale/gom-latn.js",34246],"./gu":["../node_modules/moment/locale/gu.js",61049],"./gu.js":["../node_modules/moment/locale/gu.js",61049],"./he":["../node_modules/moment/locale/he.js",4286],"./he.js":["../node_modules/moment/locale/he.js",4286],"./hi":["../node_modules/moment/locale/hi.js",68833],"./hi.js":["../node_modules/moment/locale/hi.js",68833],"./hr":["../node_modules/moment/locale/hr.js",21765],"./hr.js":["../node_modules/moment/locale/hr.js",21765],"./hu":["../node_modules/moment/locale/hu.js",9774],"./hu.js":["../node_modules/moment/locale/hu.js",9774],"./hy-am":["../node_modules/moment/locale/hy-am.js",34841],"./hy-am.js":["../node_modules/moment/locale/hy-am.js",34841],"./id":["../node_modules/moment/locale/id.js",1392],"./id.js":["../node_modules/moment/locale/id.js",1392],"./is":["../node_modules/moment/locale/is.js",64314],"./is.js":["../node_modules/moment/locale/is.js",64314],"./it":["../node_modules/moment/locale/it.js",94577],"./it-ch":["../node_modules/moment/locale/it-ch.js",43473],"./it-ch.js":["../node_modules/moment/locale/it-ch.js",43473],"./it.js":["../node_modules/moment/locale/it.js",94577],"./ja":["../node_modules/moment/locale/ja.js",19768],"./ja.js":["../node_modules/moment/locale/ja.js",19768],"./jv":["../node_modules/moment/locale/jv.js",29241],"./jv.js":["../node_modules/moment/locale/jv.js",29241],"./ka":["../node_modules/moment/locale/ka.js",68592],"./ka.js":["../node_modules/moment/locale/ka.js",68592],"./kk":["../node_modules/moment/locale/kk.js",78103],"./kk.js":["../node_modules/moment/locale/kk.js",78103],"./km":["../node_modules/moment/locale/km.js",56425],"./km.js":["../node_modules/moment/locale/km.js",56425],"./kn":["../node_modules/moment/locale/kn.js",86377],"./kn.js":["../node_modules/moment/locale/kn.js",86377],"./ko":["../node_modules/moment/locale/ko.js",32921],"./ko.js":["../node_modules/moment/locale/ko.js",32921],"./ku":["../node_modules/moment/locale/ku.js",75239],"./ku.js":["../node_modules/moment/locale/ku.js",75239],"./ky":["../node_modules/moment/locale/ky.js",64156],"./ky.js":["../node_modules/moment/locale/ky.js",64156],"./lb":["../node_modules/moment/locale/lb.js",7686],"./lb.js":["../node_modules/moment/locale/lb.js",7686],"./lo":["../node_modules/moment/locale/lo.js",81087],"./lo.js":["../node_modules/moment/locale/lo.js",81087],"./lt":["../node_modules/moment/locale/lt.js",47497],"./lt.js":["../node_modules/moment/locale/lt.js",47497],"./lv":["../node_modules/moment/locale/lv.js",58312],"./lv.js":["../node_modules/moment/locale/lv.js",58312],"./me":["../node_modules/moment/locale/me.js",43575],"./me.js":["../node_modules/moment/locale/me.js",43575],"./mi":["../node_modules/moment/locale/mi.js",5027],"./mi.js":["../node_modules/moment/locale/mi.js",5027],"./mk":["../node_modules/moment/locale/mk.js",31110],"./mk.js":["../node_modules/moment/locale/mk.js",31110],"./ml":["../node_modules/moment/locale/ml.js",79963],"./ml.js":["../node_modules/moment/locale/ml.js",79963],"./mn":["../node_modules/moment/locale/mn.js",45715],"./mn.js":["../node_modules/moment/locale/mn.js",45715],"./mr":["../node_modules/moment/locale/mr.js",66951],"./mr.js":["../node_modules/moment/locale/mr.js",66951],"./ms":["../node_modules/moment/locale/ms.js",59009],"./ms-my":["../node_modules/moment/locale/ms-my.js",12905],"./ms-my.js":["../node_modules/moment/locale/ms-my.js",12905],"./ms.js":["../node_modules/moment/locale/ms.js",59009],"./mt":["../node_modules/moment/locale/mt.js",69389],"./mt.js":["../node_modules/moment/locale/mt.js",69389],"./my":["../node_modules/moment/locale/my.js",6230],"./my.js":["../node_modules/moment/locale/my.js",6230],"./nb":["../node_modules/moment/locale/nb.js",72710],"./nb.js":["../node_modules/moment/locale/nb.js",72710],"./ne":["../node_modules/moment/locale/ne.js",35789],"./ne.js":["../node_modules/moment/locale/ne.js",35789],"./nl":["../node_modules/moment/locale/nl.js",13236],"./nl-be":["../node_modules/moment/locale/nl-be.js",52066],"./nl-be.js":["../node_modules/moment/locale/nl-be.js",52066],"./nl.js":["../node_modules/moment/locale/nl.js",13236],"./nn":["../node_modules/moment/locale/nn.js",7396],"./nn.js":["../node_modules/moment/locale/nn.js",7396],"./oc-lnc":["../node_modules/moment/locale/oc-lnc.js",88555],"./oc-lnc.js":["../node_modules/moment/locale/oc-lnc.js",88555],"./pa-in":["../node_modules/moment/locale/pa-in.js",1629],"./pa-in.js":["../node_modules/moment/locale/pa-in.js",1629],"./pl":["../node_modules/moment/locale/pl.js",13839],"./pl.js":["../node_modules/moment/locale/pl.js",13839],"./pt":["../node_modules/moment/locale/pt.js",54299],"./pt-br":["../node_modules/moment/locale/pt-br.js",19694],"./pt-br.js":["../node_modules/moment/locale/pt-br.js",19694],"./pt.js":["../node_modules/moment/locale/pt.js",54299],"./ro":["../node_modules/moment/locale/ro.js",71552],"./ro.js":["../node_modules/moment/locale/ro.js",71552],"./ru":["../node_modules/moment/locale/ru.js",88644],"./ru.js":["../node_modules/moment/locale/ru.js",88644],"./sd":["../node_modules/moment/locale/sd.js",80804],"./sd.js":["../node_modules/moment/locale/sd.js",80804],"./se":["../node_modules/moment/locale/se.js",92177],"./se.js":["../node_modules/moment/locale/se.js",92177],"./si":["../node_modules/moment/locale/si.js",25199],"./si.js":["../node_modules/moment/locale/si.js",25199],"./sk":["../node_modules/moment/locale/sk.js",58752],"./sk.js":["../node_modules/moment/locale/sk.js",58752],"./sl":["../node_modules/moment/locale/sl.js",77060],"./sl.js":["../node_modules/moment/locale/sl.js",77060],"./sq":["../node_modules/moment/locale/sq.js",27819],"./sq.js":["../node_modules/moment/locale/sq.js",27819],"./sr":["../node_modules/moment/locale/sr.js",94323],"./sr-cyrl":["../node_modules/moment/locale/sr-cyrl.js",42461],"./sr-cyrl.js":["../node_modules/moment/locale/sr-cyrl.js",42461],"./sr.js":["../node_modules/moment/locale/sr.js",94323],"./ss":["../node_modules/moment/locale/ss.js",27875],"./ss.js":["../node_modules/moment/locale/ss.js",27875],"./sv":["../node_modules/moment/locale/sv.js",28734],"./sv.js":["../node_modules/moment/locale/sv.js",28734],"./sw":["../node_modules/moment/locale/sw.js",42146],"./sw.js":["../node_modules/moment/locale/sw.js",42146],"./ta":["../node_modules/moment/locale/ta.js",32105],"./ta.js":["../node_modules/moment/locale/ta.js",32105],"./te":["../node_modules/moment/locale/te.js",49273],"./te.js":["../node_modules/moment/locale/te.js",49273],"./tet":["../node_modules/moment/locale/tet.js",71832],"./tet.js":["../node_modules/moment/locale/tet.js",71832],"./tg":["../node_modules/moment/locale/tg.js",65077],"./tg.js":["../node_modules/moment/locale/tg.js",65077],"./th":["../node_modules/moment/locale/th.js",60585],"./th.js":["../node_modules/moment/locale/th.js",60585],"./tk":["../node_modules/moment/locale/tk.js",30032],"./tk.js":["../node_modules/moment/locale/tk.js",30032],"./tl-ph":["../node_modules/moment/locale/tl-ph.js",74760],"./tl-ph.js":["../node_modules/moment/locale/tl-ph.js",74760],"./tlh":["../node_modules/moment/locale/tlh.js",53223],"./tlh.js":["../node_modules/moment/locale/tlh.js",53223],"./tr":["../node_modules/moment/locale/tr.js",2631],"./tr.js":["../node_modules/moment/locale/tr.js",2631],"./tzl":["../node_modules/moment/locale/tzl.js",64197],"./tzl.js":["../node_modules/moment/locale/tzl.js",64197],"./tzm":["../node_modules/moment/locale/tzm.js",88853],"./tzm-latn":["../node_modules/moment/locale/tzm-latn.js",26234],"./tzm-latn.js":["../node_modules/moment/locale/tzm-latn.js",26234],"./tzm.js":["../node_modules/moment/locale/tzm.js",88853],"./ug-cn":["../node_modules/moment/locale/ug-cn.js",25691],"./ug-cn.js":["../node_modules/moment/locale/ug-cn.js",25691],"./uk":["../node_modules/moment/locale/uk.js",89286],"./uk.js":["../node_modules/moment/locale/uk.js",89286],"./ur":["../node_modules/moment/locale/ur.js",28446],"./ur.js":["../node_modules/moment/locale/ur.js",28446],"./uz":["../node_modules/moment/locale/uz.js",21930],"./uz-latn":["../node_modules/moment/locale/uz-latn.js",64633],"./uz-latn.js":["../node_modules/moment/locale/uz-latn.js",64633],"./uz.js":["../node_modules/moment/locale/uz.js",21930],"./vi":["../node_modules/moment/locale/vi.js",97893],"./vi.js":["../node_modules/moment/locale/vi.js",97893],"./x-pseudo":["../node_modules/moment/locale/x-pseudo.js",64038],"./x-pseudo.js":["../node_modules/moment/locale/x-pseudo.js",64038],"./yo":["../node_modules/moment/locale/yo.js",93821],"./yo.js":["../node_modules/moment/locale/yo.js",93821],"./zh-cn":["../node_modules/moment/locale/zh-cn.js",53999],"./zh-cn.js":["../node_modules/moment/locale/zh-cn.js",53999],"./zh-hk":["../node_modules/moment/locale/zh-hk.js",84559],"./zh-hk.js":["../node_modules/moment/locale/zh-hk.js",84559],"./zh-mo":["../node_modules/moment/locale/zh-mo.js",33026],"./zh-mo.js":["../node_modules/moment/locale/zh-mo.js",33026],"./zh-tw":["../node_modules/moment/locale/zh-tw.js",69737],"./zh-tw.js":["../node_modules/moment/locale/zh-tw.js",69737]};function o(e){if(!s.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return s.e(t[1]).then((()=>s.t(o,23)))}o.keys=()=>Object.keys(n),o.id="../node_modules/moment/locale lazy recursive ^\\.\\/.*$ include: \\.js$",e.exports=o},"./boot/app.js":(e,t,s)=>{"use strict";s("./boot/polyfills.js");var n=s("../packages/accessible-focus/src/index.ts"),o=s("../packages/calypso-config/src/index.ts"),a=s("../packages/calypso-url/src/url-parts.ts"),i=s("../node_modules/debug/src/browser.js"),r=s.n(i),c=s("../node_modules/page/page.js"),l=s.n(c),d=s("../node_modules/react/index.js"),u=s("../node_modules/react-dom/index.js"),m=s("../node_modules/react-modal/lib/index.js"),p=s.n(m),h=s("../node_modules/store/dist/store.modern.js"),g=s.n(h),y=s("../packages/i18n-calypso/src/index.js"),_=s("./lib/user/verification-checker.js"),f=s("./state/notices/actions.ts");function j(e,t){"1"===e.query.verified&&((0,_.X)(),setTimeout((()=>{const t=y.ZP.translate("Email confirmed!"),s=(0,f.RT)(t,{duration:1e4});e.store.dispatch(s)}),500)),t()}var b=s("./controller/index.web.js"),E=s("./lib/analytics/init.js"),w=s("./lib/analytics/mc.js"),S=s("./lib/analytics/super-props.js"),v=s("./lib/analytics/tracks.js"),k=s("../node_modules/tracekit/tracekit.js"),R=s.n(k),I=s("./lib/wp/browser.js");const x=r()("calypso:error-logger");class N{constructor(){this.diagnosticData={commit:COMMIT_SHA,extra:{previous_paths:[],throttled:0}},this.diagnosticReducers=[],this.lastReport=0,window.onerror||R().report.subscribe((e=>{const t={message:e.message,url:document.location.href};if(Array.isArray(e.stack)){const s=e.stack.slice(0,10);s.forEach((e=>Object.keys(e).forEach((t=>{"context"===t&&e[t]?e[t]=JSON.stringify(e[t]).substring(0,256):"string"==typeof e[t]&&e[t].length>512?e[t]=e[t].substring(0,512):Array.isArray(e[t])&&(e[t]=e[t].slice(0,3))})))),JSON.stringify(s).length<8192&&(t.trace=s)}const s=Date.now();this.lastReport+6e4<s?(this.lastReport=s,this.diagnose(),this.sendToApi(Object.assign(t,this.diagnosticData)),this.diagnosticData.extra.throttled=0):this.diagnosticData.extra.throttled++}))}saveNewPath(e){const t=this.diagnosticData.extra.previous_paths;t.unshift(e),this.diagnosticData.extra.previous_paths=t.slice(0,5),this.diagnosticData.calypso_path=e}saveDiagnosticReducer(e){this.diagnosticReducers.push(e)}saveDiagnosticData(e){"object"==typeof e.extra?this.saveExtraData(e):Object.assign(this.diagnosticData,e)}saveExtraData(e){Object.assign(this.diagnosticData.extra,e)}diagnose(){return this.diagnosticReducers.forEach((e=>{try{this.saveDiagnosticData(e())}catch(e){this.saveDiagnosticData({diagnosticError:e.message}),x("diagnostic: %o",this.diagnosticData)}})),this.diagnosticData}log(e,t){"object"==typeof t&&this.saveExtraData(t);try{R().report(new Error(e))}catch(e){}}sendToApi(e){const t=()=>{console.error("Error: Unable to record the error in Logstash.")};try{I.Z.req.post({path:"/js-error",apiNamespace:"rest/v1.1",body:{error:JSON.stringify(e)}},(e=>e&&t()))}catch{t()}}}var P=s("./lib/navigate/index.ts"),T=s("./lib/oauth-token/index.js"),Z=s("./lib/paths/index.js"),A=s("./lib/route/path.ts"),O=s("./state/analytics/actions/record.js"),L=s("./state/current-user/actions.js"),C=s("./state/current-user/selectors.js"),D=s("./state/desktop/window-events.js"),U=s("./state/notifications-panel/actions/index.js"),M=s("./state/selectors/is-notifications-open.js"),$=s("./state/ui/actions/notifications.js");const z=r()("calypso:desktop"),q={init:function(e){z("Registering IPC listeners"),window.electron.receive("page-my-sites",this.onShowMySites.bind(this)),window.electron.receive("page-reader",this.onShowReader.bind(this)),window.electron.receive("page-profile",this.onShowProfile.bind(this)),window.electron.receive("new-post",this.onNewPost.bind(this)),window.electron.receive("signout",this.onSignout.bind(this)),window.electron.receive("toggle-notification-bar",this.onToggleNotifications.bind(this)),window.electron.receive("notifications-panel-show",this.onNotificationsPanelShow.bind(this)),window.electron.receive("notifications-panel-refresh",this.onNotificationsPanelRefresh.bind(this)),window.electron.receive("notification-clicked",this.onNotificationClicked.bind(this)),window.electron.receive("page-help",this.onShowHelp.bind(this)),window.electron.receive("navigate",this.onNavigate.bind(this)),window.electron.receive("request-user-login-status",this.sendUserLoginStatus),window.addEventListener(D.D,this.resetUnseenNotifications.bind(this)),this.store=e,this.sendUserLoginStatus()},selectedSite:null,navigate:function(e){this.onNotificationsPanelShow(null,!1),(0,P.c)(e)},toggleNotificationsPanel:function(){this.store.dispatch((0,$.P)())},setSelectedSite:function(e){this.selectedSite=e},resetUnseenNotifications:function(){z("Reseting unseen notification count"),window.electron.send("clear-notices-count")},onNotificationClicked:function(e){z(`Notification ${e.id} clicked`);const{id:t,type:s}=e;this.store.dispatch((0,O.jN)("calypso_web_push_notification_clicked"),{push_notification_note_id:t,push_notification_type:s})},onNotificationsPanelRefresh:function(){this.store.dispatch((0,U.k)(!0))},sendUserLoginStatus:function(){let e=!0;(0,C.Pc)(this.store.getState())||(e=!1),z("Sending logged-in = "+e),window.electron.send("user-login-status",e,{id:(0,C.rc)(this.store.getState())},T.LP())},onToggleNotifications:function(){z("Toggle notifications"),this.toggleNotificationsPanel()},onNotificationsPanelShow:function(e){const t=(0,M.Z)(this.store.getState());if(e){if(t)return;this.toggleNotificationsPanel()}else t&&this.toggleNotificationsPanel()},onSignout:function(){z("Signout"),this.store.dispatch((0,L.S9)())},onShowMySites:function(){z("Showing my sites");const e=this.selectedSite,t=e?e.slug:null;this.navigate((0,A.Zg)("day",t))},onShowReader:function(){z("Showing reader"),this.navigate("/read")},onShowProfile:function(){z("Showing my profile"),this.navigate("/me")},onNewPost:function(){z("New post"),this.navigate((0,Z.fb)(this.selectedSite))},onShowHelp:function(){z("Showing help"),this.navigate("/help")},onNavigate:function(e){z("Navigating to URL: ",e),e&&this.navigate(e)}},F=q;var B=s("./lib/detect-history-navigation/index.js"),G=s("./lib/i18n-utils/utils.js"),V=s("./lib/jetpack/is-jetpack-cloud.ts"),W=s("./lib/keyboard-shortcuts/global.js"),H=s("./lib/logmein/index.ts"),K=s("./lib/protect-form/index.tsx"),J=s("./lib/redux-bridge/index.js"),Q=s("./lib/route/untrailingslashit.ts");const Y=(e,t)=>{const s=(0,Q.Z)(e.pathname);var n,o;s!==e.pathname?l().redirect((n=s,o=e.querystring,n+(o?"?"+o:""))):t()};var X=s("./lib/route/legacy-routes.ts"),ee=s("./lib/touch-detect/index.js"),te=s("./lib/url/is-outside-calypso.ts"),se=s("./lib/url/support.js"),ne=s("./lib/user/shared-utils/initialize-current-user.js"),oe=s("./lib/user/store.js"),ae=s("./lib/user/support-user-interop.js"),ie=s("./components/empty-content/index.jsx"),re=s("./state/ui/section/actions.js");const ce=r()("calypso:layout"),le=()=>{},de=(0,y.NC)((({translate:e})=>d.createElement(ie.Z,{illustration:"/calypso/images/illustrations/error.svg",title:e("We're sorry, but an unexpected error has occurred")})));function ue(){return"1"===new URLSearchParams(window.location.search).get("retry")}var me=s("./lib/performance-tracking/index.web.ts"),pe=s("./state/analytics/actions/bump-stat.js"),he=s("./state/ui/layout-focus/actions.js");const ge=[{name:"root",paths:["/"],module:"calypso/root",group:"root",enableLoggedOut:!0,load:()=>s.e(57481).then(s.bind(s,"./root.js"))},{name:"sites",paths:["/sites"],module:"calypso/my-sites",group:"sites",load:()=>Promise.all([s.e(88161),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(10783)]).then(s.bind(s,"./my-sites/index.js"))},{name:"customize",paths:["/customize"],module:"calypso/my-sites/customize",group:"sites",load:()=>Promise.all([s.e(88161),s.e(30343),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(69436),s.e(38773)]).then(s.bind(s,"./my-sites/customize/index.js"))},{name:"beta-testing",paths:["/beta-testing"],module:"calypso/my-sites/beta-testing",group:"sites",load:()=>Promise.all([s.e(88161),s.e(39429),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(19414),s.e(17928)]).then(s.bind(s,"./my-sites/beta-testing/index.js"))},{name:"account",paths:["/me/account"],module:"calypso/me/account",group:"me",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(88161),s.e(83198),s.e(46025),s.e(42160),s.e(32323),s.e(14059),s.e(10773),s.e(38243),s.e(67699),s.e(32672),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(14890),s.e(16419),s.e(53856),s.e(31809)]).then(s.bind(s,"./me/account/index.js"))},{name:"account-close",paths:["/me/account/close","/me/account/closed"],module:"calypso/me/account-close",group:"me",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(88161),s.e(83198),s.e(46025),s.e(42160),s.e(14059),s.e(10773),s.e(16869),s.e(23543),s.e(26960),s.e(14890),s.e(16419),s.e(53856),s.e(52965),s.e(88598)]).then(s.bind(s,"./me/account-close/index.js"))},{name:"concierge",paths:["/me/concierge","/me/quickstart"],module:"calypso/me/concierge",group:"me",load:()=>Promise.all([s.e(88161),s.e(42160),s.e(72704),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(27373),s.e(16419),s.e(64320),s.e(7092)]).then(s.bind(s,"./me/concierge/index.js"))},{name:"happychat",paths:["/me/chat"],module:"calypso/me/happychat",group:"me",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(88161),s.e(83198),s.e(46025),s.e(42160),s.e(14059),s.e(10773),s.e(66128),s.e(16869),s.e(23543),s.e(26960),s.e(14890),s.e(16419),s.e(53856),s.e(78150),s.e(94066)]).then(s.bind(s,"./me/happychat/index.jsx"))},{name:"notification-settings",paths:["/me/notifications"],module:"calypso/me/notification-settings",group:"me",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(88161),s.e(83198),s.e(46025),s.e(42160),s.e(14059),s.e(10773),s.e(72334),s.e(16869),s.e(23543),s.e(26960),s.e(10175),s.e(14890),s.e(16419),s.e(53856),s.e(25240),s.e(38470)]).then(s.bind(s,"./me/notification-settings/index.js"))},{name:"privacy",paths:["/me/privacy"],module:"calypso/me/privacy",group:"me",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(88161),s.e(83198),s.e(46025),s.e(42160),s.e(14059),s.e(10773),s.e(16869),s.e(23543),s.e(26960),s.e(14890),s.e(16419),s.e(53856),s.e(77296)]).then(s.bind(s,"./me/privacy/index.js"))},{name:"purchases",paths:["/me/purchases","/me/billing","/payment-methods/add-credit-card"],module:"calypso/me/purchases",group:"me",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(88161),s.e(83198),s.e(46025),s.e(9228),s.e(42160),s.e(32323),s.e(14059),s.e(10773),s.e(6729),s.e(37327),s.e(53527),s.e(28509),s.e(42357),s.e(86521),s.e(65090),s.e(16869),s.e(23543),s.e(53856),s.e(42568),s.e(99340),s.e(22777),s.e(1208),s.e(6001),s.e(48760),s.e(80881)]).then(s.bind(s,"./me/purchases/index.js"))},{name:"security",paths:["/me/security"],module:"calypso/me/security",group:"me",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(88161),s.e(83198),s.e(46025),s.e(9228),s.e(42160),s.e(14059),s.e(10773),s.e(53527),s.e(7153),s.e(16869),s.e(23543),s.e(26960),s.e(10175),s.e(14890),s.e(16419),s.e(53856),s.e(72486),s.e(59493)]).then(s.bind(s,"./me/security/index.js"))},{name:"site-blocks",paths:["/me/site-blocks"],module:"calypso/me/site-blocks",group:"me",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(88161),s.e(83198),s.e(46025),s.e(42160),s.e(14059),s.e(10773),s.e(69742),s.e(16869),s.e(23543),s.e(26960),s.e(14890),s.e(16419),s.e(53856),s.e(19414),s.e(25240),s.e(8005)]).then(s.bind(s,"./me/site-blocks/index.js"))},{name:"me",paths:["/me"],module:"calypso/me",group:"me",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(88161),s.e(83198),s.e(46025),s.e(42160),s.e(14059),s.e(10773),s.e(16869),s.e(23543),s.e(26960),s.e(14890),s.e(16419),s.e(53856),s.e(10351)]).then(s.bind(s,"./me/index.js"))},{name:"activity",paths:["/activity-log"],module:"calypso/my-sites/activity",group:"sites",load:()=>Promise.all([s.e(88161),s.e(31562),s.e(6029),s.e(94105),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(83309),s.e(14890),s.e(74456),s.e(6994),s.e(27373),s.e(42568),s.e(34738),s.e(43174),s.e(89999),s.e(55567),s.e(31471)]).then(s.bind(s,"./my-sites/activity/index.js"))},{name:"site-purchases",paths:["/purchases"],module:"calypso/my-sites/purchases",group:"sites",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(88161),s.e(83198),s.e(46025),s.e(9228),s.e(32323),s.e(6729),s.e(37327),s.e(53527),s.e(28509),s.e(42357),s.e(86521),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(42568),s.e(99340),s.e(22777),s.e(1208),s.e(6001),s.e(48760),s.e(84284)]).then(s.bind(s,"./my-sites/purchases/index.js"))},{name:"media",paths:["/media"],module:"calypso/my-sites/media",group:"sites",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(88161),s.e(83198),s.e(9228),s.e(42160),s.e(32323),s.e(14059),s.e(38243),s.e(31562),s.e(72407),s.e(75613),s.e(81653),s.e(14953),s.e(2389),s.e(81225),s.e(16869),s.e(23543),s.e(73482),s.e(34738),s.e(24990),s.e(80987),s.e(90103),s.e(42409),s.e(61654)]).then(s.bind(s,"./my-sites/media/index.js"))},{name:"people",paths:["/people"],module:"calypso/my-sites/people",group:"sites",load:()=>Promise.all([s.e(88161),s.e(9228),s.e(84760),s.e(80027),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(83309),s.e(10175),s.e(14890),s.e(91769),s.e(86380),s.e(25240),s.e(89999),s.e(94574),s.e(64210)]).then(s.bind(s,"./my-sites/people/index.js"))},{name:"plugins",paths:["/plugins"],module:"calypso/my-sites/plugins",group:"sites",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(88161),s.e(83198),s.e(46025),s.e(84760),s.e(36912),s.e(33277),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(83309),s.e(10175),s.e(74456),s.e(69436),s.e(89541),s.e(54338),s.e(43414)]).then(s.bind(s,"./my-sites/plugins/index.js"))},{name:"marketplace",paths:["/marketplace"],module:"calypso/my-sites/marketplace",group:"sites",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(88161),s.e(83198),s.e(6729),s.e(8427),s.e(28509),s.e(68473),s.e(69641),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(69436),s.e(75534),s.e(54338),s.e(81405),s.e(99669)]).then(s.bind(s,"./my-sites/marketplace/index.js"))},{name:"pages",paths:["/pages"],module:"calypso/my-sites/pages",group:"sites",load:()=>Promise.all([s.e(88161),s.e(9228),s.e(84760),s.e(70071),s.e(41670),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(10175),s.e(14890),s.e(73482),s.e(91769),s.e(69436),s.e(86380),s.e(41040),s.e(37938),s.e(73107)]).then(s.bind(s,"./my-sites/pages/index.js"))},{name:"posts",paths:["/posts"],module:"calypso/my-sites/posts",group:"sites",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(88161),s.e(83198),s.e(9228),s.e(84760),s.e(55078),s.e(70071),s.e(4873),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(83309),s.e(10175),s.e(14890),s.e(74456),s.e(73482),s.e(90063),s.e(33194),s.e(66287)]).then(s.bind(s,"./my-sites/posts/index.js"))},{name:"settings-performance",paths:["/settings/performance"],module:"calypso/my-sites/site-settings/settings-performance",group:"sites",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(88161),s.e(83198),s.e(46025),s.e(6135),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(83309),s.e(10175),s.e(74456),s.e(6994),s.e(91769),s.e(42568),s.e(68914),s.e(89541),s.e(31066)]).then(s.bind(s,"./my-sites/site-settings/settings-performance/index.js"))},{name:"settings-writing",paths:["/settings/writing","/settings/taxonomies","/settings/podcasting"],module:"calypso/my-sites/site-settings/settings-writing",group:"sites",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(88161),s.e(83198),s.e(46025),s.e(9228),s.e(14059),s.e(6135),s.e(87203),s.e(22703),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(83309),s.e(10175),s.e(14890),s.e(73482),s.e(27373),s.e(68914),s.e(90103),s.e(76555)]).then(s.bind(s,"./my-sites/site-settings/settings-writing/index.js"))},{name:"settings-discussion",paths:["/settings/discussion"],module:"calypso/my-sites/site-settings/settings-discussion",group:"sites",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(88161),s.e(83198),s.e(46025),s.e(6135),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(10175),s.e(91769),s.e(86380),s.e(68914),s.e(42926)]).then(s.bind(s,"./my-sites/site-settings/settings-discussion/index.js"))},{name:"settings-security",paths:["/settings/security"],module:"calypso/my-sites/site-settings/settings-security",group:"sites",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(88161),s.e(83198),s.e(46025),s.e(6135),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(83309),s.e(10175),s.e(74456),s.e(6994),s.e(91769),s.e(32077),s.e(75828),s.e(68914),s.e(90315),s.e(30899)]).then(s.bind(s,"./my-sites/site-settings/settings-security/index.js"))},{name:"settings-jetpack",paths:["/settings/jetpack"],module:"calypso/my-sites/site-settings/settings-jetpack",group:"sites",load:()=>Promise.all([s.e(88161),s.e(6135),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(10175),s.e(6994),s.e(32077),s.e(75828),s.e(90315),s.e(46952)]).then(s.bind(s,"./my-sites/site-settings/settings-jetpack/index.js"))},{name:"settings",paths:["/settings"],module:"calypso/my-sites/site-settings",group:"sites",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(88161),s.e(83198),s.e(46025),s.e(32323),s.e(14059),s.e(38243),s.e(6135),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(83309),s.e(10175),s.e(14890),s.e(73482),s.e(90103),s.e(35571)]).then(s.bind(s,"./my-sites/site-settings/index.js"))},{name:"marketing",paths:["/marketing","/sharing"],module:"calypso/my-sites/marketing",group:"sites",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(88161),s.e(83198),s.e(46025),s.e(80027),s.e(46846),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(83309),s.e(10175),s.e(74456),s.e(6994),s.e(91769),s.e(42568),s.e(68914),s.e(69073)]).then(s.bind(s,"./my-sites/marketing/index.js"))},{name:"jetpack-connect",paths:["/jetpack"],module:"calypso/jetpack-connect",enableLoggedOut:!0,load:()=>Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(88161),s.e(83198),s.e(46025),s.e(8320),s.e(62777),s.e(80978),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(83309),s.e(6994),s.e(42568),s.e(99340),s.e(72486),s.e(79245),s.e(96770),s.e(12060),s.e(54204)]).then(s.bind(s,"./jetpack-connect/index.js"))},{name:"purchase-product",paths:["/purchase-product"],module:"calypso/my-sites/purchase-product",enableLoggedOut:!0,load:()=>Promise.all([s.e(50647),s.e(42568),s.e(12060),s.e(17413)]).then(s.bind(s,"./my-sites/purchase-product/index.js"))},{name:"signup",paths:["/start"],module:"calypso/signup",enableLoggedOut:!0,isomorphic:!0,load:()=>Promise.all([s.e(66823),s.e(75534),s.e(51830)]).then(s.bind(s,"./signup/index.web.js"))},{name:"stats",paths:["/stats"],module:"calypso/my-sites/stats",group:"sites",trackLoadPerformance:!0,load:()=>Promise.all([s.e(88161),s.e(36912),s.e(61343),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(83309),s.e(10175),s.e(74456),s.e(73482),s.e(91769),s.e(60650),s.e(82968),s.e(251),s.e(61079),s.e(25215),s.e(54874),s.e(91146),s.e(36784)]).then(s.bind(s,"./my-sites/stats/index.js"))},{name:"google-my-business",paths:["/google-my-business"],module:"calypso/my-sites/google-my-business",group:"sites",load:()=>Promise.all([s.e(88161),s.e(51278),s.e(536),s.e(92387),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(10175),s.e(60650),s.e(82968),s.e(74605),s.e(81020)]).then(s.bind(s,"./my-sites/google-my-business/index.js"))},{name:"themes",paths:["/themes","/([a-z]{2,3}|[a-z]{2}-[a-z]{2})/themes","/design"],module:"calypso/my-sites/themes",enableLoggedOut:!0,group:"sites",isomorphic:!0,title:"Themes",load:()=>Promise.all([s.e(88161),s.e(30343),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(83309),s.e(10175),s.e(14890),s.e(74456),s.e(73482),s.e(6994),s.e(91769),s.e(69436),s.e(86380),s.e(89541),s.e(78543),s.e(83767)]).then(s.bind(s,"./my-sites/themes/index.web.js"))},{name:"theme",paths:["/theme","/([a-z]{2,3}|[a-z]{2}-[a-z]{2})/theme"],module:"calypso/my-sites/theme",enableLoggedOut:!0,group:"sites",isomorphic:!0,title:"Themes",trackLoadPerformance:!0,load:()=>Promise.all([s.e(88161),s.e(30343),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(83309),s.e(10175),s.e(74456),s.e(73482),s.e(6994),s.e(69436),s.e(68505)]).then(s.bind(s,"./my-sites/theme/index.web.js"))},{name:"domains",paths:["/domains"],module:"calypso/my-sites/domains",group:"sites",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(88161),s.e(83198),s.e(46025),s.e(9228),s.e(32323),s.e(37327),s.e(86521),s.e(13433),s.e(87376),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(83309),s.e(42568),s.e(99340),s.e(22777),s.e(24990),s.e(1094),s.e(1208),s.e(6001),s.e(95783),s.e(57987),s.e(79477),s.e(98275)]).then(s.bind(s,"./my-sites/domains/index.js"))},{name:"incoming-redirect",paths:["/incoming-redirect"],module:"calypso/incoming-redirect",enableLoggedOut:!0,load:()=>s.e(89827).then(s.bind(s,"./incoming-redirect/index.js"))},{name:"email",paths:["/email"],module:"calypso/my-sites/email",group:"sites",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(88161),s.e(83198),s.e(46025),s.e(13433),s.e(92299),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(14890),s.e(6994),s.e(99340),s.e(75534),s.e(1208),s.e(79477),s.e(93041)]).then(s.bind(s,"./my-sites/email/index.js"))},{name:"inbox",paths:["/inbox"],module:"calypso/my-sites/email",group:"sites",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(88161),s.e(83198),s.e(46025),s.e(13433),s.e(92299),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(14890),s.e(6994),s.e(99340),s.e(75534),s.e(1208),s.e(79477),s.e(93041)]).then(s.bind(s,"./my-sites/email/index.js"))},{name:"checkout",paths:["/checkout"],module:"calypso/my-sites/checkout",group:"sites",enableLoggedOut:!0,load:()=>Promise.all([s.e(33832),s.e(88161),s.e(84760),s.e(10773),s.e(6729),s.e(53527),s.e(28509),s.e(42357),s.e(97429),s.e(96596),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(73482),s.e(6994),s.e(16419),s.e(99340),s.e(22777),s.e(1094),s.e(81405),s.e(38186),s.e(74231)]).then(s.bind(s,"./my-sites/checkout/index.js"))},{name:"plans",paths:["/plans"],module:"calypso/my-sites/plans",group:"sites",trackLoadPerformance:!0,load:()=>Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(88161),s.e(83198),s.e(46025),s.e(9228),s.e(67699),s.e(8320),s.e(2665),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(83309),s.e(10175),s.e(6994),s.e(42568),s.e(99340),s.e(1094),s.e(79245),s.e(95783),s.e(88687),s.e(14751)]).then(s.bind(s,"./my-sites/plans/index.js"))},{name:"accept-invite",paths:["/accept-invite"],module:"calypso/my-sites/invites",enableLoggedOut:!0,load:()=>Promise.all([s.e(16106),s.e(96770),s.e(94574),s.e(58247)]).then(s.bind(s,"./my-sites/invites/index.js"))},{name:"earn",paths:["/earn","/ads"],module:"calypso/my-sites/earn",group:"sites",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(88161),s.e(83198),s.e(46025),s.e(9228),s.e(62237),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(83309),s.e(10175),s.e(14890),s.e(74456),s.e(54874),s.e(13358)]).then(s.bind(s,"./my-sites/earn/index.js"))},{name:"mailing-lists",paths:["/mailing-lists/unsubscribe"],module:"calypso/mailing-lists",enableLoggedOut:!0,group:"me",load:()=>s.e(77204).then(s.bind(s,"./mailing-lists/index.js"))},{name:"reader",paths:["/read"],module:"calypso/reader",group:"reader",trackLoadPerformance:!0,load:()=>Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(55078),s.e(67290),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(10175),s.e(14890),s.e(19414),s.e(25240),s.e(58404),s.e(89999),s.e(757),s.e(55902),s.e(42207)]).then(s.bind(s,"./reader/index.js"))},{name:"reader",paths:["/read/feeds/[^\\/]+","/read/blogs/[^\\/]+","/read/a8c","/read/p2","/recommendations"],module:"calypso/reader",group:"reader",trackLoadPerformance:!0,load:()=>Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(55078),s.e(67290),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(10175),s.e(14890),s.e(19414),s.e(25240),s.e(58404),s.e(89999),s.e(757),s.e(55902),s.e(42207)]).then(s.bind(s,"./reader/index.js"))},{name:"reader",paths:["/read/feeds/[^\\/]+/posts/[^\\/]+","/read/blogs/[^\\/]+/posts/[^\\/]+"],module:"calypso/reader/full-post",group:"reader",trackLoadPerformance:!0,load:()=>Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(55078),s.e(67290),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(10175),s.e(14890),s.e(19414),s.e(25240),s.e(58404),s.e(89999),s.e(757),s.e(55902),s.e(42207)]).then(s.bind(s,"./reader/full-post/index.js"))},{name:"reader",paths:["/discover"],module:"calypso/reader/discover",group:"reader",trackLoadPerformance:!0,load:()=>Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(55078),s.e(67290),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(10175),s.e(14890),s.e(19414),s.e(25240),s.e(58404),s.e(89999),s.e(757),s.e(55902),s.e(42207)]).then(s.bind(s,"./reader/discover/index.js"))},{name:"reader",paths:["/following"],module:"calypso/reader/following",group:"reader",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(55078),s.e(67290),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(10175),s.e(14890),s.e(19414),s.e(25240),s.e(58404),s.e(89999),s.e(757),s.e(55902),s.e(42207)]).then(s.bind(s,"./reader/following/index.js"))},{name:"reader",paths:["/tags","/tag"],module:"calypso/reader/tag-stream",group:"reader",trackLoadPerformance:!0,load:()=>Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(55078),s.e(67290),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(10175),s.e(14890),s.e(19414),s.e(25240),s.e(58404),s.e(89999),s.e(757),s.e(55902),s.e(42207)]).then(s.bind(s,"./reader/tag-stream/index.js"))},{name:"reader",paths:["/activities"],module:"calypso/reader/liked-stream",group:"reader",trackLoadPerformance:!0,load:()=>Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(55078),s.e(67290),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(10175),s.e(14890),s.e(19414),s.e(25240),s.e(58404),s.e(89999),s.e(757),s.e(55902),s.e(42207)]).then(s.bind(s,"./reader/liked-stream/index.js"))},{name:"reader",paths:["/read/search","/recommendations"],module:"calypso/reader/search",group:"reader",trackLoadPerformance:!0,load:()=>Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(55078),s.e(67290),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(10175),s.e(14890),s.e(19414),s.e(25240),s.e(58404),s.e(89999),s.e(757),s.e(55902),s.e(42207)]).then(s.bind(s,"./reader/search/index.js"))},{name:"reader",paths:["/read/list"],module:"calypso/reader/list",group:"reader",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(55078),s.e(67290),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(10175),s.e(14890),s.e(19414),s.e(25240),s.e(58404),s.e(89999),s.e(757),s.e(55902),s.e(42207)]).then(s.bind(s,"./reader/list/index.js"))},{name:"reader",paths:["/read/conversations"],module:"calypso/reader/conversations",group:"reader",trackLoadPerformance:!0,load:()=>Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(55078),s.e(67290),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(10175),s.e(14890),s.e(19414),s.e(25240),s.e(58404),s.e(89999),s.e(757),s.e(55902),s.e(42207)]).then(s.bind(s,"./reader/conversations/index.js"))},{name:"help",paths:["/help"],module:"calypso/me/help",enableLoggedOut:!0,group:"me",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(88161),s.e(83198),s.e(46025),s.e(42160),s.e(14059),s.e(10773),s.e(87867),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(14890),s.e(27373),s.e(16419),s.e(53856),s.e(64320),s.e(76348),s.e(23039)]).then(s.bind(s,"./me/help/index.js"))},{name:"auth",paths:["/api/oauth/token"],module:"calypso/auth",enableLoggedOut:!0,load:()=>s.e(59818).then(s.bind(s,"./auth/index.js"))},{name:"posts-custom",paths:["/types"],module:"calypso/my-sites/types",group:"sites",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(88161),s.e(83198),s.e(9228),s.e(84760),s.e(55078),s.e(70071),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(83309),s.e(10175),s.e(14890),s.e(74456),s.e(73482),s.e(90063),s.e(33194),s.e(970)]).then(s.bind(s,"./my-sites/types/index.js"))},{name:"comments",paths:["/comments","/comment"],module:"calypso/my-sites/comments",group:"sites",load:()=>Promise.all([s.e(88161),s.e(84760),s.e(31562),s.e(72407),s.e(67699),s.e(36912),s.e(11690),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(10175),s.e(27373),s.e(91769),s.e(86380),s.e(58404),s.e(12356),s.e(58324)]).then(s.bind(s,"./my-sites/comments/index.js"))},{name:"preview",paths:["/view"],module:"calypso/my-sites/preview",group:"sites",load:()=>Promise.all([s.e(88161),s.e(21454),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(73482),s.e(11493)]).then(s.bind(s,"./my-sites/preview/index.js"))},{name:"domain-connect-authorize",paths:["/domain-connect"],module:"calypso/my-sites/domains/domain-management/domain-connect",load:()=>s.e(10199).then(s.bind(s,"./my-sites/domains/domain-management/domain-connect/index.jsx"))},{name:"gutenberg-editor",paths:["/block-editor","/site-editor","/post","/page","/edit"],module:"calypso/gutenberg/editor",group:"gutenberg",trackLoadPerformance:!0,load:()=>Promise.all([s.e(88161),s.e(83198),s.e(84760),s.e(6729),s.e(8427),s.e(53301),s.e(13857),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(73482),s.e(41040),s.e(80489)]).then(s.bind(s,"./gutenberg/editor/index.js"))},{name:"import",paths:["/import"],module:"calypso/my-sites/importer",group:"sites",load:()=>Promise.all([s.e(88161),s.e(84760),s.e(74262),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(14890),s.e(91769),s.e(86380),s.e(25240),s.e(67006)]).then(s.bind(s,"./my-sites/importer/index.js"))},{name:"export",paths:["/export"],module:"calypso/my-sites/exporter",group:"sites",load:()=>Promise.all([s.e(88161),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(91769),s.e(86380),s.e(67157)]).then(s.bind(s,"./my-sites/exporter/index.js"))},{name:"migrate",paths:["/migrate"],module:"calypso/my-sites/migrate",group:"sites",load:()=>Promise.all([s.e(88161),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(83309),s.e(65061)]).then(s.bind(s,"./my-sites/migrate/index.js"))},{name:"devdocs",paths:["/devdocs"],module:"calypso/devdocs",enableLoggedOut:!0,load:()=>Promise.all([s.e(14953),s.e(45573)]).then(s.bind(s,"./devdocs/index.js"))},{name:"home",paths:["/home"],module:"calypso/my-sites/customer-home",group:"sites",trackLoadPerformance:!0,load:()=>Promise.all([s.e(88161),s.e(10773),s.e(54858),s.e(19121),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(14890),s.e(73482),s.e(27373),s.e(60650),s.e(82968),s.e(61079),s.e(64320),s.e(52965),s.e(23293),s.e(85177)]).then(s.bind(s,"./my-sites/customer-home/index.js"))},{name:"hosting",paths:["/hosting-config"],module:"calypso/my-sites/hosting",group:"sites",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(88161),s.e(9228),s.e(45327),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(83309),s.e(74456),s.e(69436),s.e(89541),s.e(78543),s.e(8746)]).then(s.bind(s,"./my-sites/hosting/index.js"))},{name:"backup",paths:["/backup"],module:"calypso/my-sites/backup",group:"sites",load:()=>Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(88161),s.e(31562),s.e(6029),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(83309),s.e(27373),s.e(69436),s.e(34738),s.e(43174),s.e(89999),s.e(78543),s.e(55567),s.e(3443),s.e(85991)]).then(s.bind(s,"./my-sites/backup/index.js"))},{name:"scan",paths:["/scan"],module:"calypso/my-sites/scan",group:"sites",load:()=>Promise.all([s.e(88161),s.e(6029),s.e(94105),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(10175),s.e(27373),s.e(69436),s.e(32077),s.e(75828),s.e(78543),s.e(3443),s.e(44892),s.e(60853)]).then(s.bind(s,"./my-sites/scan/index.js"))},{name:"jetpack-cloud",paths:["/","/landing","/settings"],module:"calypso/jetpack-cloud",group:"jetpack-cloud",enableLoggedOut:!0,load:()=>Promise.all([s.e(88161),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(21532)]).then(s.bind(s,"./jetpack-cloud/index.js"))},{name:"jetpack-cloud-settings",paths:["/settings"],module:"calypso/jetpack-cloud/sections/settings",group:"jetpack-cloud",load:()=>Promise.all([s.e(88161),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(6994),s.e(32077),s.e(75828),s.e(44892),s.e(2595)]).then(s.bind(s,"./jetpack-cloud/sections/settings/index.js"))},{name:"jetpack-cloud-auth",paths:["/connect","/connect/oauth/token"],module:"calypso/jetpack-cloud/sections/auth",group:"jetpack-cloud",enableLoggedOut:!0,load:()=>s.e(48281).then(s.bind(s,"./jetpack-cloud/sections/auth/index.ts"))},{name:"jetpack-cloud-pricing",paths:["/pricing","/[^\\/]+/pricing","/plans","/[^\\/]+/plans"],module:"calypso/jetpack-cloud/sections/pricing",group:"jetpack-cloud",enableLoggedOut:!0,links:[{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap"}],load:()=>Promise.all([s.e(33832),s.e(16081),s.e(88161),s.e(83198),s.e(46025),s.e(8320),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(83309),s.e(6994),s.e(42568),s.e(99340),s.e(79245),s.e(29218),s.e(44492)]).then(s.bind(s,"./jetpack-cloud/sections/pricing/index.ts"))},{name:"jetpack-search",paths:["/jetpack-search"],module:"calypso/my-sites/jetpack-search",group:"sites",load:()=>Promise.all([s.e(88161),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(91769),s.e(2944)]).then(s.bind(s,"./my-sites/jetpack-search/index.js"))},{name:"jetpack-cloud-partner-portal",paths:["/partner-portal"],module:"calypso/jetpack-cloud/sections/partner-portal",group:"jetpack-cloud",load:()=>Promise.all([s.e(33832),s.e(9228),s.e(84760),s.e(67699),s.e(41881),s.e(10175),s.e(29218),s.e(29112),s.e(44856)]).then(s.bind(s,"./jetpack-cloud/sections/partner-portal/index.ts"))},{name:"woocommerce-installation",paths:["/woocommerce-installation"],module:"calypso/my-sites/woocommerce",group:"woocommerce-installation",load:()=>Promise.all([s.e(88161),s.e(22609),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(54338),s.e(71586)]).then(s.bind(s,"./my-sites/woocommerce/index.js"))},{name:"woocommerce",paths:["/store"],module:"calypso/my-sites/store",group:"sites",load:()=>Promise.all([s.e(88161),s.e(11084),s.e(16869),s.e(23543),s.e(26960),s.e(69521),s.e(66823),s.e(71253),s.e(14890),s.e(99738)]).then(s.bind(s,"./my-sites/store/index.js"))}];var ye=s("./sections-filter.js"),_e=s("./sections-helper.js");(0,_e.oq)(ge);const fe={};function je(e,t){const{envId:s}=t;if(s&&!s.includes((0,o.ZP)("env_id")))return;const n=function(e){return"/"===e?e:new RegExp("^"+e+"(/.*)?$")}(e);t.enableLoggedOut||l()(n,b.S9),t.trackLoadPerformance&&l()(n,(0,me.yD)(t.name)),l()(n,(async function(e,s){try{const n=fe[t.module];if(n)!0!==n&&await n;else{const s=async function(e,t){e.store.dispatch((0,re.t)(!0));const s=setTimeout((()=>{e.store.dispatch((0,pe.P)("calypso_chunk_waiting",t.name))}),400);try{const n=await(0,_e.zD)(t.name,t.module);await n.default(b.Ly)}finally{e.store.dispatch((0,re.t)(!1)),clearTimeout(s)}}(e,t);fe[t.module]=s,await s,fe[t.module]=!0}!function(e,t){b.QS(e)(t),t.store.dispatch((0,he.zW)())}(t,e),s()}catch(s){delete fe[t.module],console.error(s),ue()?function(e,t){ce("Chunk %s could not be loaded",t),(0,w.P)("calypso_chunk_error",t),e.store.dispatch((0,re.z)(!1,{section:!1})),e.primary=d.createElement(de,null),(0,b.wx)(e,le),(0,b.sY)(e)}(e,t.name):function(e){if(!ue()){const t=new URLSearchParams(window.location.search);(0,w.P)("calypso_chunk_retry",e),t.set("retry","1"),window.location.search=t.toString()}}(t.name)}}))}var be=s("../node_modules/redux/es/redux.js"),Ee=s("../node_modules/redux-dynamic-middlewares/lib/index.js"),we=s("../node_modules/redux-thunk/es/index.js"),Se=s("./state/data-layer/http-data.ts"),ve=s("./state/data-layer/wpcom-api-middleware.js"),ke=s("./state/utils/add-reducer-enhancer.js");const Re={actionHistory:[],shouldRecordActions:!0,historySize:100,watchPredicate:null},Ie=e=>{if(e instanceof RegExp)return({type:t})=>e.test(t);if("string"==typeof e)return({type:t})=>t===e;if("function"==typeof e)return e;throw new TypeError("provide string or RegExp matching `action.type` or a predicate function")},xe={clear:()=>{Re.actionHistory=[]},filter:e=>Re.actionHistory.filter(Ie(e)),setSize:e=>{Re.historySize=e},start:()=>{Re.shouldRecordActions=!0},stop:()=>{Re.shouldRecordActions=!1},unwatch:()=>{Re.watchPredicate=null},watch:e=>{Re.watchPredicate=e?Ie(e):null}};Object.defineProperty(xe,"history",{enumerable:!0,get:()=>Re.actionHistory});const Ne=e=>(...t)=>{const s=e(...t);if("undefined"==typeof window)return s;return Object.assign(window,{actionLog:xe}),{...s,dispatch:e=>(Re.shouldRecordActions&&(e=>{const{actionHistory:t,historySize:s}=Re,n="function"==typeof e?{type:"thunk (hidden)"}:{};t.push({...e,...n,meta:{...e.meta,timestamp:Date.now()}}),t.length>2*s&&(Re.actionHistory=t.slice(-1*s))})(e),"function"==typeof Re.watchPredicate&&"function"==typeof console.log&&Re.watchPredicate(e)&&console.log("Watched action observed:\n%o",e),s.dispatch(e))}},Pe=e=>(...t)=>{const s=e(...t);return"undefined"!=typeof window&&(Object.assign(window,s),Object.defineProperty(window,"state",{enumerable:!0,get:s.getState})),s};var Te=s("./state/utils/reducer-utils.ts"),Ze=s("./state/current-user/reducer.js"),Ae=s("./state/data-layer/wpcom-http/utils.js"),Oe=s("../node_modules/lodash-es/merge.js"),Le=s("../node_modules/lodash-es/reduce.js"),Ce=s("../node_modules/lodash-es/isEqual.js"),De=s("../node_modules/lodash-es/omit.js"),Ue=s("../node_modules/lodash-es/get.js"),Me=s("../node_modules/lodash-es/includes.js"),$e=s("./state/action-types.ts"),ze=s("./state/themes/action-types.js"),qe=s("./state/utils/schema-utils.js"),Fe=s("../node_modules/lodash-es/compact.js"),Be=s("../node_modules/lodash-es/concat.js"),Ge=s("../node_modules/lodash-es/reject.js");const Ve=(0,Te.U)({items:(e={},t)=>{switch(t.type){case $e.IFm:return{...e,[t.payload.blogId]:t.payload.stickers};case $e.f5R:{const{blogId:s,stickerName:n}=t.payload;return(0,Me.Z)(e[s],n)?e:{...e,[s]:(0,Fe.Z)((0,Be.Z)(n,e[s]))}}case $e.q37:{const{blogId:s,stickerName:n}=t.payload;return(0,Me.Z)(e[s],n)?{...e,[s]:(0,Ge.Z)(e[s],(e=>e===n))}:e}}return e}}),We=e=>(t,{siteId:s})=>({...t,[s]:e}),He=(0,Te.U)({items:(e={},t)=>{if(t.type===$e.tvw){const{siteId:s,status:n}=t;return{...e,[s]:n}}return e},requesting:(e={},t)=>{switch(t.type){case $e.U5d:return We(!0)(e,t);case $e.QLz:case $e.D5g:return We(!1)(e,t)}return e}});var Ke=s("../node_modules/lodash-es/find.js");const Je=(e,t,s,n)=>{const o=(0,Ke.Z)(e[t],{domain:s}),a=e[t].indexOf(o),i=[...e[t]];return i.splice(a,1,Object.assign({},o,n)),Object.assign({},e,{[t]:i})},Qe=(0,qe.G)({type:"object",additionalProperties:!1,patternProperties:{"^\\d+$":{type:"array",items:{type:"object",required:["domain"],properties:{autoRenewalDate:{type:"string"},autoRenewing:{type:"boolean"},blogId:{type:"number"},canSetAsPrimary:{type:"boolean"},currentUserCanManage:{type:"boolean"},domain:{type:"string"},expired:{type:"boolean"},expiry:{type:["null","string"]},expirySoon:{type:"boolean"},googleAppsSubscription:{type:"object"},titanMailSubscription:{type:"object"},hasRegistration:{type:"boolean"},hasWpcomNameservers:{type:"boolean"},hasZone:{type:"boolean"},isPendingIcannVerification:{type:"boolean"},isPremium:{type:"boolean"},isPrimary:{type:"boolean"},isSubdomain:{type:"boolean"},isWPCOMDomain:{type:"boolean"},manualTransferRequired:{type:"boolean"},newRegistration:{type:"boolean"},name:{type:"string"},owner:{type:"string",optional:!0},partnerDomain:{type:"boolean"},pendingRegistration:{type:"boolean"},pendingRegistrationTime:{type:"string"},pointsToWpcom:{type:"boolean"},registrar:{type:"string"},registrationDate:{type:"string"},subscriptionId:{type:["null","string"]},supportsDomainConnect:{type:"boolean",optional:!0},supportsGdprConsentManagement:{type:"boolean",optional:!0},type:{type:"string"},transferStartDate:{type:["null","string"]},transferEndDate:{type:["null","string"]}}}}}},((e={},t)=>{const{siteId:s}=t;switch(t.type){case $e.t2O:return Object.assign({},e,{[s]:t.domains});case $e.DGo:return Je(e,s,t.domain,{privateDomain:!0,contactInfoDisclosed:!1});case $e.ON1:return Je(e,s,t.domain,{privateDomain:!1,contactInfoDisclosed:!1});case $e.tGX:return Je(e,s,t.domain,{privateDomain:!1,contactInfoDisclosed:!0});case $e.HYG:return Je(e,s,t.domain,{privateDomain:!1,contactInfoDisclosed:!1})}return e})),Ye=(0,Te.U)({errors:(e={},t)=>{switch(t.type){case $e.wOJ:case $e.RI4:return Object.assign({},e,{[t.siteId]:null});case $e.dyA:return Object.assign({},e,{[t.siteId]:t.error})}return e},items:Qe,requesting:(e={},t)=>{switch(t.type){case $e.wOJ:case $e.RI4:case $e.dyA:return Object.assign({},e,{[t.siteId]:t.type===$e.wOJ})}return e},updatingPrivacy:(e={},t)=>{switch(t.type){case $e.sBg:case $e.DGo:case $e.zVI:case $e.HCR:case $e.ON1:case $e.T6o:case $e.w6q:case $e.tGX:case $e.M5U:case $e.K1T:case $e.HYG:case $e.sQe:return Object.assign({},e,{[t.siteId]:{[t.domain]:-1!==[$e.sBg,$e.HCR,$e.w6q,$e.K1T].indexOf(t.type)}})}return e}});var Xe=s("./state/sites/features/reducer.js");const et=(0,qe.G)({type:"object",additionalProperties:!1,patternProperties:{"^\\d+$":{type:"object",properties:{issues:{type:"array",items:{type:"object",properties:{reason:{type:"string"},prevents_transfer:{type:"boolean"}}}},upgrade_purchased:{type:"boolean"},host_details_entered:{type:"boolean"}}}}},((e={},t)=>t.type===$e.eG$?{...e,[t.siteId]:t.guidedTransferStatus}:e)),tt=(0,Te.U)({error:(e={},t)=>{switch(t.type){case $e.v9E:return{...e,[t.siteId]:null};case $e.YD7:return{...e,[t.siteId]:null};case $e.r7b:{let s=!0;return t.error&&t.error.error&&(s=t.error.error),{...e,[t.siteId]:s}}}return e},isFetching:(e={},t)=>{switch(t.type){case $e.ias:return{...e,[t.siteId]:!0};case $e.N7i:return{...e,[t.siteId]:!1};case $e.F18:return{...e,[t.siteId]:!1}}return e},isSaving:(e={},t)=>{switch(t.type){case $e.v9E:return{...e,[t.siteId]:!0};case $e.YD7:return{...e,[t.siteId]:!1};case $e.r7b:return{...e,[t.siteId]:!1}}return e},status:et});var st=s("../node_modules/lodash-es/pick.js");const nt=(0,qe.G)({type:"object",patternProperties:{"^\\d+$":{type:"object",required:["max_storage_bytes","storage_used_bytes"],properties:{max_storage_bytes:{type:["integer"]},storage_used_bytes:{type:["integer"]}}}},additionalProperties:!1},((e={},t)=>{if(t.type===$e.uin){const s=(0,st.Z)(t.mediaStorage,["max_storage_bytes","storage_used_bytes"]);return Object.assign({},e,{[t.siteId]:s})}return e}));const ot=(0,Te.U)({items:nt,fetchingItems:function(e={},t){switch(t.type){case $e.r9W:case $e.PXi:case $e.$U1:return Object.assign({},e,{[t.siteId]:t.type===$e.r9W})}return e}});var at=s("./state/utils/keyed-reducer.ts");const it=(0,at.J)("siteId",((e=null,t)=>t.type===$e.JC7?t.settings:e)),rt=(0,at.J)("siteId",((e=!1,t)=>{switch(t.type){case $e.gvs:return!0;case $e.fJ1:case $e.IlB:return!1}return e})),ct=(0,at.J)("siteId",((e=!1,t)=>{switch(t.type){case $e.JJX:return!0;case $e.DO2:case $e.Adm:return!1}return e})),lt=(0,Te.U)({items:it,requesting:rt,updating:ct});var dt=s("./state/sites/plans/reducer.js"),ut=s("./state/sites/products/reducer.js"),mt=s("./state/sites/schema.js"),pt=s("../node_modules/lodash-es/uniqBy.js");const ht=(0,qe.G)({type:"object",additionalProperties:!1,patternProperties:{"^\\d+$":{type:"array",items:{type:"object"}}}},((e={},t)=>{switch(t.type){case $e.uM1:{const{siteId:s,settings:n}=t;return{...e,[s]:n}}case $e.lK9:{const{siteId:s,settings:n}=t;return{...e,[s]:(0,pt.Z)(n.concat(e[s]||[]),"ID")}}}return e})),gt=(0,Te.U)({items:ht,requesting:(e={},t)=>{switch(t.type){case $e.UFl:{const{siteId:s}=t;return{...e,[s]:!0}}case $e.m5h:{const{siteId:s}=t;return{...e,[s]:!1}}case $e.NhM:{const{siteId:s}=t;return{...e,[s]:!1}}}return e},saveRequests:(e={},t)=>{switch(t.type){case $e.kT_:{const{siteId:s}=t;return{...e,[s]:{saving:!0,status:"pending"}}}case $e._V9:{const{siteId:s}=t;return{...e,[s]:{saving:!1,status:"success"}}}case $e.LUH:{const{siteId:s}=t;return{...e,[s]:{saving:!1,status:"error"}}}}return e}}),yt=(0,qe.G)(mt.K,((e=null,t)=>{if(null===e&&t.type!==$e.UUJ&&t.type!==$e.xLe)return null;switch(t.type){case $e.Khp:{const s=e[t.siteId];return s?Object.assign({},e,{[t.siteId]:(0,Oe.Z)({},s,{options:{wordads:!0}})}):e}case $e.UUJ:case $e.xLe:{const s=t.site?[t.site]:t.sites,n=$e.xLe===t.type?{}:e;return(0,Le.Z)(s,((t,s)=>((0,Ce.Z)(t[s.ID],s)||(t===e&&(t={...e}),t[s.ID]=s),t)),n||{})}case $e.SYS:case $e.Oh9:return(0,De.Z)(e,t.siteId);case ze.hX:{const{siteId:s,themeStylesheet:n}=t,o=e[s];if(!o)break;return{...e,[s]:(0,Oe.Z)({},o,{options:{theme_slug:n}})}}case $e.rZJ:case $e.KBY:{const{siteId:s,settings:n}=t,o=e[s];if(!o)return e;let a=o;return(0,Le.Z)(["blog_public","wpcom_public_coming_soon","wpcom_coming_soon","site_icon"],((t,i)=>{if(!n.hasOwnProperty(i))return t;switch(i){case"blog_public":{const e=-1===parseInt(n.blog_public,10);if(o.is_private===e)return t;a={...a,is_private:e};break}case"wpcom_coming_soon":case"wpcom_public_coming_soon":{const e=1===parseInt(n.wpcom_public_coming_soon,10)||1===parseInt(n.wpcom_coming_soon,10);if(o.is_coming_soon===e)return t;a={...a,is_coming_soon:e};break}case"site_icon":{const e=n.site_icon;if(!o.icon&&null===e||o.icon&&o.icon.media_id===e)return t;a=null===e?(0,De.Z)(a,"icon"):{...a,icon:{media_id:e}};break}}return t===e&&(t={...e}),t[s]=a,t}),e)}case $e.aqr:{const{siteId:s,mediaIds:n}=t,o=(0,Ue.Z)(e[s],"icon.media_id");return o&&(0,Me.Z)(n,o)?{...e,[s]:(0,De.Z)(e[s],"icon")}:e}case $e.U0$:{const{siteId:s}=t,n=(0,Ue.Z)(e[s],"updates");return n?{...e,[s]:{...e[s],updates:{...n,plugins:n.plugins-1,total:n.total-1}}}:e}case $e.uvG:{const{siteId:s,frontPageOptions:n}=t,o=e[s];if(!o)break;return{...e,[s]:(0,Oe.Z)({},o,{options:{...n}})}}case $e.lTr:{const{siteId:s,migrationStatus:n,lastModified:o}=t;if(!e[s])return e;const a=e[s].site_migration||{},i={status:n};return o&&(i.last_modified=o),{...e,[s]:{...e[s],site_migration:(0,Oe.Z)({},a,i)}}}}return e})),_t=(0,qe.G)(mt.W,((e=!1,t)=>t.type===$e.xLe||e)),ft=(0,Te.U)({connection:He,domains:Ye,requestingAll:(e=!1,t)=>{switch(t.type){case $e.M4_:return!0;case $e.eTV:case $e.KSQ:return!1}return e},items:yt,mediaStorage:ot,plans:dt.z,products:ut.R,features:Xe.E,guidedTransfer:tt,monitor:lt,requesting:(e={},t)=>{switch(t.type){case $e.hJk:{const{siteId:s}=t;return{...e,[s]:!0}}case $e.uuM:{const{siteId:s}=t;return{...e,[s]:!1}}case $e.Mvd:{const{siteId:s}=t;return{...e,[s]:!1}}}return e},sharingButtons:gt,blogStickers:Ve,hasAllSitesList:_t}),jt={currentUser:Ze.ZP,dataRequests:Ae.I6,httpData:Se.I6,sites:ft},bt=(0,Te.U)(jt);var Et=s("./state/happychat/connection/actions.js");s("./state/happychat/init.js");const wt=e=>{const t=(e=>(0,Ue.Z)(e,"happychat.chat.lastActivityTimestamp"))(e);return Date.now()-t<6e5};var St=s("./state/happychat/user/actions.js"),vt=s("./state/happychat/utils.js"),kt=s("./state/initial-state.js"),Rt=s("./state/push-notifications/actions.js"),It=s("./state/reader-ui/seen-posts/actions.js"),xt=s("./state/redux-store.ts"),Nt=s("./state/route/actions.js"),Pt=s("./state/ui/selectors/get-selected-site-id.js"),Tt=s("./state/ui/selectors/get-section-name.js"),Zt=s("./boot/locale.js");const At=r()("calypso");const Ot=()=>{if(o.ZP.isEnabled("oauth")){const e=["/start","/api/oauth/token","/connect"];(0,V.Z)()&&o.ZP.isEnabled("jetpack/pricing-page")&&(e.push("/pricing","/plans"),(0,G.aK)().forEach((t=>e.push(`/${t}/pricing`,`/${t}/plans`)))),l()("*",(function(t,s){const n=e.some((e=>t.path.startsWith(e)));!1!==(0,T.LP)()||n?s():window.location=function(){const e=new URL((0,V.Z)()?"/connect/oauth/token":"/api/oauth/token",window.location);e.search=new URLSearchParams({next:window.location.pathname+window.location.search}).toString();const t=new URL("https://public-api.wordpress.com/oauth2/authorize");return t.search=new URLSearchParams({response_type:"token",client_id:(0,o.ZP)("oauth_client_id"),redirect_uri:e.toString(),scope:"global",blog_id:0}).toString(),t.toString()}()}))}};const Lt=(e,t)=>{At("Executing Calypso setup middlewares."),(e=>{l()("*",((t,s)=>{const n=(0,a.A)(t.canonicalPath),o=n.pathname+n.search||null;if(t.prevPath=o!==t.path&&o,t.query=Object.fromEntries(n.searchParams.entries()),t.hashstring=n.hash&&n.hash.substring(1)||"",t.hashstring)try{t.hash=Object.fromEntries(new globalThis.URLSearchParams(t.hashstring).entries())}catch(e){At("failed to query-string parse `location.hash`",e),t.hash={}}else t.hash={};t.store=e,t.redirect=(e,s=null)=>(isNaN(e)&&!s&&(s=e),l().replace(s,t.state,!1,!1)),"/wp-login.php"!==t.pathname?(0,te.Z)(t.pathname)?window.location.href=t.path:s():window.location.href=t.path})),l().exit("*",((t,s)=>{t.store||(t.store=e),s()}))})(t),Ot(),(()=>{for(const e of ge)if((0,ye.Z)(e))for(const t of e.paths)je(t,e)})(),l()("*",((e,t)=>{e.store.dispatch((0,Nt.p)(e.pathname,e.query)),t()})),l().exit("*",K.bw),(0,E.M)(e||void 0,(0,S.Z)(t)),function(e){if(!o.ZP.isEnabled("catch-js-errors"))return;const t=new N;s("./lib/catch-js-errors/log.js").X(t),t.saveDiagnosticData({user_id:(0,C.rc)(e.getState()),calypso_env:(0,o.ZP)("env_id")}),t.saveDiagnosticReducer((function(){const t=e.getState();return{blog_id:(0,Pt.Z)(t),calypso_section:(0,Tt.Z)(t)}})),v.tracksEvents.on("record-event",((e,s)=>t.saveExtraData({lastTracksEvent:s}))),l()("*",(function(e,s){t.saveNewPath(e.canonicalPath.replace((0,A.lQ)(e.canonicalPath),":siteId")),s()}))}(t),l()("*",(function(e,s){if(-1!==["sb","sp"].indexOf(e.querystring)){const s="sb"===e.querystring?"sidebar":"sites";t.dispatch((0,he.SB)(s)),l().replace(e.pathname)}s()})),l()("*",(function(e,t){return(0,X.K)(e.pathname)?t():Y(e,t)})),l()("*",(function(e,t){const s=e.pathname;if((0,X.K)(s))return t();(0,w.P)({newdash_pageviews:"route"}),t()})),l()("*",(function(t,s){"/me/account"!==t.path&&e.phone_account&&l()("/me/account"),s()})),l()("*",j),window.location.pathname.startsWith("/start")||["signupProgress","signupDependencies"].forEach((e=>g().remove(e))),e||l()("*",(function(e,t){if("/plans"!==e.pathname)t();else{const t=e.query&&e.query.for;window.location=t&&"jetpack"===t?"https://wordpress.com/wp-login.php?redirect_to=https%3A%2F%2Fwordpress.com%2Fplans":(0,V.Z)()?se.ml:"https://wordpress.com/pricing"}}));const n=t.getState();o.ZP.isEnabled("reader/seen-posts")&&t.dispatch((0,It.S)()),o.ZP.isEnabled("happychat")&&t.dispatch((0,St._J)()),wt(n)&&t.dispatch((0,Et.XY)((0,vt.S)(n)())),o.ZP.isEnabled("keyboard-shortcuts")&&(0,W.Z)(),window.electron&&F.init(t),o.ZP.isEnabled("dev/auth-helper")&&document.querySelector(".environment.is-auth")&&s.e(20632).then(s.bind(s,"./lib/auth-helper/index.jsx")).then((function(e){(0,e.default)(document.querySelector(".environment.is-auth"),t)})),o.ZP.isEnabled("dev/preferences-helper")&&document.querySelector(".environment.is-prefs")&&s.e(42497).then(s.bind(s,"./lib/preferences-helper/index.js")).then((function(e){(0,e.default)(document.querySelector(".environment.is-prefs"),t)})),o.ZP.isEnabled("dev/features-helper")&&document.querySelector(".environment.is-features")&&s.e(18537).then(s.bind(s,"./lib/features-helper/index.js")).then((function(e){(0,e.default)(document.querySelector(".environment.is-features"))})),o.ZP.isEnabled("logmein")&&(0,C.Pc)(t.getState())&&(0,H.cI)(t)};const Ct=(e,t)=>{!function(){if(!window.location.search)return;const e=new URLSearchParams(window.location.search).get("flags");if(!e)return;const t=e.split(",").find((e=>/^[+-]?oauth$/.test(e)));t&&window.sessionStorage.setItem("flags",t)}(),At("Executing Calypso utils."),(0,ee._)()?document.documentElement.classList.add("touch"):document.documentElement.classList.add("notouch"),(0,n.Z)(),p().setAppElement(document.getElementById("wpcom")),(0,kt.oY)().then((()=>{const n=function(e,t=bt){const n="object"==typeof window,a=(0,o._k)("desktop"),i="object"==typeof window&&"function"==typeof window.Audio,r=[we.Z,ve.Z,n&&s("./state/happychat/middleware.js").Z,n&&s("./state/happychat/middleware-calypso.js").ZP,Ee.ZP,n&&s("./state/analytics/middleware.js").i,n&&s("./state/lib/middleware.js").Z,i&&s("./state/audio/middleware.js").ZP,a&&s("./state/desktop/middleware.js").Z].filter(Boolean),c=[ke.f,n&&window.app&&window.app.isDebug&&Pe,Se.JJ,(0,be.applyMiddleware)(...r),n&&window.app&&window.app.isDebug&&Ne,n&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()].filter(Boolean);return(0,be.createStore)(t,e,(0,be.compose)(...c))}((0,kt.aY)(bt,e?.ID),bt);(0,xt.P)(n,e?.ID),(0,oe.x$)((0,kt.VA)(n,e?.ID)),(0,Zt.w)(e,n),((e,t)=>{At("Executing Calypso configure Redux store."),e&&t.dispatch((0,L.lx)(e)),o.ZP.isEnabled("network-connection")&&s.e(46503).then(s.bind(s,"./lib/network-connection/index.js")).then((function(e){e.default.init(t)})),(0,ae.setSupportSessionReduxStore)(t),(0,J.eG)(t),e&&o.ZP.isEnabled("push-notifications")&&t.dispatch((0,Rt.S1)())})(e,n),Lt(e,n),B.Z.start(),t&&t(),document.getElementById("primary")||function(e){const t=d.createElement(b.o0,{store:e});u.render(t,document.getElementById("wpcom")),At("Main layout rendered.")}(n),l().start({decodeURLComponents:!1})}))};window.AppBoot=()=>{(async(e,t)=>{const s=await(0,ne.k)();At(`Starting ${e}. Let's do this.`),Ct(s,t)})("Calypso")}},"./components/data/query-preferences/index.jsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var n=s("../node_modules/react/index.js"),o=s("../node_modules/react-redux/es/index.js"),a=s("./state/preferences/actions.js"),i=s("./state/preferences/selectors.js");function r(){const e=(0,o.I0)();return(0,n.useEffect)((()=>{e(((e,t)=>{(0,i.rf)(t())||e((0,a.Fe)())}))}),[e]),null}},"./components/pulsing-dot/index.jsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/classnames/index.js"),a=s.n(o),i=(s("../node_modules/prop-types/index.js"),s("../node_modules/react/index.js"));class r extends i.Component{constructor(...e){super(...e),(0,n.Z)(this,"timeout",null),(0,n.Z)(this,"state",{show:!1})}componentDidMount(){const{delay:e}=this.props;this.timeout=setTimeout((()=>{this.setState({show:!0})}),e)}componentWillUnmount(){this.timeout&&clearTimeout(this.timeout)}render(){const{active:e}=this.props,{show:t}=this.state;if(!t)return null;const s=a()("pulsing-dot",{"is-active":e});return i.createElement("div",{className:s})}}r.defaultProps={delay:0};const c=r},"./controller/index.web.js":(e,t,s)=>{"use strict";s.d(t,{o0:()=>os,Ly:()=>rs,wx:()=>as,v6:()=>ds,S9:()=>cs,cY:()=>ls,sY:()=>ss.s,QS:()=>ts.QS});var n=s("../packages/calypso-config/src/index.ts"),o=s("../packages/i18n-calypso/src/index.js"),a=s("../node_modules/page/page.js"),i=s.n(a),r=s("../node_modules/react/index.js"),c=s("../node_modules/react-query/es/index.js"),l=s("../node_modules/react-query/es/core/queryClient.js"),d=s("../node_modules/react-redux/es/index.js"),u=s("../packages/i18n-utils/src/locale-context.tsx"),m=s("../packages/i18n-utils/src/locales.ts"),p=s("../node_modules/@wordpress/i18n/build-module/index.js"),h=s("../node_modules/@wordpress/react-i18n/build-module/index.js");const g=({children:e})=>{const[t,s]=r.useState(o.ZP.getLocaleSlug());return r.useEffect((()=>{const e=()=>{p.i$.setLocaleData(o.ZP.getLocale()),s(o.ZP.getLocaleSlug())};return o.ZP.on("change",e),()=>{o.ZP.off("change",e)}}),[]),r.useEffect((()=>{p.i$.resetLocaleData(o.ZP.getLocale())}),[t]),r.createElement(u.Iw,{localeSlug:t||m.OP},r.createElement(h.bd,{i18n:p.i$},e))};var y=s("./components/empty-content/index.jsx"),_=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),f=s("../node_modules/debug/src/browser.js"),j=s.n(f),b=s("../node_modules/moment/moment.js"),E=s.n(b),w=s("./state/selectors/get-current-locale-slug.js"),S=s("./components/localized-moment/context.js");const v=j()("calypso:localized-moment");class k extends r.Component{constructor(...e){super(...e),(0,_.Z)(this,"state",{moment:E(),momentLocale:E().locale()})}async checkAndLoad(e){const{currentLocale:t}=this.props;if(t!==e){if("en"===t)this.loadingLocalePromise=Promise.resolve();else{v("Loading moment locale for %s",t);try{this.loadingLocalePromise=s("../node_modules/moment/locale lazy recursive ^\\.\\/.*$ include: \\.js$")(`./${t}`),await this.loadingLocalePromise}catch(e){return void v("Failed to load moment locale for %s",t,e)}v("Loaded moment locale for %s",t)}t===this.props.currentLocale&&(E().locale()!==t&&E().locale(t),this.setState({momentLocale:t}))}}componentDidMount(){this.checkAndLoad(E().locale())}componentDidUpdate(e){this.checkAndLoad(e.currentLocale)}render(){return r.createElement(S.Z.Provider,{value:this.state},this.props.children)}}const R=(0,d.$j)((e=>({currentLocale:(0,w.Z)(e)})))(k);var I=s("./components/route/index.js"),x=s("../node_modules/@babel/runtime/helpers/esm/extends.js"),N=s("../packages/viewport/src/index.js"),P=s("../packages/viewport-react/src/index.js"),T=s("../node_modules/classnames/index.js"),Z=s.n(T),A=s("../node_modules/prop-types/index.js"),O=s.n(A),L=s("./components/async-load/index.jsx"),C=s("./components/data/document-head/index.jsx"),D=s("./components/data/query-preferences/index.jsx"),U=s("./state/sites/features/reducer.js");var M=s("./lib/wp/browser.js"),$=s("./state/action-types.ts");const z=(e={})=>(e.active=e.active||[],e.available=e.available||{},e),q=j()("calypso:site-features:actions");function F(e){return t=>(t({type:$.fa4,siteId:e}),new Promise((s=>{M.Z.undocumented().getSiteFeatures(e,((n,a)=>{if(n){q("Fetching site features failed: ",n);const s=n.message||o.ZP.translate("There was a problem fetching site features. Please try again later or contact support.");t({type:$.YCt,siteId:e,error:s})}else t(function(e,t){return{type:$.xNf,siteId:e,features:z(t)}}(e,a));s()}))})))}const B=e=>(t,s)=>{e&&!function(e,t){return e.sites.features?.[t]&&e.sites.features[t].isRequesting||U.T.isRequesting}(s(),e)&&t(F(e))};function G({siteId:e}){const t=(0,d.I0)();return(0,r.useEffect)((()=>{t(B(e))}),[t,e]),null}G.propTypes={siteId:O().number};var V=s("./state/selected-editor/actions.js");function W({siteId:e}){const t=(0,d.I0)();return(0,r.useEffect)((()=>{e&&t((0,V.o)(e))}),[t,e]),null}W.propTypes={siteId:O().number};var H=s("./components/data/query-sites/index.jsx"),K=s("./components/jetpack-logo/index.jsx"),J=s("./components/gravatar/index.jsx"),Q=s("./lib/jetpack/use-track-callback.ts"),Y=s("./state/current-user/actions.js"),X=s("./state/current-user/selectors.js");const ee=()=>{const e=(0,d.I0)(),t=(0,o.qM)(),s=r.useRef(null),[n,a]=(0,r.useState)(!1),i=(0,d.v9)(X.ts),c=(0,r.useCallback)((()=>a(!n)),[n,a]),l=(0,r.useCallback)((()=>{n&&a(!1)}),[n,a]),u=(0,Q.Z)(c,"calypso_jetpack_masterbar_profile_toggle"),m=(0,Q.Z)(l,"calypso_jetpack_masterbar_profile_close"),p=(0,r.useCallback)((()=>e((0,Y.S9)())),[e]),h=(0,Q.Z)(p,"calypso_jetpack_settings_masterbar_logout");return function(e,t){const s=(0,r.useCallback)((e=>{"Escape"===e.key&&t()}),[t]),n=(0,r.useCallback)((({target:s})=>{e.current&&!e.current.contains(s)&&t()}),[e,t]);(0,r.useEffect)((()=>(document.addEventListener("keydown",s),document.addEventListener("click",n),()=>{document.removeEventListener("keydown",s),document.removeEventListener("click",n)})),[n,s])}(s,m),r.createElement("nav",{className:"profile-dropdown__nav",id:"user-navigation","aria-label":t("User menu",{comment:"Label used to differentiate navigation landmarks in screen readers"}),ref:s},r.createElement("button",{className:"profile-dropdown__button","aria-expanded":n,"aria-controls":"menu-list",onClick:u},r.createElement(J.Z,{className:"profile-dropdown__button-gravatar",user:i,alt:t("My Profile"),size:24})),r.createElement("ul",{className:"profile-dropdown__list",id:"menu-list",hidden:!n},r.createElement("li",{className:"profile-dropdown__list-item"},r.createElement("span",{className:"profile-dropdown__display-name"},i.display_name),r.createElement("span",{className:"profile-dropdown__username"},`@${i.username}`)),r.createElement("li",{className:"profile-dropdown__list-item"},r.createElement("button",{className:"profile-dropdown__logout",onClick:h},t("Log out")))))};var te=s("./layout/masterbar/masterbar.jsx"),se=s("./state/document-head/selectors/get-document-head-title.js"),ne=s("./state/selectors/get-current-route.js"),oe=function(e){Promise.all([s.e(10175),s.e(29112),s.e(45948)]).then(s.bind(s,"./components/jetpack/portal-nav/index.tsx")).then((function(t){e(t.default)}))};const ae=()=>{const e=(0,o.qM)(),t=(0,d.v9)(se.p),s=(0,d.v9)(ne.Z),n=(0,P.Gc)("<660px"),a=/^\/(?:backup|scan)\/[^/]*$/.test(s);return r.createElement(te.Z,{className:"is-jetpack-cloud-masterbar"},r.createElement("a",{className:"masterbar__item-home",href:"/",title:e("Jetpack Cloud Dashboard",{comment:"Jetpack Cloud top navigation bar item"})},r.createElement(K.Z,{size:28,full:!n||a,aria:{hidden:!0}})),r.createElement(L.Z,{require:oe,placeholder:null}),t&&r.createElement("h1",{className:"masterbar__item-title"},t),r.createElement(ee,null))};var ie=s("./jetpack-connect/persistence-utils.js"),re=s("./jetpack-connect/woo-dna-config.js"),ce=s("./state/ui/selectors/get-section-name.js"),le=s("./state/ui/selectors/get-selected-site-id.js");const de=e=>!(!(0,le.Z)(e)||"gutenberg-editor"!==(0,ce.Z)(e)),ue=()=>{const e=(0,d.v9)(de);return(0,r.useEffect)((()=>{const t=document.querySelector("html");if(t)return e?(t.classList.add("is-iframe"),()=>t.classList.remove("is-iframe")):void t.classList.remove("is-iframe")}),[e]),null},me=()=>r.createElement("header",{id:"header",className:"masterbar"});var pe=s("../node_modules/qs/lib/index.js"),he=s("./lib/route/path.ts"),ge=s("./my-sites/domains/paths.js"),ye=s("./sections-helper.js"),_e=s("./state/analytics/actions/record.js"),fe=s("./state/data-layer/http-data.ts"),je=s("./state/data-layer/wpcom-http/actions.js");s("./state/reader-ui/init.js");var be=s("./state/selectors/get-previous-path.js"),Ee=s("./state/selectors/get-primary-site-id.js"),we=s("./state/selectors/get-site-migration-status.js"),Se=s("./state/selectors/is-domain-only-site.js"),ve=s("./state/selectors/is-nav-unification-enabled.js"),ke=s("./state/selectors/is-notifications-open.js"),Re=s("./state/selectors/is-site-automated-transfer.js"),Ie=s("./state/selectors/is-site-migration-active-route.js"),xe=s("./state/selectors/is-site-migration-in-progress.js"),Ne=s("./state/sites/actions.js"),Pe=s("./state/sites/selectors/get-site-slug.js"),Te=s("./state/sites/selectors/is-jetpack-site.js"),Ze=s("./state/sites/selectors/can-current-user-use-customer-home.js"),Ae=s("./state/support/selectors.js"),Oe=s("./state/ui/layout-focus/actions.js"),Le=s("./state/ui/layout-focus/selectors.js"),Ce=s("./blocks/inline-help/data/use-inline-help-search-query.js"),De=s("./blocks/inline-help/inline-help-search-card.jsx"),Ue=s("./lib/i18n-utils/browser.js"),Me=s("./state/inline-help/selectors/get-search-query.js");const $e=(0,d.$j)((e=>({searchQuery:(0,Me.Z)(e)})),{track:_e.jN})((0,o.NC)((0,Ce.a)((function(e){const t=(0,o.qM)();return r.createElement("div",{role:"button",className:"popup-search__mask",onClick:e.onClose},r.createElement("div",{className:"popup-search__container",onClick:e=>e.stopPropagation()},r.createElement(De.Z,{query:e.searchQuery,placeholder:t("Search wordpress actions")}),e.searchResults.length>0&&r.createElement("div",{className:"popup-search__results","aria-label":"Pop Up Search"},e.searchResults.slice(0,10).map((({link:t,key:s,title:n,description:o})=>r.createElement("div",{key:n},r.createElement("div",{role:"button",className:"popup-search__result-single",key:s,onClick:()=>(t=>{e.onClose();const s=new URL(window.location.origin+t),n=((e="",t="")=>""===e&&""!==t?t:""===t&&""!==e?e:`${e}&${t.slice(1)}`)(s.search,window.location.search);s.search=n,window.location.href=(0,Ue.aq)(s.toString())})(t)},r.createElement("div",{className:"popup-search__results-cell"},r.createElement("h2",null,n),r.createElement("em",{className:"popup-search__description"},o)))))))))}))));var ze=s("./layout/masterbar/item.jsx"),qe=s("../node_modules/store/dist/store.modern.js"),Fe=s.n(qe);s("./components/translatable/proptype.js"),s("./state/notifications/init.js");const Be=(Ge=X.ts,e=>{const t=(e=>void 0===e.notificationsUnseenCount?null:e.notificationsUnseenCount)(e);if(null!==t)return t>0;const s=Ge(e);return null!==s?!!s.has_unseen_notes:null});var Ge,Ve=s("./state/ui/actions/notifications.js"),We=function(e){Promise.all([s.e(37803),s.e(52850)]).then(s.bind(s,"./notifications/index.jsx")).then((function(t){e(t.default)}))};class He extends r.Component{constructor(...e){super(...e),(0,_.Z)(this,"notificationLink",(0,r.createRef)()),(0,_.Z)(this,"state",{animationState:0,newNote:this.props.hasUnseenNotifications}),(0,_.Z)(this,"checkToggleNotes",((e,t)=>{const s=!!e&&e.target,n=this.notificationLink.current;s&&n.contains(s)||(this.props.isNotificationsOpen||!0===t)&&this.toggleNotesFrame(e)})),(0,_.Z)(this,"toggleNotesFrame",(e=>{e&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),this.props.toggleNotificationsPanel()})),(0,_.Z)(this,"setNotesIndicator",(e=>{const t=Fe().get("wpnotes_unseen_count");let s=this.state.animationState;0===e?s=0:e>t&&(s=1-Math.abs(this.state.animationState)),Fe().set("wpnotes_unseen_count",e),this.setState({newNote:e>0,animationState:s})}))}UNSAFE_componentWillReceiveProps(e){!this.props.isNotificationsOpen&&e.isNotificationsOpen&&(e.recordTracksEvent("calypso_notification_open",{unread_notifications:Fe().get("wpnotes_unseen_count")}),this.setNotesIndicator(0)),this.props.isNotificationsOpen&&!e.isNotificationsOpen&&(this.notificationLink.current.blur(),window.focus())}render(){const e=Z()(this.props.className,{"is-active":this.props.isNotificationsOpen,"has-unread":this.state.newNote,"is-initial-load":-1===this.state.animationState});return r.createElement("div",{className:"masterbar__notifications",ref:this.notificationLink},r.createElement(ze.Z,{url:"/notifications",icon:"bell",onClick:this.toggleNotesFrame,isActive:this.props.isActive,tooltip:this.props.tooltip,className:e},this.props.children,r.createElement("span",{className:"masterbar__notifications-bubble",key:"notification-indicator-animation-state-"+Math.abs(this.state.animationState)})),r.createElement(L.Z,{require:We,isShowing:this.props.isNotificationsOpen,checkToggle:this.checkToggleNotes,setIndicator:this.setNotesIndicator,placeholder:null}))}}const Ke={toggleNotificationsPanel:Ve.P,recordTracksEvent:_e.jN},Je=(0,d.$j)((e=>({isNotificationsOpen:(0,ke.Z)(e),hasUnseenNotifications:Be(e)})),Ke)(He);var Qe=function(e){s.e(93206).then(s.bind(s,"./layout/masterbar/checkout.tsx")).then((function(t){e(t.default)}))},Ye=function(e){Promise.all([s.e(33832),s.e(16081),s.e(74004),s.e(83198),s.e(32323),s.e(38243),s.e(7407)]).then(s.bind(s,"./layout/masterbar/quick-language-switcher.jsx")).then((function(t){e(t.default)}))},Xe=function(e){Promise.all([s.e(16869),s.e(23543),s.e(73482),s.e(19517)]).then(s.bind(s,"./my-sites/resume-editing/index.jsx")).then((function(t){e(t.default)}))},et=function(e){Promise.all([s.e(16869),s.e(73482),s.e(84020)]).then(s.bind(s,"./layout/masterbar/publish.jsx")).then((function(t){e(t.default)}))};class tt extends r.Component{constructor(...e){super(...e),(0,_.Z)(this,"state",{isActionSearchVisible:!1}),(0,_.Z)(this,"handleLayoutFocus",(e=>{this.props.isNavUnificationEnabled?e!==this.props.section?this.props.setNextLayoutFocus("sidebar"):"sidebar"===this.props.currentLayoutFocus?this.props.setNextLayoutFocus("content"):this.props.setNextLayoutFocus("sidebar"):this.props.setNextLayoutFocus("sidebar")})),(0,_.Z)(this,"clickMySites",(()=>{if(this.props.recordTracksEvent("calypso_masterbar_my_sites_clicked"),this.handleLayoutFocus("sites"),this.props.activateNextLayoutFocus(),n.ZP.isEnabled("tools/migrate")){const{migrationStatus:e,currentSelectedSiteId:t}=this.props;t&&"error"===e&&(this.props.updateSiteMigrationMeta(t,"inactive",null),(0,fe.qM)("site-migration",(0,je.d)({apiNamespace:"wpcom/v2",method:"POST",path:`/sites/${t}/reset-migration`,body:{}}),{freshness:0}))}})),(0,_.Z)(this,"clickReader",(()=>{this.props.recordTracksEvent("calypso_masterbar_reader_clicked"),this.handleLayoutFocus("reader")})),(0,_.Z)(this,"clickMe",(()=>{this.props.recordTracksEvent("calypso_masterbar_me_clicked"),window.scrollTo(0,0),this.handleLayoutFocus("me")})),(0,_.Z)(this,"clickSearchActions",(()=>{this.props.recordTracksEvent("calypso_masterbar_search_actions_clicked"),this.handleLayoutFocus("search-actions"),this.setState({isActionSearchVisible:!0})})),(0,_.Z)(this,"onSearchActionsClose",(()=>{this.setState({isActionSearchVisible:!1})})),(0,_.Z)(this,"preloadMySites",(()=>{(0,ye.MA)(this.props.domainOnlySite?"domains":"stats")})),(0,_.Z)(this,"preloadReader",(()=>{(0,ye.MA)("reader")})),(0,_.Z)(this,"preloadMe",(()=>{(0,ye.MA)("me")})),(0,_.Z)(this,"isActive",(e=>e===this.props.section&&!this.props.isNotificationsShowing)),(0,_.Z)(this,"wordpressIcon",(()=>"horizon.wordpress.com"===(0,n.ZP)("hostname")?"my-sites-horizon":"my-sites"))}componentDidMount(){"true"===(0,pe.parse)(document.location.search.replace(/^\?/,""))?.openSidebar&&this.props.setNextLayoutFocus("sidebar"),this.actionSearchShortCutListener=()=>{event.ctrlKey&&event.shiftKey&&"F"===event.key&&this.clickSearchActions()},document.addEventListener("keydown",this.actionSearchShortCutListener)}componentWillUnmount(){document.removeEventListener("keydown",this.actionSearchShortCutListener)}renderMySites(){const{domainOnlySite:e,hasMoreThanOneSite:t,siteSlug:s,translate:n,isCustomerHomeEnabled:o,section:a}=this.props,i=o?`/home/${s}`:(0,he.Zg)("day",s);let c=e?(0,ge.Hf)(s):i;return this.props.isNavUnificationEnabled&&"sites"===a&&(c=""),r.createElement(ze.Z,{url:c,tipTarget:"my-sites",icon:this.wordpressIcon(),onClick:this.clickMySites,isActive:this.isActive("sites"),tooltip:n("View a list of your sites and access their dashboards"),preloadSection:this.preloadMySites},n(t?"My Sites":"My Site",{comment:"Toolbar, must be shorter than ~12 chars"}))}render(){const e=n.ZP.isEnabled("wordpress-action-search"),{domainOnlySite:t,translate:s,isCheckout:o,isMigrationInProgress:a,previousPath:i,siteSlug:c,isJetpackNotAtomic:l,title:d}=this.props,{isActionSearchVisible:u}=this.state;return o?r.createElement(L.Z,{require:Qe,placeholder:null,title:d,isJetpackNotAtomic:l,previousPath:i,siteSlug:c}):r.createElement(r.Fragment,null,e&&u?r.createElement($e,{onClose:this.onSearchActionsClose}):null,r.createElement(te.Z,null,this.renderMySites(),r.createElement(ze.Z,{tipTarget:"reader",className:"masterbar__reader",url:"/read",icon:"reader",onClick:this.clickReader,isActive:this.isActive("reader"),tooltip:s("Read the blogs and topics you follow"),preloadSection:this.preloadReader,hasUnseen:this.props.hasUnseen},s("Reader",{comment:"Toolbar, must be shorter than ~12 chars"})),(this.props.isSupportSession||n.ZP.isEnabled("quick-language-switcher"))&&r.createElement(L.Z,{require:Ye,placeholder:null}),e&&r.createElement(ze.Z,{tipTarget:"Action Search",icon:"search",onClick:this.clickSearchActions,isActive:!1,className:"masterbar__item-action-search",tooltip:s("Search"),preloadSection:this.preloadMe},s("Search Actions")),r.createElement(L.Z,{require:Xe,placeholder:null}),!t&&!a&&r.createElement(L.Z,{require:et,placeholder:null,isActive:this.isActive("post"),className:"masterbar__item-new",tooltip:s("Create a New Post")},s("Write")),r.createElement(ze.Z,{tipTarget:"me",url:"/me",icon:"user-circle",onClick:this.clickMe,isActive:this.isActive("me"),className:"masterbar__item-me",tooltip:s("Update your profile, personal settings, and more"),preloadSection:this.preloadMe},r.createElement(J.Z,{user:this.props.user,alt:s("My Profile"),size:18}),r.createElement("span",{className:"masterbar__item-me-label"},s("My Profile",{context:"Toolbar, must be shorter than ~12 chars"}))),r.createElement(Je,{isShowing:this.props.isNotificationsShowing,isActive:this.isActive("notifications"),className:"masterbar__item-notifications",tooltip:s("Manage your notifications")},r.createElement("span",{className:"masterbar__item-notifications-label"},s("Notifications",{comment:"Toolbar, must be shorter than ~12 chars"})))))}}const st=(0,d.$j)((e=>{const t=(0,le.Z)(e),s=t||(0,Ee.Z)(e),n=(0,xe.Z)(e,t)||(0,Ie.Z)(e);return{hasUnseen:!1,isCustomerHomeEnabled:(0,Ze.Z)(e,s),isNotificationsShowing:(0,ke.Z)(e),siteSlug:(0,Pe.Z)(e,s),domainOnlySite:(0,Se.Z)(e,s),hasMoreThanOneSite:(0,X.bo)(e)>1,user:(0,X.ts)(e),isSupportSession:(0,Ae.o)(e),isMigrationInProgress:n,migrationStatus:(0,we.Z)(e,t),currentSelectedSiteId:t,previousPath:(0,be.Z)(e),isJetpackNotAtomic:(0,Te.Z)(e,s)&&!(0,Re.Z)(e,s),currentLayoutFocus:(0,Le.d)(e),isNavUnificationEnabled:(0,ve.Z)(e)}}),{setNextLayoutFocus:Oe.SB,recordTracksEvent:_e.jN,updateSiteMigrationMeta:Ne.Fj,activateNextLayoutFocus:Oe.zW})((0,o.NC)(tt)),nt=()=>r.createElement("span",{className:"offline-status"},r.createElement("svg",{className:"gridicon",height:18,width:18,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},r.createElement("g",null,r.createElement("path",{d:"M12.736 3.184L7.834 12.57l5.106.035-2.592 7.904 7.265-10.502-5.65.083.773-6.906z"}))),"Offline");var ot=s("./lib/jetpack/is-jetpack-cloud.ts"),at=s("../packages/components/src/dialog/index.tsx"),it=s("./lib/keyboard-shortcuts/index.js"),rt=s("./lib/keyboard-shortcuts/key-bindings.js");class ct extends r.Component{constructor(...e){super(...e),(0,_.Z)(this,"state",{showDialog:!1}),(0,_.Z)(this,"closeDialog",(()=>{this.setState({showDialog:!1})})),(0,_.Z)(this,"toggleShowDialog",(()=>{this.setState({showDialog:!this.state.showDialog})}))}componentDidMount(){it.Z.on("open-keyboard-shortcuts-menu",this.toggleShowDialog)}componentWillUnmount(){it.Z.off("open-keyboard-shortcuts-menu",this.toggleShowDialog)}getShortcutsByCategory(){const e=rt.Z,t=[{name:this.props.translate("List Navigation"),shortcuts:e.listNavigation,className:"keyboard-shortcuts__list-navigation",disabled:!0},{name:this.props.translate("Site Navigation"),shortcuts:e.siteNavigation,className:"keyboard-shortcuts__site-navigation"},{name:this.props.translate("Reader"),shortcuts:e.reader,className:"keyboard-shortcuts__reader",disabled:!0},{name:this.props.translate("Blog Posts and Pages"),shortcuts:e.blogPostsAndPages,className:"keyboard-shortcuts__blog-posts-and-pages",disabled:!0}];return n.ZP.isEnabled("devdocs")&&t.push({name:this.props.translate("Developer"),shortcuts:e.developer,className:"keyboard-shortcuts__developer"}),t.map((e=>{const t=Z()("keyboard-shortcuts__category",e.className,{"keyboard-shortcuts__category-disabled":e.disabled});return r.createElement("li",{className:t,key:e.name},r.createElement("h3",null,e.name),r.createElement("ul",{className:"keyboard-shortcuts__list"},this.getShortcutList(e.shortcuts)))}))}getShortcutList(e){return e.map((e=>{if(!e.description)return null;const t=e.description.keys.map(((t,s)=>r.createElement("div",{className:"keyboard-shortcuts__key",key:e.eventName+s},t))),s=e.description.text(this.props.translate);return r.createElement("li",{key:e.eventName},r.createElement("div",{className:"keyboard-shortcuts__keys"},t),r.createElement("div",{className:"keyboard-shortcuts__description"},s))}))}render(){return this.state.showDialog?r.createElement(at.Z,{isVisible:!0,additionalClassNames:"keyboard-shortcuts",onClose:this.closeDialog},r.createElement("h1",{className:"keyboard-shortcuts__title"},this.props.translate("Keyboard Shortcuts")),r.createElement("ul",{className:"keyboard-shortcuts__categories"},this.getShortcutsByCategory())):null}}const lt=(0,o.NC)(ct);var dt=s("./lib/mobile-app/index.js"),ut=s("./lib/oauth2-clients.js"),mt=s("./lib/user/verification-checker.js");s("./state/application/init.js");function pt(e){return"OFFLINE"===e.application.connectionState}var ht=s("./state/happychat/selectors/has-active-happychat-session.js"),gt=s("./state/happychat/selectors/is-happychat-open.js"),yt=s("./state/oauth2-clients/ui/selectors.js"),_t=s("./state/preferences/selectors.js"),ft=s("./state/selectors/is-community-translator-enabled.js"),jt=s("./state/ui/selectors/get-selected-site.js"),bt=s("./state/ui/selectors/masterbar-is-visible.js"),Et=s("./state/ui/selectors/sidebar-visibility.js"),wt=s("./lib/user/support-user-interop.js");class St extends r.Component{constructor(...e){super(...e),(0,_.Z)(this,"onKeyboardShortcut",(()=>{this.props.isSupportSession&&(0,wt.rebootNormally)()}))}componentDidMount(){it.Z.on("exit-support-user",this.onKeyboardShortcut)}componentWillUnmount(){it.Z.off("exit-support-user",this.onKeyboardShortcut)}render(){return null}}const vt=(0,d.$j)((e=>({isSupportSession:(0,Ae.o)(e)})))(St);var kt=s("./layout/body-section-css-class.js"),Rt=s("./components/pulsing-dot/index.jsx"),It=s("./state/ui/selectors/is-section-loading.js");function xt(){const e=(0,d.v9)(It.Z);return r.createElement("div",{className:Z()("layout__loader",{"is-active":e})},e&&r.createElement(Rt.Z,{delay:400,active:!0}))}let Nt=0,Pt=0,Tt=!0,Zt=!1,At=!1;const Ot=e=>{if(At)return;const t=window.innerHeight,s=document.getElementById("content"),n=s?.scrollHeight,o=document.getElementById("secondary"),a=o?.scrollHeight,i=document.getElementById("header")?.getBoundingClientRect().height;s&&n&&i&&a&&(n<a&&(s.style.minHeight=a+i+"px"),t>=a+i&&s&&o&&("initial"!==s.style.minHeight||o.style.position)&&(s.style.minHeight="initial",o.removeAttribute("style"))),o&&void 0!==a&&void 0!==i&&(a+i>t||"resize"===e.type)&&(window.requestAnimationFrame((function(){const e=a+i-t,s=-document.body.getBoundingClientRect().top;return s<0?(Tt||(Tt=!0,Zt=!1,o.style.position="fixed",o.style.top="0",o.style.bottom="0"),void(At=!1)):s+t>document.body.scrollHeight-1?(Zt||(Zt=!0,Tt=!1,o.style.position="fixed",o.style.top="inherit",o.style.bottom="0"),void(At=!1)):(s>=Nt?Tt?(Tt=!1,Pt=i,s>e&&(Pt+=s),o.style.position="absolute",o.style.top=`${Pt}px`,o.style.bottom="inherit"):!Zt&&s+i>e+o.offsetTop&&(Zt=!0,o.style.position="fixed",o.style.top="inherit",o.style.bottom="0"):s<Nt&&(Zt?(Zt=!1,Pt=s+i-e,n===a+i&&(Pt=i),o.style.position="absolute",o.style.top=`${Pt}px`,o.style.bottom="inherit"):!Tt&&s+i<Pt&&(Tt=!0,Pt=i,o.style.position="fixed",o.style.top=`${Pt}px`,o.style.bottom="inherit")),Nt=s,void(At=!1))})),At=!0)};function Lt({enabled:e}){const t=(0,P.Gc)("<660px"),s=e&&!t&&!n.ZP.isEnabled("jetpack-cloud");return r.useEffect((()=>(s&&(window.addEventListener("scroll",Ot),window.addEventListener("resize",Ot)),()=>{s&&(window.removeEventListener("scroll",Ot),window.removeEventListener("resize",Ot),document.getElementById("content")?.removeAttribute("style"),document.getElementById("secondary")?.removeAttribute("style"))})),[s]),null}function Ct({layoutFocus:e}){const t=e=>{const t=document.querySelector("body").classList;e?t.add("is-sidebar-overflow"):t.remove("is-sidebar-overflow")};return r.useEffect((()=>{"sites"!==e?setTimeout((()=>{t(!0)}),500):t(!1)}),[e]),null}var Dt=function(e){s.e(40139).then(s.bind(s,"./layout/guided-tours/index.js")).then((function(t){e(t.default)}))},Ut=function(e){s.e(24799).then(s.bind(s,"./jetpack-cloud/style.tsx")).then((function(t){e(t.default)}))},Mt=function(e){s.e(33743).then(s.bind(s,"./blocks/jitm/index.jsx")).then((function(t){e(t.default)}))},$t=function(e){s.e(39675).then(s.bind(s,"./components/global-notices/index.jsx")).then((function(t){e(t.default)}))},zt=function(e){s.e(28460).then(s.bind(s,"./components/community-translator/index.jsx")).then((function(t){e(t.default)}))},qt=function(e){s.e(78628).then(s.bind(s,"./layout/community-translator/launcher.jsx")).then((function(t){e(t.default)}))},Ft=function(e){Promise.all([s.e(78150),s.e(23573)]).then(s.bind(s,"./components/happychat/index.jsx")).then((function(t){e(t.default)}))},Bt=function(e){s.e(55400).then(s.bind(s,"./blocks/inline-help/index.jsx")).then((function(t){e(t.default)}))},Gt=function(e){s.e(28945).then(s.bind(s,"./components/happychat/button.jsx")).then((function(t){e(t.default)}))},Vt=function(e){s.e(26561).then(s.bind(s,"./blocks/support-article-dialog/index.jsx")).then((function(t){e(t.default)}))},Wt=function(e){s.e(3765).then(s.bind(s,"./blocks/app-banner/index.jsx")).then((function(t){e(t.default)}))},Ht=function(e){Promise.resolve().then(s.bind(s,"./blocks/gdpr-banner/index.jsx")).then((function(t){e(t.default)}))},Kt=function(e){s.e(45149).then(s.bind(s,"./blocks/legal-updates-banner/index.js")).then((function(t){e(t.default)}))};class Jt extends r.Component{componentDidMount(){n.ZP.isEnabled("me/account/color-scheme-picker")&&"undefined"!=typeof document&&this.props.colorSchemePreference&&document.querySelector("body").classList.add(`is-${this.props.colorSchemePreference}`)}componentDidUpdate(e){if(n.ZP.isEnabled("me/account/color-scheme-picker")&&e.colorSchemePreference!==this.props.colorSchemePreference&&"undefined"!=typeof document){const t=document.querySelector("body").classList;t.remove(`is-${e.colorSchemePreference}`),t.add(`is-${this.props.colorSchemePreference}`)}}shouldShowHappyChatButton(){if(!n.ZP.isEnabled("happychat"))return!1;if((0,dt.H)())return!1;if(!this.props.hasActiveHappyChat)return!1;return!["happychat","devdocs"].includes(this.props.sectionName)&&!["/log-in/jetpack"].includes(this.props.currentRoute)&&!["/start/p2"].some((e=>this.props.currentRoute.startsWith(e)))}shouldLoadInlineHelp(){if(!n.ZP.isEnabled("inline-help"))return!1;if((0,dt.H)())return!1;return!["jetpack-connect","happychat","devdocs","help","home"].includes(this.props.sectionName)&&!["/log-in/jetpack"].includes(this.props.currentRoute)&&!["/start/p2","/plugins/domain","/plugins/marketplace/setup"].some((e=>this.props.currentRoute.startsWith(e)))}renderMasterbar(){if(this.props.masterbarIsHidden)return r.createElement(me,null);const e=n.ZP.isEnabled("jetpack-cloud")?ae:st;return r.createElement(e,{section:this.props.sectionGroup,isCheckout:"checkout"===this.props.sectionName})}render(){const e=Z()("layout",`focus-${this.props.currentLayoutFocus}`,{["is-group-"+this.props.sectionGroup]:this.props.sectionGroup,["is-section-"+this.props.sectionName]:this.props.sectionName,"is-support-session":this.props.isSupportSession,"has-no-sidebar":!this.props.secondary||(0,dt.T)(),"is-inline-help-showing":this.shouldLoadInlineHelp(),"is-happychat-button-showing":this.shouldShowHappyChatButton(),"has-chat":this.props.chatIsOpen,"has-no-masterbar":this.props.masterbarIsHidden||(0,dt.T)(),"is-jetpack-login":this.props.isJetpackLogin,"is-jetpack-site":this.props.isJetpack,"is-jetpack-mobile-flow":this.props.isJetpackMobileFlow,"is-jetpack-woocommerce-flow":this.props.isJetpackWooCommerceFlow,"is-jetpack-woo-dna-flow":this.props.isJetpackWooDnaFlow,"is-wccom-oauth-flow":(0,ut.dS)(this.props.oauth2Client)&&this.props.wccomFrom}),{shouldShowAppBanner:t}=this.props,s=this.shouldLoadInlineHelp();return r.createElement("div",{className:e},r.createElement(Lt,{enabled:this.props.isNavUnificationEnabled}),r.createElement(Ct,{layoutFocus:this.props.currentLayoutFocus}),r.createElement(kt.Z,(0,x.default)({group:this.props.sectionGroup,section:this.props.sectionName},(()=>{const e=["font-smoothing-antialiased"];return this.props.isNavUnificationEnabled&&!n.ZP.isEnabled("jetpack-cloud")&&e.push("is-nav-unification"),this.props.sidebarIsCollapsed&&(0,N.kV)(">800px")&&e.push("is-sidebar-collapsed"),{bodyClass:e}})())),r.createElement(ue,null),r.createElement(C.Z,null),r.createElement(H.Z,{primaryAndRecent:!n.ZP.isEnabled("jetpack-cloud")}),this.props.shouldQueryAllSites&&r.createElement(H.Z,{allSites:!0}),r.createElement(D.Z,null),r.createElement(G,{siteId:this.props.siteId}),n.ZP.isEnabled("layout/query-selected-editor")&&r.createElement(W,{siteId:this.props.siteId}),r.createElement(mt.Z,null),n.ZP.isEnabled("layout/guided-tours")&&r.createElement(L.Z,{require:Dt,placeholder:null}),n.ZP.isEnabled("keyboard-shortcuts")?r.createElement(lt,null):null,this.renderMasterbar(),n.ZP.isEnabled("support-user")&&r.createElement(vt,null),r.createElement(xt,null),(0,ot.Z)()&&r.createElement(L.Z,{require:Ut,placeholder:null}),this.props.isOffline&&r.createElement(nt,null),r.createElement("div",{id:"content",className:"layout__content"},n.ZP.isEnabled("jitms")&&this.props.isEligibleForJITM&&r.createElement(L.Z,{require:Mt,placeholder:null,messagePath:`calypso:${this.props.sectionJitmPath}:admin_notices`}),r.createElement(L.Z,{require:$t,placeholder:null,id:"notices"}),r.createElement("div",{id:"secondary",className:"layout__secondary",role:"navigation"},this.props.secondary),r.createElement("div",{id:"primary",className:"layout__primary"},this.props.primary)),n.ZP.isEnabled("i18n/community-translator")?this.props.isCommunityTranslatorEnabled&&r.createElement(L.Z,{require:zt}):(0,n.ZP)("restricted_me_access")&&r.createElement(L.Z,{require:qt,placeholder:null}),n.ZP.isEnabled("happychat")&&this.props.chatIsOpen&&r.createElement(L.Z,{require:Ft}),!1,s&&r.createElement(L.Z,{require:Bt,placeholder:null}),this.shouldShowHappyChatButton()&&r.createElement(L.Z,{require:Gt,placeholder:null,allowMobileRedirect:!0,borderless:!1,className:Z()("floating-happychat-button",{offset:s})}),n.ZP.isEnabled("layout/support-article-dialog")&&r.createElement(L.Z,{require:Vt,placeholder:null}),t&&n.ZP.isEnabled("layout/app-banner")&&r.createElement(L.Z,{require:Wt,placeholder:null}),n.ZP.isEnabled("gdpr-banner")&&r.createElement(L.Z,{require:Ht,placeholder:null}),n.ZP.isEnabled("legal-updates-banner")&&r.createElement(L.Z,{require:Kt,placeholder:null}))}}const Qt=(0,I.CA)((0,d.$j)(((e,{currentSection:t,currentRoute:s,currentQuery:n})=>{const o=t?.group??null,a=t?.name??null,i=(0,le.Z)(e),r=function(e){if(e&&e.options){const t=Date.now()-new Date(e.options.created_at).getTime()>36e5,s="unlaunched"!==e.launch_status;return t&&s}return!0}((0,jt.Z)(e)),c=(0,he.cu)(s),l=s.startsWith("/log-in/jetpack"),d=(0,Te.Z)(e,i)&&!(0,Re.Z)(e,i)||s.startsWith("/checkout/jetpack"),u=l||"/me/account/closed"===s,m=["signup","jetpack-connect"].includes(a),p="jetpack-connect"===a&&!!(0,ie.h8)(),h=["jetpack-connect","login"].includes(a)&&"woocommerce-onboarding"===n?.from,g=["jetpack-connect","login"].includes(a)&&(0,re.Z)(n).isWooDnaFlow(),y=(0,yt.op)(e),_=n?.["wccom-from"],f=["home","stats","plans","themes","plugins","comments"].includes(a);return{masterbarIsHidden:!(0,bt.Z)(e)||m||u||(0,dt.H)(),isJetpack:d,isJetpackLogin:l,isJetpackWooCommerceFlow:h,isJetpackWooDnaFlow:g,isJetpackMobileFlow:p,isEligibleForJITM:f,isCommunityTranslatorEnabled:(0,ft.Z)(e),oauth2Client:y,wccomFrom:_,isSupportSession:(0,Ae.o)(e),sectionGroup:o,sectionName:a,sectionJitmPath:c,shouldShowAppBanner:r,isOffline:pt(e),currentLayoutFocus:(0,Le.d)(e),chatIsOpen:(0,gt.Z)(e),hasActiveHappyChat:(0,ht.Z)(e),colorSchemePreference:(0,_t.Oz)(e,"colorScheme"),siteId:i,shouldQueryAllSites:s&&"/jetpack/connect/authorize"!==s,isNavUnificationEnabled:(0,ve.Z)(e),sidebarIsCollapsed:(0,Et.Z)(e)}}))(Jt));var Yt=s("./layout/logged-out.jsx"),Xt=s("./lib/paths/index.js"),es=s("./state/immediate-login/selectors.js"),ts=s("./controller/shared.js"),ss=s("./controller/web-util.js");const ns=new l.S,os=({store:e,currentSection:t,currentRoute:s,currentQuery:n,primary:o,secondary:a,redirectUri:i})=>{const l=e.getState(),u=(0,X.Pc)(l)?r.createElement(Qt,{primary:o,secondary:a}):r.createElement(Yt.Z,{primary:o,secondary:a,redirectUri:i});return r.createElement(g,null,r.createElement(I.nY,{currentSection:t,currentRoute:s,currentQuery:n},r.createElement(c.QueryClientProvider,{client:ns},r.createElement(d.zt,{store:e},r.createElement(R,null,u)))))},as=(0,ts.n6)(os);function is(e){(!n.ZP.isEnabled("wpcom-user-bootstrap")&&(0,X.Pc)(e.store.getState())?ss.s:ss.Z)(e)}function rs(e,...t){i()(e,...t,is)}function cs(e,t){const s=e.store.getState();if(!(0,X.Pc)(s)){const t=e.params.site||(0,he.lQ)(e.path),n={redirectTo:e.path,site:t},o=(0,es.Yh)(s);o&&(n.emailAddress=o);const a=(0,es.j4)(s);return a&&(n.locale=a),void(window.location=(0,Xt.x4)(n))}t()}function ls(e,t){const s=(0,Ue.aK)(),n=new RegExp(`\\/(${s.join("|")})(\\/|\\?|$)`),o=e.path.replace(n,"$2");if((0,X.Pc)(e.store.getState())&&o!==e.path)return i().redirect(o);t()}const ds=(e,t)=>{e.primary=r.createElement(y.Z,{className:"content-404",illustration:"/calypso/images/illustrations/illustration-404.svg",title:(0,o.Iu)("Uh oh. Page not found."),line:(0,o.Iu)("Sorry, the page you were looking for doesn't exist or has been moved.")}),t()}},"./jetpack-connect/persistence-utils.js":(e,t,s)=>{"use strict";s.d(t,{R2:()=>r,WA:()=>c,fX:()=>l,En:()=>d,ms:()=>u,Rf:()=>m,_i:()=>p,NB:()=>h,h8:()=>g});var n=s("../node_modules/cookie/index.js"),o=s("./lib/url/http-utils.ts"),a=s("./state/jetpack-connect/constants.js");const i="jetpack_connect_selected_plan",r=e=>{window.sessionStorage.setItem(i,e)},c=()=>{window.sessionStorage.removeItem(i)},l=()=>window.sessionStorage.getItem(i),d=e=>{const t={maxAge:a.e4,path:"/"};document.cookie=n.serialize("jetpack_connect_session_url",(0,o.nq)(e),t)},u=e=>n.parse(document.cookie).jetpack_connect_session_url===(0,o.nq)(e),m=e=>{document.cookie=n.serialize("jetpack_sso_approved",e,{maxAge:300,path:"/"})},p=e=>{const t=n.parse(document.cookie);return e===parseInt(t.jetpack_sso_approved,10)},h=e=>{document.cookie=n.serialize("jetpack_connect_mobile_redirect",e,{path:"/"})},g=()=>n.parse(document.cookie).jetpack_connect_mobile_redirect},"./lib/catch-js-errors/log.js":(e,t,s)=>{"use strict";s.d(t,{X:()=>a});var n=s("../node_modules/debug/src/browser.js");s.n(n)()("calypso:catch-js-errors:log");let o=null;function a(e){o=e}},"./lib/detect-history-navigation/index.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});let n=!1;const o={start:function(){window.addEventListener("popstate",(function(e){n=!!e.state}))},loadedViaHistory:function(){return n}}},"./lib/i18n-utils/constants.js":(e,t,s)=>{"use strict";s.d(t,{oB:()=>n,U6:()=>o,iE:()=>a,DQ:()=>i});const n="wpcom",o="https://translate.wordpress.com",a={de_formal:"formal"},i="enable_translator"},"./lib/jetpack/use-track-callback.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var n=s("../node_modules/react/index.js"),o=s("../node_modules/react-redux/es/index.js"),a=s("./state/analytics/actions/record.js"),i=s("./state/ui/selectors/get-selected-site-id.js");const r=()=>{},c=(e=r,t,s={})=>{const c=(0,o.I0)(),l=(0,o.v9)(i.Z);return n.useCallback(((...n)=>{c((0,a.jN)(t,{site_id:l,...s})),e(...n)}),[e,t,c,l])}},"./lib/keyboard-shortcuts/global.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>p});var n=s("../packages/calypso-config/src/index.ts"),o=s("../node_modules/page/page.js"),a=s.n(o),i=s("./lib/keyboard-shortcuts/index.js"),r=s("./lib/redux-bridge/index.js"),c=s("./lib/route/path.ts"),l=s("./state/ui/layout-focus/actions.js"),d=s("./state/ui/selectors/get-selected-site.js"),u=s("./state/ui/selectors/get-section-group.js");let m;function p(){return m||(m=new h),m}function h(){if(!(this instanceof h))return new h;this.bindShortcuts()}h.prototype.bindShortcuts=function(){i.Z.on("open-help",this.openHelp.bind(this)),i.Z.on("go-to-reader",this.goToReader.bind(this)),i.Z.on("go-to-my-likes",this.goToMyLikes.bind(this)),i.Z.on("open-site-selector",this.openSiteSelector.bind(this)),i.Z.on("go-to-stats",this.goToStats.bind(this)),i.Z.on("go-to-blog-posts",this.goToBlogPosts.bind(this)),i.Z.on("go-to-pages",this.goToPages.bind(this)),n.ZP.isEnabled("devdocs")&&i.Z.on("go-to-dev-docs",this.goToDevDocs.bind(this))},h.prototype.getSelectedSite=function(){return(0,d.Z)((0,r.JC)())},h.prototype.openHelp=function(){this.showInlineHelp&&this.showInlineHelp()},h.prototype.openSiteSelector=function(){"sites"===(0,u.Z)((0,r.JC)())?(0,r.T0)((0,l.Js)("sites")):a()("/sites")},h.prototype.goToReader=function(){a().redirect("/read")},h.prototype.goToMyLikes=function(){a()("/activities/likes")},h.prototype.goToStats=function(){const e=this.getSelectedSite();if(e&&e.capabilities&&!e.capabilities.view_stats)return null;e&&e.slug?a()((0,c.mS)(e.slug)):a()("/stats")},h.prototype.goToBlogPosts=function(){const e=this.getSelectedSite();if(e&&e.capabilities&&!e.capabilities.edit_posts)return null;e&&e.slug?a()("/posts/my/"+e.slug):a()("/posts/my")},h.prototype.goToPages=function(){const e=this.getSelectedSite();if(e&&e.capabilities&&!e.capabilities.edit_pages)return null;e&&e.slug?a()("/pages/"+e.slug):a()("/pages")},h.prototype.goToDevDocs=function(){a()("/devdocs")}},"./lib/keyboard-shortcuts/index.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var n=s("../node_modules/lodash-es/flatMap.js"),o=s("./lib/mixins/emitter/index.js"),a=s("./lib/keyboard-shortcuts/key-bindings.js");const i="undefined"==typeof window?void 0:s("../node_modules/keymaster/keymaster.js"),r=i?i.filter:void 0,c=(0,n.Z)(a.Z);function l(e){return r(e)&&!e.target.isContentEditable}function d(e){if(!(this instanceof d))return new d(e);this.lastKey=void 0,this.lastKeyTime=void 0,this.timeLimit=2e3,this.boundKeyHandler=this.handleKeyPress.bind(this),this.isNotificationsOpen=!1,"undefined"!=typeof window&&(i.filter=l,this.bindShortcuts(e))}d.prototype.bindShortcuts=function(e){e.forEach((e=>{this.bindShortcut(e.eventName,e.keys,e.type,e.checkKeys)})),window.addEventListener("keydown",this.boundKeyHandler,!1)},d.prototype.bindShortcut=function(e,t,s,n){let o,a=[];a="string"==typeof t[0]?[t]:t,a.forEach((t=>{"sequence"===s?i(t[1],((s,n)=>{if(!this.isNotificationsOpen)return this.lastKey===t[0]&&this.lastKeyTime>Date.now()-this.timeLimit?(this.emitEvent(e,s,n),this.lastKey=t[1],this.lastKeyTime=Date.now(),!1):void 0})):(t=t.join("+"),i(t,((t,s)=>{if(this.isNotificationsOpen&&"n"!==this._getKey(t)&&27!==t.keyCode)return;let a;n&&n.length>0?(a=this._getKey(t),o=n.filter((function(e){return e===a})),1===o.length&&this.emitEvent(e,t,s)):this.emitEvent(e,t,s)})))}))},d.prototype._getKey=function(e){let t;return e.key?e.key:(t=e.keyIdentifier,t=t.substring(2,t.length),String.fromCharCode(parseInt(t,16)))},d.prototype.emitEvent=function(){this.emit.apply(this,arguments)},d.prototype.handleKeyPress=function(e){i.filter(e)&&(this.lastKey=String.fromCharCode(e.keyCode).toLowerCase(),this.lastKeyTime=Date.now())},d.prototype.setNotificationsOpen=function(e){this.isNotificationsOpen=e},(0,o.Z)(d.prototype);const u=new d(c)},"./lib/keyboard-shortcuts/key-bindings.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const n=e=>t=>t(e),o={listNavigation:[{eventName:"move-selection-down",keys:["j"],description:{keys:["j"],text:n("Move selection down")}},{eventName:"move-selection-up",keys:["k"],description:{keys:["k"],text:n("Move selection up")}},{eventName:"open-selection",keys:[["enter"]],description:{keys:[["enter"]],text:n("Open selection")}},{eventName:"open-selection-new-tab",keys:[["v"]],description:{keys:[["v"]],text:n("Open selection in a new tab")}},{eventName:"go-to-top",keys:["."],description:{keys:["."],text:n("Go to top")}}],siteNavigation:[{eventName:"open-keyboard-shortcuts-menu",keys:[["shift","/"],["shift",","]],checkKeys:["?","¿","¼"],description:{keys:["?"],text:n("This menu")}},{eventName:"open-help",keys:["g","h"],type:"sequence",description:{keys:["g","h"],text:n("Open Help")}},{eventName:"go-to-reader",keys:["g","r"],type:"sequence",description:{keys:["g","r"],text:n("Go to Reader")}},{eventName:"go-to-my-likes",keys:["g","l"],type:"sequence",description:{keys:["g","l"],text:n("Go to My Likes")}},{eventName:"open-site-selector",keys:["g","w"],type:"sequence",description:{keys:["g","w"],text:n("Switch Site")}},{eventName:"go-to-stats",keys:["g","s"],type:"sequence",description:{keys:["g","s"],text:n("Go to Stats")}},{eventName:"go-to-blog-posts",keys:["g","b"],type:"sequence",description:{keys:["g","b"],text:n("Go to Blog Posts")}},{eventName:"go-to-pages",keys:["g","p"],type:"sequence",description:{keys:["g","p"],text:n("Go to Pages")}},{eventName:"open-notifications",keys:["n"],description:{keys:["n"],text:n("Open Notifications")}},{eventName:"exit-support-user",keys:["s","u"],type:"sequence"}],reader:[{eventName:"like-selection",keys:["l"],description:{keys:["l"],text:n("Like post")}},{eventName:"close-full-post",keys:["esc"],description:{keys:["esc"],text:n("Close full post")}}],blogPostsAndPages:[{eventName:"edit-selection",keys:["e"],description:{keys:["e"],text:n("Edit selection")}},{eventName:"open-stats-page",keys:["s"],description:{keys:["s"],text:n("Open stats page")}}],developer:[{eventName:"go-to-dev-docs",keys:["g","d"],type:"sequence",description:{keys:["g","d"],text:n("Go to DevDocs")}}]}},"./lib/logmein/index.ts":(e,t,s)=>{"use strict";s.d(t,{zJ:()=>c,cI:()=>l});var n=s("../packages/calypso-config/src/index.ts"),o=s("./state/current-user/selectors.js"),a=s("./state/selectors/get-sites-items.js");const i="https://__domain__.invalid";let r;function c(e,t=""){if(!(0,n._k)("logmein"))return e;if(!r)return e;if(!(0,o.Pc)(r.getState()))return e;const s=new URL(String(e),i);if(s.origin===i)return e;return Object.values((0,a.Z)(r.getState())).some((e=>new URL(e.URL,i).host===s.host&&function(e){return!e.is_vip&&!e.jetpack&&!e.options.is_automated_transfer&&!e.options.is_domain_only&&!e.options.is_redirect&&!e.options.is_wpcom_store&&e.options.is_mapped_domain}(e)))?(s.searchParams.set("logmein","direct"),t&&s.searchParams.set("redirect_to",t),s.toString()):e}function l(e){!function(e){r=e}(e),document.addEventListener("click",u,!1),document.addEventListener("auxclick",p,!1),document.addEventListener("contextmenu",m,!1)}const d={};function u(e){const t=e.target.closest("a");if(t&&t.href){const e=new URL(String(t.href),i).host;d[e]||(t.href=c(t.href),d[e]=!0)}}function m(e){const t=e.target.closest("a");t&&t.href&&(t.href=c(t.href))}function p(e){2!==e.button&&u(e)}},"./lib/mixins/emitter/index.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s("../node_modules/events/events.js");function o(e){Object.assign(e,n.EventEmitter.prototype),e.emitChange=function(){this.emit("change")},e.off=e.removeListener}},"./lib/navigate/index.ts":(e,t,s)=>{"use strict";s.d(t,{c:()=>i});var n=s("../node_modules/page/page.js"),o=s.n(n),a=s("./lib/logmein/index.ts");function i(e){!function(e){return new URL(e,window.location.href).origin===window.location.origin}(e)?window.location.href=(0,a.zJ)(e):o().show(e)}},"./lib/performance-tracking/index.web.ts":(e,t,s)=>{"use strict";s.d(t,{aO:()=>U,yD:()=>A,B_:()=>M,ZW:()=>$});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js");let o=!1;const a=()=>{"hidden"===document.visibilityState&&(o=!0)},i=e=>("hidden"===document.visibilityState?o=!0:document.addEventListener("visibilitychange",a),e),r=e=>(document.removeEventListener("visibilitychange",a),e.data.set("hidden",o),e),c=e=>(e.data.set("memory",(()=>{const e=window?.navigator;return e?.deviceMemory})()),e),l=e=>(e.data.set("version",window?.COMMIT_SHA),e.data.set("target",window?.BUILD_TARGET),e.data.set("env",window?.configData?.env_id),e),d=e=>(e.data.set("network",window.navigator?.connection?.effectiveType),e),u=()=>window?.performance?.timing?.navigationStart,m=()=>window?.performance?.timing?.domContentLoadedEventStart,p=e=>(e.beginning=u(),e.data.set("fullPage",!0),e),h=(e,t)=>0===e?0:e-t,g=e=>(e.data.set("navigationStart",h(u(),e.beginning)),e.data.set("unloadEventStart",h(window?.performance?.timing?.unloadEventStart,e.beginning)),e.data.set("unloadEventEnd",h(window?.performance?.timing?.unloadEventEnd,e.beginning)),e.data.set("redirectStart",h(window?.performance?.timing?.redirectStart,e.beginning)),e.data.set("redirectEnd",h(window?.performance?.timing?.redirectEnd,e.beginning)),e.data.set("fetchStart",h(window?.performance?.timing?.fetchStart,e.beginning)),e.data.set("domainLookupStart",h(window?.performance?.timing?.domainLookupStart,e.beginning)),e.data.set("domainLookupEnd",h(window?.performance?.timing?.domainLookupEnd,e.beginning)),e.data.set("connectStart",h(window?.performance?.timing?.connectStart,e.beginning)),e.data.set("connectEnd",h(window?.performance?.timing?.connectEnd,e.beginning)),e.data.set("secureConnectionStart",h(window?.performance?.timing?.secureConnectionStart,e.beginning)),e.data.set("requestStart",h(window?.performance?.timing?.requestStart,e.beginning)),e.data.set("responseStart",h(window?.performance?.timing?.responseStart,e.beginning)),e.data.set("responseEnd",h(window?.performance?.timing?.responseEnd,e.beginning)),e.data.set("domLoading",h(window?.performance?.timing?.domLoading,e.beginning)),e.data.set("domInteractive",h(window?.performance?.timing?.domInteractive,e.beginning)),e.data.set("domContentLoadedEventStart",h(m(),e.beginning)),e.data.set("domContentLoadedEventEnd",h(window?.performance?.timing?.domContentLoadedEventEnd,e.beginning)),e.data.set("domComplete",h(window?.performance?.timing?.domComplete,e.beginning)),e.data.set("loadEventStart",h(window?.performance?.timing?.loadEventStart,e.beginning)),e.data.set("loadEventEnd",h(window?.performance?.timing?.loadEventEnd,e.beginning)),e),y=e=>{const t=m()-u();if(t<=0)return e;const s=(window?.performance?.getEntriesByType("resource")||[]).filter((e=>"script"===e.initiatorType&&e.responseEnd<=t&&e.decodedBodySize>0)),n=s.length,{start:o,end:a}=s.reduce((({start:e,end:t},s)=>({start:Math.min(e,s.requestStart),end:Math.max(t,s.responseEnd)})),{start:1/0,end:-1/0}),{resourcesCompressed:i,resourcesUncompressed:r,resourcesTransferred:c}=s.reduce(((e,t)=>({resourcesCompressed:e.resourcesCompressed+t.encodedBodySize,resourcesUncompressed:e.resourcesUncompressed+t.decodedBodySize,resourcesTransferred:e.resourcesTransferred+t.transferSize})),{resourcesCompressed:0,resourcesUncompressed:0,resourcesTransferred:0}),l=100-Math.round(100*Math.min(1,c/i));return e.data.set("resourcesCount",n),e.data.set("resourcesStart",Math.round(o)),e.data.set("resourcesEnd",Math.round(a)),e.data.set("resourcesCompressed",i),e.data.set("resourcesUncompressed",r),e.data.set("resourcesTransferred",c),e.data.set("resourcesCacheRatio",l),e},_=e=>(e.beginning=Date.now(),e.data.set("fullPage",!1),e);class f{static async fromNow(e,t=[]){const s=new f(e,!1);return await s.start(t),s}static async fromPageStart(e,t=[]){const s=new f(e,!0);return await s.start(t),s}constructor(e,t){(0,n.Z)(this,"id",void 0),(0,n.Z)(this,"beginning",void 0),(0,n.Z)(this,"end",void 0),(0,n.Z)(this,"data",new Map),(0,n.Z)(this,"startCollectors",void 0),(0,n.Z)(this,"stopCollectors",void 0),this.id=e;const s=[i],o=[c,l,r,d];t?(this.startCollectors=[p,...s],this.stopCollectors=[g,y,...o]):(this.startCollectors=[_,...s],this.stopCollectors=[...o])}async runCollectors(e){return Promise.all(e.map(((e,t)=>{try{return e(this)}catch(e){return console.warn(`Collector #${t} for report ${this.id} failed to run`,e),null}})))}async start(e=[]){return await this.runCollectors([...this.startCollectors,...e]),this}async stop(e=[]){this.end=Date.now(),await this.runCollectors([...this.stopCollectors,...e]);const t=Array.from(this.data.entries()).reduce(((e,[t,s])=>({...e,[t]:s})),{});return{id:this.id,duration:this.end-this.beginning,...t}}}var j=s("../packages/wpcom-proxy-request/src/index.js");const b=new Map,E=async(e,{collectors:t=[]}={})=>{const s=b.get(e);if(!s)return!1;b.delete(e);const n=await s;return(async e=>(0,j.ZP)({method:"POST",apiVersion:"1.1",path:"/logstash",body:{params:JSON.stringify({feature:"calypso_client",message:"perf.nav",properties:e})}}))(await n.stop(t))};var w=s("../packages/calypso-config/src/index.ts"),S=s("./state/current-user/selectors.js"),v=s("./state/selectors/is-site-wpcom-atomic.js"),k=s("./state/sites/selectors/is-jetpack-site.js"),R=s("./state/sites/selectors/is-single-user-site.js"),I=s("./state/ui/selectors/get-selected-site-id.js");const x=e=>{const t=(0,I.Z)(e),s=(0,k.Z)(e,t),n=(0,R.Z)(e,t),o=(0,v.Z)(e,t),a=(0,S.bo)(e),i=(0,S.f0)(e),r=(0,S.Yv)(e),c=(0,S.DV)(e),l=(0,S.Mg)(e),{count:d,total:u}=(()=>{const e=window.performance?.getEntriesByName?.("add_translations")||[];return{count:e.length,total:Math.round(e.reduce(((e,t)=>e+t.duration),0))}})();return window.performance?.clearMeasures?.("add_translations"),e=>{e.data.set("siteId",t),e.data.set("siteIsJetpack",s),e.data.set("siteIsSingleUser",n),e.data.set("siteIsAtomic",o),e.data.set("sitesCount",a),e.data.set("sitesVisibleCount",i),e.data.set("userCountryCode",r),e.data.set("userBootstrapped",c),e.data.set("userLocale",l),e.data.set("translationsChunksDuration",u),e.data.set("translationsChunksCount",d)}},N=(e={})=>t=>{Object.entries(e).forEach((([e,s])=>t.data.set(e,s)))},P=()=>w.ZP.isEnabled("rum-tracking/logstash"),T=(e,{fullPageLoad:t=!1}={})=>{P()&&(async(e,{fullPageLoad:t=!0,collectors:s=[]}={})=>{if(b.has(e))return;const n=t?f.fromPageStart(e,s):f.fromNow(e,s);b.set(e,n)})(e,{fullPageLoad:t})},Z=(e,{state:t={},metadata:s={}}={})=>{P()&&E(e,{collectors:[x(t),N(s)]})},A=e=>(t,s)=>{T(e,{fullPageLoad:t.init??!1}),s()};var O=s("../node_modules/react/index.js"),L=s("../node_modules/react-redux/es/index.js"),C=s("./state/ui/selectors/get-section-name.js");var D=s("../node_modules/@wordpress/compose/build-module/utils/create-higher-order-component/index.js");const U=()=>(function(){const e=(0,L.v9)(C.Z),t=(0,L.oR)();(0,O.useLayoutEffect)((()=>{requestAnimationFrame((()=>{Z(e,{state:t.getState()})}))}),[e,t])}(),null),M=(0,D.Z)((e=>function(t){return O.createElement(O.Fragment,null,O.createElement(e,t),O.createElement(U,null))}),"WithPerformanceTrackerStop"),$=(0,L.$j)(null,{stopPerformanceTracking:(e={})=>(t,s)=>{const n=s(),o=(0,C.Z)(n);Z(o,{state:n,metadata:e})}})},"./lib/plugins/constants.js":(e,t,s)=>{"use strict";s.d(t,{rH:()=>n,Qt:()=>o,zD:()=>a,FV:()=>i,nr:()=>r,Gm:()=>c,Wf:()=>l,Zx:()=>d,XZ:()=>u});const n="INSTALL_PLUGIN",o="REMOVE_PLUGIN",a="UPDATE_PLUGIN",i="ACTIVATE_PLUGIN",r="DEACTIVATE_PLUGIN",c="ENABLE_AUTOUPDATE_PLUGIN",l="DISABLE_AUTOUPDATE_PLUGIN",d="PLUGIN_UPLOAD",u="RECEIVE_PLUGINS"},"./lib/protect-form/index.tsx":(e,t,s)=>{"use strict";s.d(t,{cG:()=>g,TW:()=>y,K8:()=>_,bw:()=>f});var n=s("../node_modules/@babel/runtime/helpers/esm/extends.js"),o=s("../node_modules/@wordpress/compose/build-module/utils/create-higher-order-component/index.js"),a=s("../node_modules/debug/src/browser.js"),i=s.n(a),r=s("../packages/i18n-calypso/src/index.js"),c=s("../node_modules/page/page.js"),l=s.n(c),d=s("../node_modules/react/index.js");const u=i()("calypso:protect-form");let m=new Set,p=0;function h(e){if(!m.size)return;u("unsaved form changes detected");const t=r.ZP.translate("You have unsaved changes.");return(e||window.event).returnValue=t,t}const g=()=>{const e=d.useRef([]),t=d.useCallback((()=>function(e){m.delete(e)}(e.current)),[]),s=d.useCallback((()=>function(e){m.add(e)}(e.current)),[]);return d.useEffect((()=>(0===p&&"undefined"!=typeof window&&window.addEventListener("beforeunload",h),p++,()=>{p--,0===p&&"undefined"!=typeof window&&window.removeEventListener("beforeunload",h),t()})),[t]),{markChanged:s,markSaved:t}},y=(0,o.Z)((e=>t=>{const{markChanged:s,markSaved:o}=g();return d.createElement(e,(0,n.default)({},t,{markChanged:s,markSaved:o}))}),"protectForm"),_=({isChanged:e})=>{const{markChanged:t,markSaved:s}=g();return d.useEffect((()=>{if(e)return t(),()=>s()}),[e,t,s]),null};const f=(e,t)=>{if(!m.size)return t();if(u("unsaved form changes detected"),function(){if("undefined"==typeof window)return!0;const e=r.ZP.translate("You have unsaved changes. Are you sure you want to leave this page?");return window.confirm(e)}())m=new Set,t();else{const t=e.canonicalPath;setTimeout((function(){l().replace(t,null,!1,!1)}),0)}}},"./lib/redux-bridge/index.js":(e,t,s)=>{"use strict";s.d(t,{eG:()=>a,JC:()=>i,T0:()=>r});let n,o=null;new Promise((e=>{n=e}));function a(e){o=e,n(e)}function i(){if(o)return o.getState()}function r(...e){if(o)return o.dispatch(...e)}},"./lib/route/legacy-routes.ts":(e,t,s)=>{"use strict";s.d(t,{K:()=>a});var n=s("../packages/calypso-config/src/index.ts");const o=[{match:/.php$/},{match:/^\/?$/,predicate:()=>!(0,n._k)("reader")},{match:/^\/manage/},{match:/^\/plans/},{match:/^\/me/,noMatch:/^\/me\/(billing|next)/,predicate:()=>!1}];function a(e){return o.some((({match:t,noMatch:s={test:()=>!1},predicate:n=(()=>!0)})=>n(e)&&t.test(e)&&!s.test(e)))}},"./lib/route/path.ts":(e,t,s)=>{"use strict";s.d(t,{lQ:()=>i,n3:()=>r,mS:()=>c,Zg:()=>l,cu:()=>d,XB:()=>u});var n=s("./lib/route/trailingslashit.ts"),o=s("./lib/route/untrailingslashit.ts");const a={day:"/stats/day/",week:"/stats/week/",month:"/stats/month/",year:"/stats/year/",insights:"/stats/insights/",googleMyBusiness:"/google-my-business/stats/"};function i(e){const t=e.split("?")[0],s=t.split("/");if(0===t.indexOf("/checkout/thank-you/no-site/"))return!1;if(0===t.indexOf("/me/purchases/")||0===t.indexOf("/checkout/thank-you/")){const e=s[3];if(e&&-1!==e.indexOf("."))return e;const t=parseInt(e,10);if(Number.isSafeInteger(t))return t}for(let e=2;e>0;e--){const t=s[s.length-e];if(t&&-1!==t.indexOf("."))return t}for(let e=2;e>0;e--){const t=s[s.length-e],n=/^\d+$/.test(t),o=parseInt(t,10);if(n&&Number.isSafeInteger(o))return o}return!1}function r(e,t){let s=e.split("?")[0],a=t;return a||(a=i(s)),a&&(s=(0,n.Z)(s).replace("/"+a+"/","/")),(0,o.Z)(s)}function c(e){const t="/stats/day/";return e?t+String(e):(0,o.Z)(t)}function l(e,t){if(!e)return c(t);if("insights"===e&&!t)return c();const s=a[e];return s?t?(0,o.Z)(s+t):(0,o.Z)(s):c(t)}function d(e,t){let s=r(e,t).replace(/^\/+/,"");return s=s.replace(/^(stats)\/\w+/,"$1"),s.replace(/\//g,"-")}function u(e){switch(e){case"drafts":return"draft,pending";case"scheduled":return"future";case"trashed":return"trash";default:return"publish,private"}}},"./lib/route/trailingslashit.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n=e=>e.replace(/(\/)?$/,"/")},"./lib/route/untrailingslashit.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n=e=>"/"===e?e:e.replace(/\/$/,"")},"./lib/touch-detect/index.js":(e,t,s)=>{"use strict";function n(){return window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}s.d(t,{_:()=>n})},"./lib/url/is-external.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s("../packages/calypso-config/src/index.ts"),o=s("./lib/route/legacy-routes.ts");const a="base.invalid";function i(e){if(!e&&""!==e)return!0;let t;e.startsWith("http://")||e.startsWith("https://")||e.startsWith("/")||e.startsWith("?")||e.startsWith("#")||(e="//"+e);try{t=new URL(e,"http://base.invalid")}catch{return!1}const{hostname:s,pathname:i}=t;return s!==a&&("undefined"!=typeof window&&s===window.location.hostname?!(!i||!(0,o.K)(i.replace("//","/"))):s!==(0,n.ZP)("hostname"))}},"./lib/url/is-outside-calypso.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var n=s("../packages/calypso-url/src/url-parts.ts"),o=s("./lib/url/is-external.ts");function a(e){if((0,o.Z)(e))return!0;const{pathname:t}=(0,n.A)(e);return!!(/^\/support($|\/)/i.test(t)||/^\/([a-z]{2}|[a-z]{2}-[a-z]{2})\/support($|\/)/i.test(t)||/^\/forums($|\/)/i.test(t)||/^\/([a-z]{2}|[a-z]{2}-[a-z]{2})\/forums($|\/)/i.test(t))}},"./lib/url/support.js":(e,t,s)=>{"use strict";s.d(t,{lz:()=>o,Jn:()=>a,BT:()=>i,SZ:()=>r,_j:()=>c,p5:()=>l,rH:()=>d,yY:()=>u,_v:()=>m,BW:()=>p,nG:()=>h,w7:()=>g,FH:()=>y,w0:()=>_,y2:()=>f,oY:()=>j,sN:()=>b,f6:()=>E,JY:()=>w,Lf:()=>S,a7:()=>v,sO:()=>k,fu:()=>R,g:()=>I,iV:()=>x,mh:()=>N,IU:()=>P,nS:()=>T,n5:()=>Z,kq:()=>A,Tx:()=>O,Ng:()=>L,DT:()=>C,Fr:()=>D,ml:()=>U,ut:()=>M,dV:()=>$,k_:()=>z,Nz:()=>q,BA:()=>F,A1:()=>B,AF:()=>G,mm:()=>V,$d:()=>W,un:()=>H,M9:()=>K,xg:()=>J,dL:()=>Q,$:()=>Y,tL:()=>X,fQ:()=>ee,Nm:()=>te,dR:()=>se,Oy:()=>ne,MG:()=>oe,kY:()=>ae});const n=(0,s("./lib/i18n-utils/browser.js").aq)("https://wordpress.com/support/").replace(/\/$/,""),o=`${n}/add-email/adding-google-workspace-to-your-site/`,a=`${n}/manage-purchases/#automatic-renewal`,i=`${n}/domains/custom-dns/#changing-name-servers-to-point-to-wordpress-com`,r=`${n}/domains/change-name-servers/#finding-out-your-new-name-server`,c=`${n}/concierge-support`,l=`${n}/contact`,d="/help/contact",u=`${n}/domains/custom-dns`,m=`${n}/update-contact-information/#designated-agent`,p=`${n}/domain-registration-agreements/`,h=`${n}/domains/register-domain/#waiting-for-domain-changes`,g=`${n}/domains`,y=`${n}/domains/#cancel-a-domain-name`,_=`${n}/domains/domain-expiration/`,f=`${n}/domains/domain-expiration/#renewing-a-domain-in-the-redemption-period`,j=`${n}/domains/register-domain/#waiting-for-domain-changes`,b=`${n}/domains/domain-pricing-and-available-tlds`,E=`${n}/ecommerce`,w=`${n}/move-domain/incoming-domain-transfer/#checking-your-transfer-status-and-failed-transfers`,S=`${n}/incoming-domain-transfer/status-and-failed-transfers/#pending`,v=`${n}/incoming-domain-transfer/`,k=`${n}/incoming-domain-transfer/prepare-domain-for-transfer/#unlock`,R=`${n}/incoming-domain-transfer/prepare-domain-for-transfer/#auth-code`,I=`${n}/incoming-domain-transfer/#auth-code-invalid`,x=`${n}/payment/#edit-payment-details`,N=`${n}/email-forwarding`,P=`${n}/domains/register-domain/#email-validation-and-verification`,T=`${n}/empty-site/`,Z=`${n}/forms`,A="https://workspace.google.com/learning-center/",O=`${n}/guided-transfer`,L=`${n}/https-ssl`,C="https://jetpack.com/support/",D="https://jetpack.com/contact-support/?rel=support",U="https://jetpack.com/pricing/",M="https://help.vaultpress.com/install-vaultpress/",$="https://akismet.com/support/",z=`${n}/manage-purchases/#automatic-renewal`,q=`${n}/manage-purchases/#cancel-a-purchase`,F=`${n}/domains/map-existing-domain`,B=`${n}/domains/map-existing-domain#2-ask-your-domain-provider-to-update-your-dns-settings`,G=`${n}/domains/map-existing-domain/#mapping-with-our-a-records`,V=`${n}/domains/map-subdomain`,W=`${n}/domains/map-subdomain/#adding-cname-records-with-your-registrar`,H=`${n}/domains/map-existing-domain/#change-your-domains-name-servers`,K=`${n}/domains/register-domain/#public-versus-private-registration-and-gdpr`,J=`${n}/manage-purchases/#refund-policy`,Q=`${n}/domains/register-domain/`,Y=`${n}/domains/#set-a-primary-address`,X=`${n}/setting-up-premium-services`,ee=`${n}/site-redirect`,te=`${n}/`,se=`${n}/transfer-domain-registration`,ne=`${n}/update-contact-information/#email-or-name-changes`,oe=`${n}/domains/domain-management/#update-nameservers`,ae=`${n}/wpcc-faq`},"./lib/user/verification-checker.js":(e,t,s)=>{"use strict";s.d(t,{X:()=>u,Z:()=>m});var n=s("../node_modules/debug/src/browser.js"),o=s.n(n),a=s("../node_modules/react/index.js"),i=s("../node_modules/react-redux/es/index.js"),r=s("./state/current-user/actions.js"),c=s("./state/current-user/selectors.js");const l=o()("calypso:user"),d="__email_verified_signal__";function u(){window.localStorage&&(window.localStorage.setItem(d,1),l("Verification: SENT SIGNAL"))}function m(){const e=(0,i.v9)(c.ts),t=(0,i.I0)();return(0,a.useEffect)((()=>{if(!e)return;if(e.email_verified)return;const s=e=>{e.key===d&&e.newValue&&(l("Verification: RECEIVED SIGNAL"),window.localStorage.removeItem(d),t((0,r.k)()))};return window.addEventListener("storage",s),()=>{window.removeEventListener("storage",s)}}),[e,t]),null}},"./my-sites/domains/paths.js":(e,t,s)=>{"use strict";s.d(t,{EI:()=>c,fY:()=>l,dC:()=>d,$5:()=>u,eZ:()=>m,Hf:()=>p,OL:()=>h,q6:()=>g,En:()=>y,tT:()=>_,Ym:()=>f,JF:()=>j,uR:()=>b,Ek:()=>E,NP:()=>w,Y9:()=>S,tZ:()=>v,wI:()=>k,DP:()=>R,Jk:()=>I,B3:()=>x,bW:()=>N,G$:()=>P,ef:()=>T,Iv:()=>Z,BO:()=>A,bV:()=>O,oH:()=>L,sx:()=>C,dw:()=>D,Mk:()=>U});var n=s("../node_modules/lodash-es/filter.js"),o=s("../node_modules/qs/lib/index.js"),a=s("./my-sites/email/paths.js");function i(e,t,s,n=null){return s=s||"edit",t.startsWith(":")||(t=encodeURIComponent(encodeURIComponent(t))),function(e=null){if(e){if("/domains/manage"===e)return"/domains/manage/all";if(c(e)||(0,a.i2)(e))return"/domains/manage/all"}return"/domains/manage"}(n)+"/"+t+"/"+s+"/"+e}function r(e,t,s="",o=null){return i(e,t,(0,n.Z)(["transfer",s]).join("/"),o)}function c(e){return e?.startsWith("/domains/manage/all/")||"/domains/manage"===e}function l(e,t){const s=`/domains/add/${e}`;return t?`${s}?suggestion=${t}`:s}function d(e,t){return`/domains/add/${t}/email/${e}`}function u(){return"/domains/manage/all"}function m(){return"/domains/manage"}function p(e,t=null){return c(t)||(0,a.i2)(t)?"/domains/manage":"/domains/manage/"+e}function h(e,t,s){return i(e,t,"edit",s)}function g(e,t,s=null){return i(e,t,"contacts-privacy",s)}function y(e,t,s=null){return i(e,t,"edit-contact-info",s)}function _(){return"/domains/manage/all/edit-contact-info"}function f(e,t,s=null){return i(e,t,"manage-consent",s)}function j(e,t){let s;return s=t?i(e,t,"email"):e?"/domains/manage/email/"+e:"/domains/manage/email",s}function b(e,t){return i(e,t,"email-forwarding")}function E(e,t,s=null){return i(e,t,"change-site-address",s)}function w(e,t,s=null){return i(e,t,"name-servers",s)}function S(e,t,s=null){return i(e,t,"dns",s)}function v(e,t,s=null){return i(e,t,"redirect-settings",s)}function k(e,t,s=null){return i(e,t,"security",s)}function R(e,t,s=null){return i(e,t,"redirect",s)}function I(e,t,s=null){return r(e,t,"",s)}function x(e,t,s=null){return r(e,t,"in",s)}function N(e,t,s=null){return r(e,t,"precheck",s)}function P(e,t,s=null){return r(e,t,"out",s)}function T(e,t,s=null){return r(e,t,"other-user",s)}function Z(e,t,s=null){return r(e,t,"other-site",s)}function A(e,t=""){let s=`/domains/add/mapping/${e}`;return t&&(s+=`?initialQuery=${t}`),s}function O(e,t,s="",n=!1){let a=`/domains/mapping/${e}/setup/${t}`;const i={};s&&(i.step=s),n&&(i["show-errors"]=!0);const r=(0,o.stringify)(i);return r&&(a+="?"+r),a}function L(e,t,s){let n=`/domains/add/transfer/${e}`;const a={};t&&(a.initialQuery=t),s&&(a.useStandardBack=!0);const i=(0,o.stringify)(a);return i&&(n+="?"+i),n}function C(e,t){let s=`/domains/add/use-your-domain/${e}`;return t&&(s+=`?initialQuery=${t}`),s}function D(e,t){let s=`/domains/add/use-my-domain/${e}`;return t&&(s+=`?initialQuery=${t}`),s}function U(e,t,s=null){return i(e,t,"domain-connect-mapping",s)}},"./my-sites/email/paths.js":(e,t,s)=>{"use strict";s.d(t,{NZ:()=>a,m3:()=>i,x9:()=>r,Vp:()=>c,Y:()=>l,gV:()=>d,Zh:()=>u,GZ:()=>m,Fb:()=>p,s_:()=>h,y0:()=>g,uS:()=>y,yV:()=>_,i2:()=>f});var n=s("../node_modules/qs/lib/index.js"),o=s("./my-sites/domains/paths.js");const a="/email/all";function i(e,t,s,n=null){return t?y(e,t,s+"/add-users",n):"/email/"+s+"/add-users/"+e}function r(e,t,s=null,n={}){return y(e,t,"titan/manage",s,n)}function c(e,t,s=null,n={}){return y(e,t,"titan/manage-mailboxes",s,n)}function l(e,t,s=null){return y(e,t,"titan/new",s)}function d(e,t,s=null){return y(e,t,"titan/set-up-mailbox",s)}function u(e,t,s=null,n=null){return y(e,t,"titan/set-up-mailbox/thank-you",n,s?{email:s}:{})}function m(e,t,s=null,n={}){return y(e,t,"titan/control-panel",s,n)}function p(e,t,s=null){let n;return n=t?y(e,t,"manage",s):e?"/email/"+e:"/email",n}function h(e,t,s=null){return y(e,t,"forwarding",s)}function g(e,t,s=null){return y(e,t,"purchase",s)}function y(e,t,s,i=null,r={}){s=s||"manage",t&&!String(t).startsWith(":")&&(t=encodeURIComponent(encodeURIComponent(t)));const c=r?(0,n.stringify)(r,{addQueryPrefix:!0}):"";return function(e){return e===a||e===(0,o.eZ)()||f(e)||(0,o.EI)(e)?a:"/email"}(i)+"/"+t+"/"+s+"/"+e+c}function _(e=null){return e?`/inbox/${e}`:"/inbox"}function f(e){return e?.startsWith(a+"/")}},"./reader/post-key.js":(e,t,s)=>{"use strict";function n(e){if(e)return e.feed_ID&&e.feed_item_ID?{feedId:e.feed_ID,postId:e.feed_item_ID}:e.is_external?{feedId:e.feed_ID||e.site_ID,postId:e.feed_item_ID||e.ID}:{blogId:e.site_ID,postId:e.ID}}function o(e,t){return e===t||!(!e&&t||e&&!t||!e&&!t&&e!==t)&&(!(e.isGap&&!t.isGap||!e.isGap&&t.isGap)&&(e.isGap&&t.isGap?e.from===t.from&&e.to===t.to:e.postId===t.postId&&(e.feedId?e.feedId===t.feedId:e.blogId===t.blogId)))}function a(e){if(!e||e.isGap)return null;if(e.isCombination){const t=e.feedId?`&feedId=${e.feedId}`:"",s=e.blogId?`&feedId=${e.blogId}`:"";return`postIds=[${e.postIds.join(",")}, ]${t}${s} `}return e.isRecommendationBlock?`rec-${e.index}`:e.feedId?`${e.postId}-${e.feedId}`:e.blogId?`${e.postId}-${e.blogId}`:null}function i(e){return e&&e.postId&&(e.blogId||e.feedId)}s.d(t,{WO:()=>n,NK:()=>o,C$:()=>a,J0:()=>i})},"./sections-helper.js":(e,t,s)=>{"use strict";s.d(t,{oq:()=>a,OY:()=>i,MA:()=>r,zD:()=>c});var n=s("../node_modules/lodash-es/find.js");let o=null;function a(e){o=e}function i(){if(!o)throw new Error("sections-helper has not been initialized yet");return o}function r(e){const t=(0,n.Z)(o,{name:e});t&&t.load()}function c(e,t){const s=(0,n.Z)(o,{name:e,module:t});return s?Promise.resolve(s.load()):Promise.reject(`Attempting to load non-existent section: ${e} (module=${t})`)}},"./state/application/init.js":(e,t,s)=>{"use strict";var n=s("./state/redux-store.ts"),o=s("../packages/state-utils/src/index.ts"),a=s("./state/action-types.ts"),i=s("./state/utils/reducer-utils.ts");const r=(0,o.xi)("application",(0,i.U)({connectionState:(e="CHECKING",t)=>{switch(t.type){case a.ukS:return"OFFLINE";case a.GmV:return"ONLINE"}return e}}));(0,n.x)(["application"],r)},"./state/audio/middleware.js":(e,t,s)=>{"use strict";s.d(t,{ZP:()=>i});var n=s("./state/action-types.ts");const o=()=>"object"==typeof window&&"function"==typeof window.Audio,a=Object.create(null);a[n.$Tb]=(e,{message:t})=>{t&&"customer"===t.source||(e=>{if(!o())return;new window.Audio(e).play()})("/calypso/audio/chat-pling.wav")};const i=({dispatch:e})=>t=>o()?s=>{const n=a[s.type];return"function"==typeof n&&n(e,s),t(s)}:t},"./state/automated-transfer/actions.js":(e,t,s)=>{"use strict";s.d(t,{yX:()=>I,LH:()=>k,mj:()=>v,If:()=>x,WJ:()=>R,rv:()=>N});var n=s("./state/action-types.ts"),o=s("../node_modules/lodash-es/get.js"),a=s("../node_modules/lodash-es/isEmpty.js"),i=s("../node_modules/lodash-es/map.js"),r=s("./state/analytics/actions/record.js"),c=s("./state/analytics/actions/with-analytics.js"),l=s("./state/automated-transfer/constants.ts"),d=s("./state/data-layer/handler-registry.js"),u=s("./state/data-layer/wpcom-http/actions.js"),m=s("./state/data-layer/wpcom-http/utils.js"),p=s("./state/selectors/is-unlaunched-site.js");const h={blocked_atomic_transfer:l.t.BLOCKED_ATOMIC_TRANSFER,transfer_already_exists:l.t.TRANSFER_ALREADY_EXISTS,no_business_plan:l.t.NO_BUSINESS_PLAN,no_jetpack_sites:l.t.NO_JETPACK_SITES,no_vip_sites:l.t.NO_VIP_SITES,site_private:l.t.SITE_PRIVATE,site_graylisted:l.t.SITE_GRAYLISTED,non_admin_user:l.t.NON_ADMIN_USER,not_resolving_to_wpcom:l.t.NOT_RESOLVING_TO_WPCOM,no_ssl_certificate:l.t.NO_SSL_CERTIFICATE,email_unverified:l.t.EMAIL_UNVERIFIED,excessive_disk_space:l.t.EXCESSIVE_DISK_SPACE},g=({errors:e=[]},t={})=>e.map((({code:e})=>t.sitePrivateUnlaunched&&"site_private"===e?l.t.SITE_UNLAUNCHED:(0,o.Z)(h,e,""))).filter(Boolean),y=({warnings:e={}})=>Object.keys(e).reduce(((t,s)=>t.concat(e[s])),[]).map((({description:e,name:t,support_url:s})=>({name:t,description:e,supportUrl:s})));(0,d.Z9)("state/data-layer/wpcom/sites/automated-transfer/eligibility/index.js",{[n.vzh]:[(0,m.BN)({fetch:e=>(0,u.d)({method:"GET",path:`/sites/${e.siteId}/automated-transfers/eligibility`,apiVersion:"1"},e),onSuccess:({siteId:e},t)=>(s,n)=>{const l=(0,p.Z)(n(),e);s((0,c.w)((e=>{const t=(0,o.Z)(e,"is_eligible",!1),s=(0,o.Z)(e,"warnings.plugins",[]),n=(0,o.Z)(e,"warnings.widgets",[]),c={has_warnings:!((0,a.Z)(s)&&(0,a.Z)(n)),plugins:(0,i.Z)(s,"id").join(","),widgets:(0,i.Z)(n,"id").join(",")};return t?(0,r.jN)("calypso_automated_transfer_eligibility_eligible",c):(c.holds=g(e).join(","),(0,r.jN)("calypso_automated_transfer_eligibility_ineligible",c))})(t),N(e,((e,t={})=>({lastUpdate:Date.now(),eligibilityHolds:g(e,t),eligibilityWarnings:y(e)}))(t,{sitePrivateUnlaunched:l}))))},onError:()=>{}})]});var _=s("../packages/i18n-calypso/src/index.js"),f=s("./state/notices/actions.ts"),j=s("./state/plugins/upload/actions.js");const b=e=>"invalid_input"===e.error?(0,f.tF)((0,_.Iu)("The uploaded file is not a valid zip.")):"api_success_false"===e.error?(0,f.tF)((0,_.Iu)("The uploaded file is not a valid plugin.")):e.error?(0,f.tF)((0,_.Iu)("Upload problem: %(error)s.",{args:{error:e.error}})):(0,f.tF)((0,_.Iu)("Problem uploading the plugin.")),E=({siteId:e},t)=>[(0,r.jN)("calypso_automated_transfer_inititate_failure",{context:"plugin_upload",error:t.error}),b(t),(0,j.y9)(e,t)];(0,d.Z9)("state/data-layer/wpcom/sites/automated-transfer/initiate/index.js",{[n._az]:[(0,m.BN)({fetch:e=>{const{siteId:t,pluginZip:s}=e;return[(0,r.jN)("calypso_automated_transfer_inititate_transfer",{context:"plugin_upload"}),(0,u.d)({method:"POST",path:`/sites/${t}/automated-transfers/initiate`,apiVersion:"1",formData:[["plugin_zip",s]]},e)]},onSuccess:(e,{success:t})=>!1===t?E(e,{error:"api_success_false"}):[(0,r.jN)("calypso_automated_transfer_inititate_success",{context:"plugin_upload"}),k(e.siteId)],onError:E,onProgress:({siteId:e},{loaded:t,total:s})=>{const n=s?t/s*100:0;return(0,j.oZ)(e,n)}})]});var w=s("../node_modules/lodash-es/delay.js"),S=s("./state/sites/actions.js");(0,d.Z9)("state/data-layer/wpcom/sites/automated-transfer/status/index.js",{[n.k2T]:[(0,m.BN)({fetch:e=>(0,u.d)({method:"GET",path:`/sites/${e.siteId}/automated-transfers/status`,apiVersion:"1"},e),onSuccess:({siteId:e},{status:t,uploaded_plugin_slug:s,transfer_id:n})=>o=>{o(R(e,t,s)),t!==l.p.ERROR&&t!==l.p.COMPLETE&&(0,w.Z)(o,3e3,k(e)),t===l.p.COMPLETE&&(o((0,r.jN)("calypso_automated_transfer_complete",{context:"plugin_upload",transfer_id:n,uploaded_plugin_slug:s})),o((0,S.LV)(e)))},onError:e=>I({siteId:e.siteId,error:e.meta?.dataLayer?.error?.message})})]});s("./state/automated-transfer/init.js");const v=(e,t)=>({type:n._az,siteId:e,pluginZip:t}),k=e=>({type:n.k2T,siteId:e}),R=(e,t,s)=>({type:n.c13,siteId:e,status:t,uploadedPluginId:s}),I=({siteId:e,error:t})=>({type:n.Sdq,siteId:e,error:t}),x=e=>({type:n.vzh,siteId:e}),N=(e,{eligibilityHolds:t,eligibilityWarnings:s,lastUpdate:o,status:a})=>({type:n.zGH,eligibilityHolds:t,eligibilityWarnings:s,lastUpdate:o,siteId:e,status:a})},"./state/automated-transfer/constants.ts":(e,t,s)=>{"use strict";s.d(t,{p:()=>n,t:()=>o});const n={NONE:"none",PENDING:"pending",INQUIRING:"inquiring",PROVISIONED:"provisioned",FAILURE:"failure",START:"start",SETUP:"setup",CONFLICTS:"conflicts",ACTIVE:"active",UPLOADING:"uploading",BACKFILLING:"backfilling",COMPLETE:"complete",REVERTED:"reverted",ERROR:"error",REQUEST_FAILURE:"request_failure"},o={BLOCKED_ATOMIC_TRANSFER:"BLOCKED_ATOMIC_TRANSFER",TRANSFER_ALREADY_EXISTS:"TRANSFER_ALREADY_EXISTS",NO_BUSINESS_PLAN:"NO_BUSINESS_PLAN",NO_JETPACK_SITES:"NO_JETPACK_SITES",NO_VIP_SITES:"NO_VIP_SITES",SITE_PRIVATE:"SITE_PRIVATE",SITE_UNLAUNCHED:"SITE_UNLAUNCHED",SITE_GRAYLISTED:"SITE_GRAYLISTED",NON_ADMIN_USER:"NON_ADMIN_USER",NOT_RESOLVING_TO_WPCOM:"NOT_RESOLVING_TO_WPCOM",NO_SSL_CERTIFICATE:"NO_SSL_CERTIFICATE",EMAIL_UNVERIFIED:"EMAIL_UNVERIFIED",EXCESSIVE_DISK_SPACE:"EXCESSIVE_DISK_SPACE"}},"./state/automated-transfer/init.js":(e,t,s)=>{"use strict";var n=s("./state/redux-store.ts"),o=s("../packages/state-utils/src/index.ts"),a=s("./state/action-types.ts"),i=s("./state/themes/action-types.js"),r=s("./state/utils/with-persistence.ts"),c=s("./state/utils/reducer-utils.ts"),l=s("./state/utils/schema-utils.js"),d=s("./state/utils/keyed-reducer.ts"),u=s("./state/automated-transfer/constants.ts"),m=s("../node_modules/lodash-es/sortBy.js"),p=s("../node_modules/lodash-es/property.js");const h={eligibilityHolds:[],eligibilityWarnings:[],lastUpdate:0},g=(0,r.$)(((e=h,t)=>t.type===a.zGH?{eligibilityHolds:(0,m.Z)(t.eligibilityHolds),eligibilityWarnings:(0,m.Z)(t.eligibilityWarnings,(0,p.Z)("name")),lastUpdate:t.lastUpdate}:e)),y={type:"object",patternProperties:{"^\\d+$":{type:"object",properties:{eligibility:{type:"object",properties:{lastUpdate:{type:"number",minimum:0},eligibilityHolds:{type:"array",items:{type:"string"}},eligibilityWarnings:{type:"array",items:{type:"object",properties:{name:{type:"string"},description:{type:"string"},supportUrl:{type:"string"}}}}}},status:{type:["string","null"]}}}}},_=(0,r.$)(((e=null,t)=>{switch(t.type){case a.zGH:return e||u.p.INQUIRING;case i.LG:return u.p.START;case i.aB:return u.p.FAILURE;case a.c13:return t.status;case i.rV:return"complete"===t.status?u.p.COMPLETE:e;case a.Sdq:return"An invalid transfer ID was passed."===t.error?u.p.NONE:u.p.REQUEST_FAILURE}return e})),f=(0,c.U)({eligibility:g,status:_,fetchingStatus:(e=!1,t)=>{switch(t.type){case a.k2T:return!0;case a.c13:case a.Sdq:return!1;default:return e}}}),j=(0,l.G)(y,(0,d.J)("siteId",f)),b=(0,o.xi)("automatedTransfer",j);(0,n.x)(["automatedTransfer"],b)},"./state/automated-transfer/selectors/get-automated-transfer.ts":(e,t,s)=>{"use strict";s.d(t,{t:()=>o});var n=s("../node_modules/lodash-es/get.js");s("./state/automated-transfer/init.js");const o=(e,t)=>(0,n.Z)(e,["automatedTransfer",t],{})},"./state/automated-transfer/selectors/is-fetching-automated-transfer-status.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s("../node_modules/lodash-es/isEmpty.js"),o=s("../node_modules/lodash-es/get.js"),a=s("./state/automated-transfer/selectors/get-automated-transfer.ts");s("./state/automated-transfer/init.js");const i=(e,t)=>{if(!t)return null;const s=(0,a.t)(e,t);return!s||(0,n.Z)(s)?null:(0,o.Z)(s,"fetchingStatus",!1)}},"./state/desktop/middleware.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var n=s("../node_modules/debug/src/browser.js"),o=s.n(n),a=s("./state/action-types.ts"),i=s("./state/desktop/window-events.js");const r=o()("desktop:middleware"),c=()=>e=>t=>t.type===a.hxz?(r("Dispatching window event for action type: ",t.type),window.dispatchEvent(new window.CustomEvent(i.D)),e(t)):e(t)},"./state/desktop/window-events.js":(e,t,s)=>{"use strict";s.d(t,{D:()=>n});const n="NOTIFY_DESKTOP_NOTIFICATIONS_UNSEEN_COUNT_RESET"},"./state/gutenberg-iframe-eligible/init.js":(e,t,s)=>{"use strict";var n=s("./state/redux-store.ts"),o=s("../packages/state-utils/src/index.ts"),a=s("./state/action-types.ts");const i=(0,s("./state/utils/keyed-reducer.ts").J)("siteId",((e,{type:t,isEligibleForGutenframe:s})=>t===a.p8O?s:e)),r=(0,o.xi)("gutenbergIframeEligible",i);(0,n.x)(["gutenbergIframeEligible"],r)},"./state/happychat/constants.js":(e,t,s)=>{"use strict";s.d(t,{jP:()=>n,SJ:()=>o,bp:()=>a,XY:()=>i,oP:()=>r,ad:()=>c,Qy:()=>l,lc:()=>d,ul:()=>u,mH:()=>m,EB:()=>p,mr:()=>h,so:()=>g,Zy:()=>y,dZ:()=>_,sH:()=>f,pW:()=>j,HY:()=>b,s0:()=>E,Bp:()=>w,nN:()=>S,i5:()=>v});const n="ping timeout",o="uninitialized",a="connecting",i="connected",r="disconnected",c="reconnecting",l="unauthorized",d=30,u="product",m="language",p="jpop",h="WP.com",g={CUSTOMER_EVENT:"customer-event",CUSTOMER_INFO:"customer-info",LOG:"log"},y="abandoned",_="assigned",f="assigning",j="blocked",b="closed",E="default",w="new",S="missed",v="pending"},"./state/happychat/init.js":(e,t,s)=>{"use strict";var n=s("./state/redux-store.ts"),o=s("../packages/state-utils/src/index.ts"),a=s("./state/utils/reducer-utils.ts"),i=s("../node_modules/lodash-es/get.js"),r=s("../node_modules/lodash-es/sortBy.js"),c=s("../node_modules/lodash-es/findIndex.js"),l=s("../node_modules/lodash-es/concat.js"),d=s("../node_modules/lodash-es/filter.js"),u=s("../node_modules/lodash-es/find.js"),m=s("../node_modules/lodash-es/map.js"),p=s("./state/action-types.ts"),h=s("./state/happychat/constants.js"),g=s("./state/utils/schema-utils.js"),y=s("./state/utils/with-persistence.ts");const _={type:"array",additionalProperties:!1,items:{type:"object",additionalProperties:!1,required:["id","source","message","timestamp","user_id","type"],properties:{id:{type:"string"},source:{type:"string"},message:{type:"string"},name:{type:"string"},image:{type:"string"},timestamp:{type:["number","string"]},user_id:{type:["number","string"]},type:{type:"string"},links:{type:"array"}}}},f=e=>e<17e8?1e3*e:e,j=(0,g.G)({type:"number"},((e=null,t)=>{switch(t.type){case p.qjX:case p.$Tb:return Date.now()}return e})),b=(e={},t)=>{switch(t.type){case p.$Tb:case p.IoY:case p.Ylp:const{message:e}=t;return{id:e.id,source:e.source,message:e.text,name:e.user.name,image:e.user.avatarURL,isEdited:!!e.revisions,isOptimistic:e.isOptimistic,timestamp:f(e.timestamp),user_id:e.user.id,type:(0,i.Z)(e,"type","message"),links:(0,i.Z)(e,"meta.links")}}return e},E=(0,g.G)(_,(0,y.$)(((e=[],t)=>{switch(t.type){case p.$Tb:case p.IoY:if((0,i.Z)(t,"message.meta.forOperator",!1))return e;const s=b({},t),n=(0,c.Z)(e,(({id:e})=>s.id===e));return n>=0?[...e.slice(0,n),s,...e.slice(n+1)]:(0,l.Z)(e,[s]);case p.Ylp:const o=(0,c.Z)(e,(({id:e})=>t.message.id===e));return-1===o?e:[...e.slice(0,o),b({},t),...e.slice(o+1)];case p.lbL:return e;case p.kJ4:const a=(0,d.Z)(t.messages,(t=>!!t.id&&(!(0,i.Z)(t,"meta.forOperator",!1)&&!(0,u.Z)(e,{id:t.id}))));return(e=>(0,r.Z)(e,(e=>parseInt(e.timestamp,10))))(e.concat((0,m.Z)(a,(e=>({id:e.id,source:e.source,message:e.text,name:e.user.name,image:e.user.picture,isEdited:!!e.revisions,timestamp:f(e.timestamp),user_id:e.user.id,type:(0,i.Z)(e,"type","message"),links:(0,i.Z)(e,"meta.links")})))))}return e}),{serialize:e=>e.slice(-1*h.lc)})),w=(0,a.U)({status:(e=h.s0,t)=>t.type===p.myH?t.status:e,timeline:E,lastActivityTimestamp:j}),S=(0,a.U)({error:(e=null,t)=>{switch(t.type){case p.M7f:return null;case p.f5U:return t.error}return e},isAvailable:(e=!1,t)=>t.type===p.nHy?t.isAvailable:e,localizedSupport:(e=!1,t)=>t.type===p.Sur?t.isAvailable:e,status:(e=h.SJ,t)=>{switch(t.type){case p.Mei:return h.bp;case p.M7f:return h.XY;case p.f5U:return h.oP;case p.k_K:return h.ad}return e}}),v=(0,g.G)({type:"number"},(0,y.$)(((e=null,t)=>{switch(t.type){case p.vQd:return Date.now();case p.o9b:return null}return e}),{serialize:e=>null===e?Date.now():e})),k=(0,a.U)({currentMessage:(e="",t)=>{switch(t.type){case p.qjX:return"";case p.c2t:return t.message}return e},isMinimizing:(e=!1,t)=>t.type===p.tyO?!!t.isMinimizing:e,isOpen:(e=!1,t)=>t.type===p.eYx?!!t.isOpen:e,lostFocusAt:v}),R=(0,g.G)({type:["object","null"],properties:{city:{type:"string"},country_long:{type:"string"},country_short:{type:"string"},region:{type:"string"}}},((e=null,t)=>{if(t.type===p.M7f){const{user:{geoLocation:s}}=t;return s&&s.country_long&&s.city?s:e}return e})),I=(0,g.G)({type:["boolean","null"]},((e=null,t)=>t.type===p.dRm?t.isEligible:e)),x=(0,g.G)({type:["object","null"],properties:{precancellation:{type:"boolean"},presale:{type:"boolean"}}},((e=null,t)=>t.type===p.f1L?t.availability:e)),N=(0,a.U)({geoLocation:R,isEligible:I,isPresalesPrecancellationEligible:x}),P=(0,a.U)({chat:w,connection:S,ui:k,user:N}),T=(0,o.xi)("happychat",P);(0,n.x)(["happychat"],T)},"./state/happychat/middleware-calypso.js":(e,t,s)=>{"use strict";s.d(t,{ZP:()=>w});var n=s("../node_modules/lodash-es/has.js"),o=s("./state/action-types.ts"),a=s("./state/analytics/actions/with-analytics.js"),i=s("./state/analytics/actions/record.js"),r=s("./state/current-user/selectors.js"),c=s("./state/happychat/connection/actions.js"),l=s("./state/happychat/constants.js"),d=s("./state/happychat/selectors/get-groups.js"),u=s("./state/happychat/selectors/get-happychat-chat-status.js"),m=s("./state/happychat/selectors/get-skills.js"),p=s("./state/happychat/selectors/is-happychat-chat-assigned.js"),h=s("./state/happychat/selectors/is-happychat-client-connected.js"),g=s("./state/help/selectors.js"),y=s("./state/jetpack-connect/action-types.js"),_=s("./state/selectors/get-current-route.js"),f=s("./state/sites/selectors/get-site-plan-slug.js"),j=s("./state/ui/selectors/get-section-name.js");const b=(e,t)=>`Looking at https://wordpress.com${t}`,E=({getState:e,dispatch:t},s)=>{const a=e();if(!(0,h.Z)(a)||!(0,p.Z)(a))return;(0,n.Z)(s,"meta.analytics")&&((e,{meta:{analytics:t}})=>{t.forEach((({type:t,payload:{service:s,name:n,properties:a}})=>{if(t===o.u2u&&"tracks"===s){const t=(({name:e,properties:t})=>{switch(e){case"calypso_add_new_wordpress_click":return'Clicked "Add new site" button';case"calypso_domain_search_add_button_click":return`Clicked "Add" button to add domain "${t.domain_name}"`;case"calypso_domain_remove_button_click":return`Clicked "Remove" button to remove domain "${t.domain_name}"`;case"calypso_themeshowcase_theme_activate":return`Changed theme from "${t.previous_theme}" to "${t.theme}"`;case"calypso_editor_featured_image_upload":return"Changed the featured image on the current post";case"calypso_map_domain_step_add_domain_click":return`Add "${t.domain_name}" to the cart in the "Map a domain" step`;case"calypso_view_site_page_view":return`Looking at ${t.full_url} inside the View Site section`}return null})({name:n,properties:a});t&&e((0,c.qP)(t)),e((0,c.gp)(n))}}))})(t,s);const i=(e=>{switch(e.type){case o.rNQ:return`Changed a comment's status to "${e.status}"`;case o.s_X:return"Export completed";case o.H3r:return`Export failed: ${e.error.message}`;case o.VJM:return"Started an export";case o.waY:case y.YB:case o.aqr:case o.aRw:case o.C8L:return null;case o.hZH:return`Saved post "${e.savedPost.title}" ${e.savedPost.short_URL}`;case o.fd:return`Connected ${e.connection.label} sharing`;case o.VM$:return`Disconnected ${e.connection.label} sharing`;case o.WjV:return null;case o.suc:return"Saved site settings"}return null})(s);i&&t((0,c.qP)(i))},w=e=>t=>s=>{const n=e.getState(),{dispatch:y}=e;switch(E(e,s),s.type){case o.myH:if((0,u.Z)(n)===l.i5&&s.status===l.dZ){y((0,a.w)((0,i.jN)("calypso_happychat_start"),(0,c.qP)(b(0,(0,_.Z)(n)))));const e=(0,g.QQ)(n);y((0,c.yW)({calypsoSectionName:(0,j.Z)(n)||"__unknown__",wpcomSiteId:""+e,wpcomSitePlan:(0,f.Z)(n,e)}))}break;case o.uWp:if((0,h.Z)(n)){const e=(0,r.Mg)(n),t=(0,d.Z)(n,s.siteId),o=(0,m.Z)(n,s.siteId);y((0,c._8)(e,t,o))}break;case o.RSp:(0,h.Z)(n)&&(0,p.Z)(n)&&y((0,c.qP)(b(0,s.path)))}return t(s)}},"./state/happychat/middleware.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var n=s("../node_modules/lodash-es/get.js");function o(){let e=null;function t(){return e||(e=new Promise((e=>Promise.all([s.e(49923),s.e(73583)]).then(s.bind(s,"./lib/happychat/connection.js")).then((function(t){e(t.default)})))).then((e=>e()))),e}function n(e){return(...s)=>t().then((t=>t[e](...s)))}return{init:n("init"),request:n("request"),send:n("send")}}var a=s("./state/action-types.ts"),i=s("./state/happychat/connection/actions.js"),r=s("./state/happychat/selectors/is-happychat-chat-assigned.js"),c=s("./state/happychat/selectors/is-happychat-client-connected.js");const l={HAPPYCHAT_BLUR:"Stopped looking at Happychat",HAPPYCHAT_FOCUS:"Started looking at Happychat"},d=((e=null)=>(null==e&&(e=o()),t=>s=>o=>{const d=t.getState();switch(o.type){case a.Mei:e.init(t.dispatch,o.auth);break;case a.R_D:e.request(o,o.timeout);break;case a.$tj:e.send(o),t.dispatch((0,i.yW)({howCanWeHelp:(0,n.Z)(o,"payload.meta.howCanWeHelp",null),howYouFeel:(0,n.Z)(o,"payload.meta.howYouFeel",null)}));break;case a.Syf:case a.vsK:case a.qjX:case a.Do$:case a.ILV:case a.SgU:e.send(o);break;case a.vQd:case a.o9b:(0,c.Z)(d)&&(0,r.Z)(d)&&l[o.type]&&t.dispatch((0,i.qP)(l[o.type]))}return s(o)}))()},"./state/happychat/selectors/get-happychat-chat-status.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s("../node_modules/lodash-es/get.js");s("./state/happychat/init.js");const o=e=>(0,n.Z)(e,"happychat.chat.status")},"./state/happychat/selectors/has-active-happychat-session.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s("../packages/state-utils/src/index.ts"),o=s("../node_modules/lodash-es/includes.js"),a=s("./state/happychat/constants.js");s("./state/happychat/init.js");const i=(0,n.P1)((e=>!(0,o.Z)([a.pW,a.HY,a.s0,a.Bp],e.happychat.chat.status)),(e=>e.happychat.chat.status))},"./state/happychat/selectors/is-happychat-chat-assigned.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var n=s("../node_modules/lodash-es/get.js"),o=s("./state/happychat/constants.js");s("./state/happychat/init.js");const a=e=>(0,n.Z)(e,"happychat.chat.status")===o.dZ},"./state/happychat/selectors/is-happychat-open.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var n=s("../packages/state-utils/src/index.ts"),o=s("./state/ui/selectors/get-section-name.js");s("./state/happychat/init.js");const a=(0,n.P1)((e=>e.happychat.ui.isOpen&&"happychat"!==(0,o.Z)(e)),(e=>[e.happychat.ui.isOpen,(0,o.Z)(e)]))},"./state/inline-help/actions.js":(e,t,s)=>{"use strict";s.d(t,{oF:()=>o,$J:()=>a,yE:()=>i});var n=s("./state/action-types.ts");s("./state/inline-help/init.js");function o(e=""){return{type:n.ubh,searchQuery:e}}function a(){return{type:n.Pfb}}function i(){return{type:n.WLQ}}},"./state/inline-help/init.js":(e,t,s)=>{"use strict";var n=s("./state/redux-store.ts"),o=s("../packages/state-utils/src/index.ts"),a=s("./state/action-types.ts"),i=s("./state/utils/reducer-utils.ts");const r=(0,i.U)({search:(e={searchQuery:""},t)=>{switch(t.type){case a.pif:return{searchQuery:""};case a.ubh:return{...e,searchQuery:t.searchQuery}}return e}}),c=(0,i.U)({popover:(e={isVisible:!1},t)=>{switch(t.type){case a.Pfb:return{...e,isVisible:!0};case a.WLQ:return{...e,isVisible:!1}}return e},searchResults:r}),l=(0,o.xi)("inlineHelp",c);(0,n.x)(["inlineHelp"],l)},"./state/jetpack-connect/action-types.js":(e,t,s)=>{"use strict";s.d(t,{YB:()=>n,t5:()=>o,n1:()=>a,Ok:()=>i,O:()=>r,Fb:()=>c,LU:()=>l,o$:()=>d,Ec:()=>u,DY:()=>m,OM:()=>p,JX:()=>h,a4:()=>g,GP:()=>y,YV:()=>_,FE:()=>f,WG:()=>j,Wq:()=>b});const n="JETPACK_CONNECT_AUTHORIZE",o="JETPACK_CONNECT_AUTHORIZE_LOGIN_COMPLETE",a="JETPACK_CONNECT_AUTHORIZE_RECEIVE",i="JETPACK_CONNECT_AUTHORIZE_RECEIVE_SITE_LIST",r="JETPACK_CONNECT_CHECK_URL",c="JETPACK_CONNECT_CHECK_URL_RECEIVE",l="JETPACK_CONNECT_COMPLETE_FLOW",d="JETPACK_CONNECT_CONFIRM_JETPACK_STATUS",u="JETPACK_CONNECT_DISMISS_URL_STATUS",m="JETPACK_CONNECT_QUERY_SET",p="JETPACK_CONNECT_RETRY_AUTH",h="JETPACK_CONNECT_SSO_AUTHORIZE_ERROR",g="JETPACK_CONNECT_SSO_AUTHORIZE_REQUEST",y="JETPACK_CONNECT_SSO_AUTHORIZE_SUCCESS",_="JETPACK_CONNECT_SSO_VALIDATION_ERROR",f="JETPACK_CONNECT_SSO_VALIDATION_REQUEST",j="JETPACK_CONNECT_SSO_VALIDATION_SUCCESS",b="JETPACK_CONNECT_USER_ALREADY_CONNECTED"},"./state/jetpack-connect/constants.js":(e,t,s)=>{"use strict";s.d(t,{e4:()=>n,Fe:()=>o,xH:()=>a,CA:()=>i});const n=3600,o=1e3*n,a=36e5,i=6e4},"./state/lib/middleware.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>j});var n=s("../node_modules/lodash-es/once.js"),o=s("../node_modules/lodash-es/defer.js"),a=s("../node_modules/page/page.js"),i=s.n(a),r=s("./lib/keyboard-shortcuts/index.js"),c=s("./state/action-types.ts"),l=s("./state/automated-transfer/actions.js"),d=s("./state/automated-transfer/selectors/is-fetching-automated-transfer-status.js"),u=s("./state/current-user/selectors.js");s("./state/immediate-login/init.js");var m=s("../packages/i18n-calypso/src/index.js");var p=s("./state/notices/actions.ts"),h=s("./state/selectors/has-site-pending-automated-transfer.js"),g=s("./state/selectors/is-notifications-open.js"),y=s("./state/ui/selectors/get-selected-site-id.js");const _=(0,n.Z)(((e,t,s)=>{if(!t.query.immediate_login_attempt)return;if(e(((e,t,s,n)=>({type:c.Mt0,success:e,reason:t,email:s,locale:n}))(t.query.immediate_login_success,t.query.login_reason,t.query.login_email,t.query.login_locale)),i().replace(((e,t)=>{const s=["immediate_login_attempt","immediate_login_success","login_reason","login_email","login_locale"],n=Object.keys(t).filter((e=>-1===s.indexOf(e))).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`));return e+(n.length?"?"+n.join("&"):"")})(t.path,t.query)),!t.query.immediate_login_success)return;const n=(0,u.vz)(s());n&&(0,o.Z)((()=>{e((0,p.RT)(((e,t)=>(0,m.Iu)("You're logged in as %(email)s.",{args:{email:t}}))(t.query.login_reason,n)))}))})),f=(e,t,s)=>{switch(t.type){case c.RSp:return _(e,t,s);case c.hxz:return((e,t,s)=>{const n=!(0,g.Z)(s());r.Z.setNotificationsOpen(n)})(0,0,s);case c.bgv:case c.UUJ:case c.xLe:return void setTimeout((()=>{((e,t)=>{const s=t(),n=(0,y.Z)(s);!(0,d.Z)(s,n)&&(0,h.Z)(s,n)&&e((0,l.LH)(n))})(e,s)}),0)}},j=({dispatch:e,getState:t})=>s=>n=>(f(e,n,t),s(n))},"./state/notifications-panel/actions/index.js":(e,t,s)=>{"use strict";s.d(t,{k:()=>o,g:()=>a});s("./state/notifications-panel/init.js");var n=s("./state/action-types.ts");const o=function(e){return{type:n.b_y,refresh:e}},a=function(){return{type:n.b_y,refresh:!1}}},"./state/notifications-panel/init.js":(e,t,s)=>{"use strict";var n=s("./state/redux-store.ts"),o=s("./state/action-types.ts");const a=(0,s("./state/utils/reducer-utils.ts").U)({shouldForceRefresh:(e=!1,{type:t,refresh:s})=>t===o.b_y?s||!1:e});(0,n.x)(["notifications"],a)},"./state/notifications/init.js":(e,t,s)=>{"use strict";var n=s("./state/redux-store.ts"),o=s("../packages/state-utils/src/index.ts"),a=s("./state/action-types.ts");const i=(0,o.xi)("notificationsUnseenCount",((e=null,t)=>a.tBn===t.type?t.unseenCount:e));(0,n.x)(["notificationsUnseenCount"],i)},"./state/plugins/init.js":(e,t,s)=>{"use strict";var n=s("./state/redux-store.ts"),o=s("../packages/state-utils/src/index.ts"),a=s("./state/utils/reducer-utils.ts"),i=s("../node_modules/lodash-es/findIndex.js"),r=s("./state/action-types.ts"),c=s("./state/utils/schema-utils.js");var l=s("./state/plugins/installed/status/constants.ts");function d(e={},t){const{pluginId:s}=t;switch(t.type){case r.aRw:case r.nM3:case r.c0y:case r.oe9:case r.DIf:case r.OzL:case r.ku_:case r.rSV:case r.uYK:case r.Ubi:case r.Ezs:case r.OdF:case r.Pk2:case r.vOK:case r.v1B:case r.jWe:case r.RRf:case r.At6:case r.ns$:case r.x8h:case r.czR:return void 0!==e[s]?Object.assign({},e,{[s]:u(e[s],t)}):Object.assign({},e,{[s]:u({},t)});default:return e}}function u(e={},t){switch(t.type){case r.aRw:case r.nM3:case r.c0y:case r.oe9:case r.DIf:case r.OzL:case r.ku_:return Object.assign({},e,{status:l.gm,action:t.action});case r.rSV:case r.uYK:case r.Ubi:case r.Ezs:case r.OdF:case r.Pk2:case r.vOK:return Object.assign({},e,{status:l.s1,action:t.action});case r.v1B:case r.jWe:case r.RRf:case r.At6:case r.ns$:case r.x8h:case r.czR:return Object.assign({},e,{status:l.m,action:t.action,error:t.error});default:return e}}const m=function(e,t){return void 0!==e[t.siteId]?Object.assign({},e,{[t.siteId]:h(e[t.siteId],t)}):e},p=(0,c.G)({type:"object",patternProperties:{"^[0-9]+$":{type:"array",items:{required:["id","slug","name","active","autoupdate"],properties:{id:{type:"string"},slug:{type:"string"},active:{type:"boolean"},name:{type:"string"},plugin_url:{type:"string"},version:{type:"string"},description:{type:"string"},author:{type:"string"},author_url:{type:"string"},network:{type:"boolean"},autoupdate:{type:"boolean"},update:{type:"object"}}}}},additionalProperties:!1},((e={},t)=>{switch(t.type){case r.MMT:return{...e,[t.siteId]:t.data};case r.rSV:case r.uYK:case r.Ubi:case r.Ezs:case r.OdF:case r.Pk2:case r.vOK:return m(e,t)}return e}));function h(e=[],t){switch(t.type){case r.rSV:case r.uYK:case r.Ubi:case r.Ezs:case r.OdF:return e.map((e=>function(e,t){switch(t.type){case r.rSV:case r.uYK:case r.Ezs:case r.OdF:return e.id!==t.data.id?e:Object.assign({},e,t.data);case r.Ubi:return e.id!==t.data.id?e:Object.assign({},e,{update:{recentlyUpdated:!0}},t.data);default:return e}}(e,t)));case r.Pk2:return[...e,t.data];case r.vOK:const s=(0,i.Z)(e,{id:t.pluginId});return[...e.slice(0,s),...e.slice(s+1)];default:return e}}const g=(0,a.U)({isRequesting:function(e={},t){switch(t.type){case r.EDz:return Object.assign({},e,{[t.siteId]:!0});case r.Dp5:case r.FHu:return Object.assign({},e,{[t.siteId]:!1});default:return e}},plugins:p,status:function(e={},t){const{siteId:s}=t;switch(t.type){case r.aRw:case r.nM3:case r.c0y:case r.oe9:case r.DIf:case r.OzL:case r.ku_:case r.rSV:case r.uYK:case r.Ubi:case r.Ezs:case r.OdF:case r.Pk2:case r.vOK:case r.v1B:case r.jWe:case r.RRf:case r.At6:case r.ns$:case r.x8h:case r.czR:return Object.assign({},e,{[s]:d(e[s],t)});case r.mCe:{if(!t.statuses||!t.statuses.length)return e;const s=Object.entries(e).map((([e,s])=>{const n=Object.entries(s).filter((([,e])=>!t.statuses.includes(e.status)));return n.length?[e,Object.fromEntries(n)]:[]})).filter((e=>e.length));return Object.fromEntries(s)}default:return e}}});var y=s("../node_modules/lodash-es/mapValues.js"),_=s("../node_modules/lodash-es/omit.js"),f=s("./state/utils/with-persistence.ts");const j=(0,c.G)({type:"object",patternProperties:{"^[0-9]+$":{type:"array",items:{required:["slug"],properties:{name:{type:"string"},slug:{type:"string"},status:{type:"string"},error:{type:["object","string","null"]},key:{type:"null"}}}}},additionalProperties:!1},(0,f.$)(((e={},t)=>{switch(t.type){case r.oeh:return Object.assign({},e,{[t.siteId]:t.data});case r.Rn8:case r.C8L:case r.f7C:case r.yXo:case r.S6B:return void 0!==e[t.siteId]?Object.assign({},e,{[t.siteId]:b(e[t.siteId],t)}):e;default:return e}}),{serialize:e=>(0,y.Z)(e,(e=>e.map((e=>{var t;return e.error&&(e={...e,error:(t=e.error,Object.fromEntries(["name","code","error","message"].map((e=>[e,t[e]])).filter((([,e])=>void 0!==e))))}),(0,_.Z)(e,"key")}))))}));function b(e=[],t){switch(t.type){case r.oeh:return t.data;case r.Rn8:case r.C8L:case r.f7C:case r.yXo:case r.S6B:return e.map((e=>function(e,t){switch(t.type){case r.Rn8:case r.C8L:case r.f7C:case r.yXo:return e.slug!==t.slug?e:Object.assign({},e,{status:E(e.status,t)});case r.S6B:return e.slug!==t.slug?e:Object.assign({},e,{status:E(e.status,t),error:t.error});default:return e}}(e,t)));default:return e}}function E(e,t){switch(t.type){case r.Rn8:return"install";case r.C8L:return"activate";case r.f7C:return"configure";case r.yXo:return"done";default:return e||"wait"}}const w=(0,a.U)({isRequesting:function(e={},t){switch(t.type){case r.thH:return Object.assign({},e,{[t.siteId]:!0});case r.oeh:return Object.assign({},e,{[t.siteId]:!1});default:return e}},hasRequested:function(e={},t){return t.type===r.oeh?Object.assign({},e,{[t.siteId]:!0}):e},plugins:j});var S=s("./state/utils/keyed-reducer.ts");const v=(0,S.J)("siteId",((e=null,t)=>{switch(t.type){case r.duW:return t.data;case r.mrr:return e||[]}return e})),k=(0,S.J)("siteId",((e={},t)=>{switch(t.type){case r.ZxD:return null;case r.VnH:{const{pluginId:e}=t;return e}case r.YdL:case r.PE7:return null;case r.c13:{const{uploadedPluginId:e}=t;return e}}return e})),R=(0,S.J)("siteId",((e={},t)=>{switch(t.type){case r.PE7:{const{error:e}=t;return e}case r.ZxD:case r.YdL:case r.VnH:return null}return e})),I=(0,S.J)("siteId",((e={},t)=>{switch(t.type){case r.VLi:{const{progress:e}=t;return e}case r.ZxD:case r.YdL:case r.PE7:return 0}return e})),x=(0,S.J)("siteId",((e={},t)=>{switch(t.type){case r.ZxD:return!0;case r.VnH:case r.PE7:case r.YdL:return!1;case r._az:return!0;case r.c13:{const{status:e}=t;return"complete"!==e}}return e})),N=(0,a.U)({uploadedPluginId:k,uploadError:R,progressPercent:I,inProgress:x});function P(e={},t,s){return Object.assign({},e,{[t]:Object.assign({},e[t],s)})}const T=(0,a.U)({fetchingItems:function(e={},t){switch(t.type){case r.h11:return Object.assign({},e,{[t.pluginSlug]:!0});case r.akS:return Object.assign({},e,{[t.pluginSlug]:!1})}return e},fetchingLists:function(e={},t){switch(t.type){case r.anr:case r.Sb1:if(t.category)return{...e,category:{...e.category,[t.category]:t.type===r.anr}};if(t.searchTerm)return{...e,search:{...e.search,[t.searchTerm]:t.type===r.anr}}}return e},items:function(e={},t){const{type:s,pluginSlug:n}=t;return s===r.akS?t.data?P(e,n,Object.assign({fetched:!0,wporg:!0},t.data)):P(e,n,Object.assign({fetched:!1,wporg:!1})):e},lists:function(e={},t){const{category:s,data:n,page:o,searchTerm:a,type:i}=t;if(i===r.Sb1){if(!n)return e;if(s){const t=o>1?e.category?.[s]??[]:[];return{...e,category:{...e.category,[s]:[...t,...n]}}}if(a)return{...e,search:{...e.search,[a]:n}}}return e},listsPagination:function(e={},t){if(t.type===r.Sb1)if(t.pagination&&t.category)return{...e,category:{...e.category,[t.category]:t.pagination}};return e}}),Z=(0,a.U)({wporg:T,premium:w,installed:g,upload:N,recommended:v}),A=(0,o.xi)("plugins",Z);(0,n.x)(["plugins"],A)},"./state/plugins/installed/status/constants.ts":(e,t,s)=>{"use strict";s.d(t,{gm:()=>n,s1:()=>o,m:()=>a});const n="inProgress",o="completed",a="error"},"./state/plugins/upload/actions.js":(e,t,s)=>{"use strict";s.d(t,{XI:()=>f,ZN:()=>y,y9:()=>_,oZ:()=>g,GH:()=>h});var n=s("./state/action-types.ts"),o=s("../packages/i18n-calypso/src/index.js"),a=s("../node_modules/lodash-es/find.js"),i=s("../node_modules/lodash-es/includes.js"),r=s("./lib/plugins/constants.js"),c=s("./state/analytics/actions/record.js"),l=s("./state/data-layer/handler-registry.js"),d=s("./state/data-layer/wpcom-http/actions.js"),u=s("./state/data-layer/wpcom-http/utils.js"),m=s("./state/notices/actions.ts");const p=e=>{const t={exists:(0,o.Iu)("This plugin is already installed on your site."),"too large":(0,o.Iu)("The plugin zip file must be smaller than 10MB."),incompatible:(0,o.Iu)("The uploaded file is not a compatible plugin."),unsupported_mime_type:(0,o.Iu)("The uploaded file is not a valid zip.")},s=`${e.error}${e.message}`.toLowerCase(),n=(0,a.Z)(t,((e,t)=>(0,i.Z)(s,t)));return n?(0,m.tF)(n):e.error?(0,m.tF)((0,o.Iu)("Upload problem: %(error)s.",{args:{error:e.error}})):(0,m.tF)((0,o.Iu)("Problem installing the plugin."))};(0,l.Z9)("state/data-layer/wpcom/sites/plugins/new/index.js",{[n.ZxD]:[(0,u.BN)({fetch:e=>{const{siteId:t,file:s}=e;return[(0,c.jN)("calypso_plugin_upload"),(0,d.d)({method:"POST",path:`/sites/${t}/plugins/new`,apiVersion:"1",formData:[["zip[]",s]]},e)]},onSuccess:({siteId:e},t)=>s=>{const{slug:o}=t;s((0,c.jN)("calypso_plugin_upload_complete",{plugin_id:o})),s(y(e,o)),s({type:n.Pk2,action:r.rH,siteId:e,pluginId:t.id,data:t})},onError:({siteId:e},t)=>[(0,c.jN)("calypso_plugin_upload_error",{error_code:t.error,error_message:t.message}),p(t),_(e,t)],onProgress:({siteId:e},{loaded:t,total:s})=>g(e,s?t/s*100:s)})]});s("./state/plugins/init.js");function h(e,t){return{type:n.ZxD,siteId:e,file:t}}function g(e,t){return{type:n.VLi,siteId:e,progress:t}}function y(e,t){return{type:n.VnH,siteId:e,pluginId:t}}function _(e,t){return{type:n.PE7,siteId:e,error:t}}function f(e){return{type:n.YdL,siteId:e}}},"./state/push-notifications/actions.js":(e,t,s)=>{"use strict";s.d(t,{S1:()=>_,n0:()=>I,hr:()=>x});var n=s("../packages/calypso-config/src/index.ts"),o=s("../node_modules/debug/src/browser.js"),a=s.n(o);var i=s("./lib/wp/browser.js"),r=s("./state/action-types.ts"),c=s("./state/analytics/actions/bump-stat.js"),l=s("./state/analytics/actions/record.js"),d=s("./state/push-notifications/selectors.js");function u(){const e=window.navigator.appVersion.match(/Chrome\/(\d+)/);return e?e[1]:-1}function m(){return window&&"serviceWorker"in window.navigator&&"ServiceWorkerRegistration"in window&&"showNotification"in window.ServiceWorkerRegistration.prototype&&"PushManager"in window}function p(){if(window&&window.navigator&&window.navigator.appVersion){const e=window.navigator.appVersion.match(/OPR\/(\d+)/);return e?e[1]:-1}return-1}function h(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),s=atob(t),n=new Uint8Array(s.length);for(let e=0;e<s.length;++e)n[e]=s.charCodeAt(e);return n}s("./state/push-notifications/init.js");const g=a()("calypso:push-notifications"),y={path:"/service-worker.js"};function _(){return e=>{const{isSupportSession:t}=s("./lib/user/support-user-interop.js");if(t())return g("Push Notifications are not supported when SU is active"),void e(f());if(!m())return g("Push Notifications are not supported"),void e(f());if(window&&window.chrome&&window.navigator.appVersion&&u()<50){g("Push Notifications are not supported in Chrome 49 and below");const t=u();return e((0,c.P)("calypso_push_notif_unsup_chrome",t>39&&t<50?t:"other")),void e(f())}if(-1!==p()){g("Push Notifications are not supported in Opera");const t=p();return e((0,c.P)("calypso_push_notif_unsup_opera",t>15&&t<100?t:"other")),void e(f())}"Notification"in window&&"denied"!==window.Notification.permission||(g("Push Notifications have been denied"),e(R())),e(b())}}function f(){return{type:r.HGp}}function j(){return(e,t)=>{e({type:r.BOh});const s=t();(0,d.IT)(s)||((0,d._k)(s)?e(((e,t)=>{const s=t();!(0,d.IT)(s)&&(0,d.fT)(s)&&window.navigator.serviceWorker.ready.then((t=>{t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:h((0,n.ZP)("push_notification_vapid_key"))}).then((()=>e(k()))).catch((t=>{g("Couldn't get subscription",t),e(k())}))})).catch((e=>g("Error activating subscription",e)))})):(e(k()),"disabling"===(0,d.lR)(s)&&(g("Forcibly unregistering device (disabling on apiReady)"),e(S()))))}}function b(){return e=>{g("Registering service worker"),function(e={}){const t=e.path||"/service-worker.js";return window.navigator.serviceWorker.register(t)}(y).then((t=>e(j()))).catch((t=>{g("Error loading service worker!",t),e(f())}))}}function E(){return e=>{window.navigator.serviceWorker.getRegistration(y).then((t=>{t.pushManager.getSubscription().then((t=>{e(S()),t&&t.unsubscribe?t.unsubscribe().then((()=>g("Push subscription unsubscribed"))).catch((e=>g("Error while unsubscribing",e))):g("Error getting push subscription to deactivate")})).catch((t=>{e(S()),g("Error getting subscription to deactivate",t)}))})).catch((t=>{e(S()),g("Error getting ServiceWorkerRegistration to deactivate",t)}))}}function w(e){return(t,s)=>{if("granted"===e)return g("Push notifications authorized"),t({type:r.pdf}),void t((e=>{window.navigator.serviceWorker.ready.then((t=>{t.pushManager.getSubscription().then((t=>{e(function(e){return t=>{if(e)return g("Sending subscription to WPCOM",e),i.Z.undocumented().registerDevice(JSON.stringify(e),"browser","Browser").then(((e,s)=>t({type:r.SR1,data:e,headers:s}))).catch((e=>g("Couldn't register device",e)));g("No subscription to send to WPCOM")}}(t))})).catch((e=>g("Error getting subscription",e)))})).catch((e=>g("Error fetching push manager subscription",e)))}));"denied"!==e?((0,d._k)(s())&&t(I()),t({type:r.d7B})):t(R())}}function S(){return(e,t)=>{const s=(0,d.Zw)(t());return s?i.Z.undocumented().unregisterDevice(s).then((t=>{g("Successfully unregistered device",t),e(v(t))})).catch((t=>{g("Couldn't unregister device",t),e(v())})):(g("Couldn't unregister device. Unknown device ID"),void e(v()))}}function v(e){return{type:r.hEK,data:e||{}}}function k(){return e=>{window.navigator.serviceWorker.ready.then((t=>{t.pushManager.permissionState({userVisibleOnly:!0}).then((t=>{g("Received push messaging state",t),e(w(t))})).catch((t=>{g("Error checking permission state",t),e(w("denied"))}))})).catch((e=>g("Error checking permission state -- not ready",e)))}}function R(){return e=>{e({type:r.fGH}),e(E()),e((0,l.jN)("calypso_web_push_notifications_blocked"))}}function I(){return(e,t)=>{const s=!(0,d._k)(t());g(s?"enabling":"disabling"),e({type:r.OY5}),s?(e(b()),e((0,l.jN)("calypso_web_push_notifications_enabled"))):(e(E()),e((0,l.jN)("calypso_web_push_notifications_disabled")))}}function x(){return{type:r.Pc2}}},"./state/push-notifications/init.js":(e,t,s)=>{"use strict";var n=s("./state/redux-store.ts"),o=s("../packages/state-utils/src/index.ts"),a=s("../node_modules/debug/src/browser.js"),i=s.n(a),r=s("../node_modules/lodash-es/omit.js"),c=s("./state/action-types.ts"),l=s("./state/utils/schema-utils.js"),d=s("./state/utils/with-persistence.ts"),u=s("./state/utils/reducer-utils.ts");const m={type:"boolean"},p={type:"object",properties:{enabled:m,dismissedNotice:m,dismissedNoticeAt:{type:"number"},showingUnblockInstructions:m},additionalProperties:!1},h={type:"object",properties:{apiReady:m,authorized:m,authorizationLoaded:m,blocked:m,wpcomSubscription:{type:"object",properties:{ID:{type:"string"},settings:{type:"object",additionalProperties:!0}}}},additionalProperties:!1},g=i()("calypso:push-notifications"),y=["apiReady","authorized","authorizationLoaded","blocked"],_=(0,l.G)(h,(0,d.$)(((e={},t)=>{switch(t.type){case c.BOh:return g("API is ready"),Object.assign({},e,{apiReady:!0});case c.pdf:return Object.assign({},e,{authorized:!0,authorizationLoaded:!0,blocked:!1});case c.fGH:return Object.assign({},e,{authorized:!1,authorizationLoaded:!0,blocked:!0});case c.d7B:return Object.assign({},e,{authorized:!1,authorizationLoaded:!0,blocked:!1});case c.hEK:{const{data:s}=t;return s.success||g("Couldn't unregister device",s),g("Deleted WPCOM subscription",s),(0,r.Z)(e,["wpcomSubscription"])}case c.SR1:{const{data:s}=t;return g("Received WPCOM device registration results",s),s&&s.ID?Object.assign({},e,{wpcomSubscription:{ID:s.ID.toString(),settings:s.settings}}):e}}return e}),{serialize:e=>(0,r.Z)(e,y),deserialize:e=>(0,r.Z)(e,y)})),f=["showingUnblockInstructions"],j=(0,l.G)(p,(0,d.$)(((e={enabled:!1},t)=>{switch(t.type){case c.OY5:return Object.assign({},e,{enabled:!e.enabled});case c.Pc2:return Object.assign({},e,{showingUnblockInstructions:!e.showingUnblockInstructions});case c.SR1:return Object.assign({},e,{enabled:!0})}return e}),{serialize:e=>(0,r.Z)(e,f),deserialize:e=>(0,r.Z)(e,f)})),b=(0,u.U)({settings:j,system:_}),E=(0,o.xi)("pushNotifications",b);(0,n.x)(["pushNotifications"],E)},"./state/push-notifications/selectors.js":(e,t,s)=>{"use strict";s.d(t,{fT:()=>n,IT:()=>o,_k:()=>i,J$:()=>r,Zw:()=>c,lR:()=>l});s("./state/push-notifications/init.js");const n=e=>!!e.pushNotifications.system.apiReady,o=e=>!!e.pushNotifications.system.blocked,a=e=>e.pushNotifications.system.wpcomSubscription,i=e=>!!e.pushNotifications.settings.enabled,r=e=>!!e.pushNotifications.settings.showingUnblockInstructions;function c(e){const t=a(e);if(t)return t.ID}function l(e){if(!n(e))return"unknown";if(o(e))return"denied";const t=a(e);return i(e)?t?"subscribed":"enabling":t?"disabling":"unsubscribed"}},"./state/reader-ui/init.js":(e,t,s)=>{"use strict";var n=s("./state/redux-store.ts"),o=s("../packages/state-utils/src/index.ts"),a=s("./state/reader/action-types.js"),i=s("./state/utils/with-persistence.ts"),r=s("./state/utils/reducer-utils.ts"),c=s("./reader/post-key.js");var l=s("./state/action-types.ts");var d=s("../node_modules/lodash-es/xor.js");const u=(0,i.$)(((e=!1,t)=>t.type===a.lh?!e:e)),m=(0,i.$)(((e=!1,t)=>t.type===a.Lh?!e:e)),p=(0,i.$)(((e=!1,t)=>t.type===a.ze?!e:e)),h=(0,i.$)(((e=[],t)=>t.type===a.jZ?(0,d.Z)(e,[t.organizationId]):e)),g=(0,r.U)({isListsOpen:u,isTagsOpen:m,isFollowingOpen:p,openOrganizations:h}),y=(0,i.$)(((e=null,t)=>{if(t.type===a.bY)if(t.path&&t.path.startsWith("/read"))return t.path;return e})),_=(0,r.U)({sidebar:g,cardExpansions:(e={},t)=>{switch(t.type){case a.a_:{if(!t.payload.postKey)return e;const{postKey:s}=t.payload;return{...e,[(0,c.C$)(s)]:!0}}case a.vX:return{}}return e},lastPath:y,currentStream:(e=null,t)=>t.type===a.bY?t.streamKey:e,hasUnseenPosts:(e=!1,t)=>t.type===l.oEm?t.status:e}),f=(0,o.xi)("readerUi",_);(0,n.x)(["readerUi"],f)},"./state/reader-ui/seen-posts/actions.js":(e,t,s)=>{"use strict";s.d(t,{r:()=>c,S:()=>r});var n=s("./state/action-types.ts"),o=s("./state/data-layer/handler-registry.js"),a=s("./state/data-layer/wpcom-http/actions.js"),i=s("./state/data-layer/wpcom-http/utils.js");(0,o.Z9)("state/data-layer/wpcom/unseen-posts/unseen/status/index.js",{[n.t9P]:[(0,i.BN)({fetch:function(e){return(0,a.d)({apiNamespace:"wpcom/v2",method:"GET",path:"/seen-posts/unseen/status"},e)},onSuccess:function(e,t){return c({status:t.status})},onError:function(){return[]}})]});s("./state/reader-ui/init.js");const r=()=>({type:n.t9P}),c=({status:e})=>({type:n.oEm,status:e})},"./state/reader/action-types.js":(e,t,s)=>{"use strict";s.d(t,{pu:()=>n,CI:()=>o,c7:()=>a,_7:()=>i,l0:()=>r,rC:()=>c,K1:()=>l,D8:()=>d,RN:()=>u,BQ:()=>m,tx:()=>p,_n:()=>h,a_:()=>g,f_:()=>y,Ae:()=>_,_h:()=>f,M1:()=>j,_p:()=>b,Qm:()=>E,OC:()=>w,AH:()=>S,lH:()=>v,P6:()=>k,xe:()=>R,sh:()=>I,b3:()=>x,I$:()=>N,c6:()=>P,q_:()=>T,_O:()=>Z,Ny:()=>A,DJ:()=>O,kB:()=>L,dU:()=>C,R1:()=>D,B_:()=>U,gS:()=>M,L5:()=>$,qO:()=>z,Nr:()=>q,s5:()=>F,ud:()=>B,we:()=>G,MW:()=>V,a$:()=>W,nY:()=>H,oY:()=>K,cu:()=>J,Zq:()=>Q,$J:()=>Y,S6:()=>X,ch:()=>ee,nB:()=>te,rE:()=>se,tt:()=>ne,$6:()=>oe,BW:()=>ae,Bi:()=>ie,Cm:()=>re,Rn:()=>ce,yZ:()=>le,vX:()=>de,lh:()=>ue,Lh:()=>me,ze:()=>pe,jZ:()=>he,IJ:()=>ge,zF:()=>ye,zg:()=>_e,LW:()=>fe,Fy:()=>je,qY:()=>be,Qw:()=>Ee,qU:()=>we,Qr:()=>Se,HC:()=>ve,aL:()=>ke,fY:()=>Re,fB:()=>Ie,Ep:()=>xe,hB:()=>Ne,Jx:()=>Pe,_i:()=>Te,CE:()=>Ze,ZY:()=>Ae,Dt:()=>Oe,pB:()=>Le,Q6:()=>Ce,tN:()=>De,HO:()=>Ue,BZ:()=>Me,VV:()=>$e,vy:()=>ze,OT:()=>qe,bY:()=>Fe,sR:()=>Be,xG:()=>Ge,mi:()=>Ve,e_:()=>We,Z4:()=>He,iv:()=>Ke,Bu:()=>Je,c1:()=>Qe,cw:()=>Ye,Fi:()=>Xe});const n="READER_STREAMS_PAGE_RECEIVE",o="READER_STREAMS_PAGE_REQUEST",a="READER_STREAMS_SHOW_UPDATES",i="READER_STREAMS_SELECT_ITEM",r="READER_STREAMS_SELECT_NEXT_ITEM",c="READER_STREAMS_SELECT_PREV_ITEM",l="READER_DISMISS_POST",d="READER_DISMISS_SITE",u="READER_STREAMS_UPDATES_RECEIVE",m="READER_CONVERSATION_FOLLOW",p="READER_CONVERSATION_MUTE",h="READER_CONVERSATION_UPDATE_FOLLOW_STATUS",g="READER_EXPAND_CARD",y="READER_EXPAND_COMMENTS",_="READER_FEED_REQUEST",f="READER_FEED_REQUEST_FAILURE",j="READER_FEED_REQUEST_SUCCESS",b="READER_FEED_SEARCH_RECEIVE",E="READER_FEED_SEARCH_REQUEST",w="READER_FEED_UPDATE",S="READER_FOLLOW",v="READER_FOLLOW_ERROR",k="READER_FOLLOWS_RECEIVE",R="READER_FOLLOWS_SYNC_PAGE",I="READER_FOLLOWS_SYNC_START",x="READER_FOLLOWS_SYNC_COMPLETE",N="READER_FOLLOW_TAG_REQUEST",P="READER_LIST_ITEMS_REQUEST",T="READER_LIST_ITEMS_RECEIVE",Z="READER_LISTS_RECEIVE",A="READER_LISTS_REQUEST",O="READER_LIST_CREATE",L="READER_LIST_DELETE",C="READER_LIST_FOLLOW",D="READER_LIST_FOLLOW_RECEIVE",U="READER_LIST_REQUEST",M="READER_LIST_REQUEST_FAILURE",$="READER_LIST_REQUEST_SUCCESS",z="READER_LIST_UNFOLLOW",q="READER_LIST_UNFOLLOW_RECEIVE",F="READER_LIST_UPDATE",B="READER_LIST_UPDATE_FAILURE",G="READER_LIST_UPDATE_SUCCESS",V="READER_LIST_ITEM_DELETE_FEED",W="READER_LIST_ITEM_DELETE_SITE",H="READER_LIST_ITEM_DELETE_TAG",K="READER_LIST_ITEM_ADD_FEED",J="READER_LIST_ITEM_ADD_FEED_RECEIVE",Q="READER_LIST_ITEM_ADD_TAG",Y="READER_ORGANIZATIONS_RECEIVE",X="READER_ORGANIZATIONS_REQUEST",ee="READER_POST_SEEN",te="READER_POSTS_RECEIVE",se="READER_RECOMMENDED_SITES_RECEIVE",ne="READER_RECOMMENDED_SITES_REQUEST",oe="READER_RECORD_FOLLOW",ae="READER_RECORD_UNFOLLOW",ie="READER_RELATED_POSTS_RECEIVE",re="READER_RELATED_POSTS_REQUEST",ce="READER_RELATED_POSTS_REQUEST_FAILURE",le="READER_RELATED_POSTS_REQUEST_SUCCESS",de="READER_RESET_CARD_EXPANSIONS",ue="READER_SIDEBAR_LISTS_TOGGLE",me="READER_SIDEBAR_TAGS_TOGGLE",pe="READER_SIDEBAR_FOLLOWING_TOGGLE",he="READER_SIDEBAR_ORGANIZATIONS_TOGGLE",ge="READER_SITE_BLOCK",ye="READER_SITE_BLOCKS_RECEIVE",_e="READER_SITE_BLOCKS_REQUEST",fe="READER_SITE_REQUEST",je="READER_SITE_REQUEST_FAILURE",be="READER_SITE_REQUEST_SUCCESS",Ee="READER_SITE_UNBLOCK",we="READER_SITE_UPDATE",Se="READER_SUBSCRIBE_TO_NEW_COMMENT_EMAIL",ve="READER_SUBSCRIBE_TO_NEW_POST_EMAIL",ke="READER_SUBSCRIBE_TO_NEW_POST_NOTIFICATIONS",Re="READER_TAGS_RECEIVE",Ie="READER_TAGS_REQUEST",xe="READER_TAG_IMAGES_RECEIVE",Ne="READER_TAG_IMAGES_REQUEST",Pe="READER_TAG_IMAGES_REQUEST_FAILURE",Te="READER_TAG_IMAGES_REQUEST_SUCCESS",Ze="READER_THUMBNAIL_RECEIVE",Ae="READER_THUMBNAIL_REQUEST",Oe="READER_THUMBNAIL_REQUEST_FAILURE",Le="READER_THUMBNAIL_REQUEST_SUCCESS",Ce="READER_UNFOLLOW",De="READER_UNFOLLOW_TAG_RECEIVE",Ue="READER_UNFOLLOW_TAG_REQUEST",Me="READER_UNSUBSCRIBE_TO_NEW_COMMENT_EMAIL",$e="READER_UNSUBSCRIBE_TO_NEW_POST_EMAIL",ze="READER_UNSUBSCRIBE_TO_NEW_POST_NOTIFICATIONS",qe="READER_UPDATE_NEW_POST_EMAIL_SUBSCRIPTION",Fe="READER_VIEW_STREAM",Be="READER_VIEWING_FULL_POST_SET",Ge="READER_VIEWING_FULL_POST_UNSET",Ve="READER_SEEN_MARK_AS_SEEN_REQUEST",We="READER_SEEN_MARK_AS_SEEN_RECEIVE",He="READER_SEEN_MARK_AS_UNSEEN_REQUEST",Ke="READER_SEEN_MARK_AS_UNSEEN_RECEIVE",Je="READER_SEEN_MARK_ALL_AS_SEEN_REQUEST",Qe="READER_SEEN_MARK_ALL_AS_SEEN_RECEIVE",Ye="READER_SEEN_MARK_AS_SEEN_BLOG_REQUEST",Xe="READER_SEEN_MARK_AS_UNSEEN_BLOG_REQUEST"},"./state/selected-editor/actions.js":(e,t,s)=>{"use strict";s.d(t,{o:()=>c});var n=s("./state/action-types.ts"),o=s("./state/data-layer/handler-registry.js"),a=s("./state/data-layer/wpcom-http/actions.js"),i=s("./state/data-layer/wpcom-http/utils.js");s("./state/gutenberg-iframe-eligible/init.js");const r=(0,i.BN)({fetch:e=>(0,a.d)({method:"GET",path:`/sites/${e.siteId}/gutenberg`,apiNamespace:"wpcom/v3"},e),onSuccess:({siteId:e},{editor_web:t,eligible_gutenframe:s})=>o=>{o({type:n.Z4q,siteId:e,editor:t}),o({type:n.p8O,siteId:e,isEligibleForGutenframe:s})},onError:()=>{}});(0,o.Z9)("state/data-layer/wpcom/sites/gutenberg/index.js",{[n.L1d]:[r]});s("./state/selected-editor/init.js");const c=e=>({type:n.L1d,siteId:e})},"./state/selected-editor/init.js":(e,t,s)=>{"use strict";var n=s("./state/redux-store.ts"),o=s("../packages/state-utils/src/index.ts"),a=s("./state/action-types.ts"),i=s("./state/utils/keyed-reducer.ts");const r=(0,o.xi)("selectedEditor",(0,i.J)("siteId",((e,{type:t,editor:s})=>t===a.Z4q?s:e)));(0,n.x)(["selectedEditor"],r)},"./state/selectors/can-display-community-translator.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s("../packages/viewport/src/index.js"),o=s("./lib/i18n-utils/browser.js"),a=s("./state/selectors/get-user-setting.js");function i(e){const t=(0,a.Z)(e,"language"),s=(0,a.Z)(e,"locale_variant");return!(0,n.tq)()&&(!(!t||!(0,o.BK)(t))&&!(s&&!(0,o.BK)(s)))}},"./state/selectors/get-previous-path.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s("../node_modules/lodash-es/get.js");s("./state/route/init.js");const o=e=>(0,n.Z)(e,"route.path.previous","")},"./state/selectors/get-site-migration-status.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s("./state/selectors/get-raw-site.js");function o(e,t){return(0,n.Z)(e,t)?.site_migration?.status??"inactive"}},"./state/selectors/get-user-setting.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s("../node_modules/lodash-es/get.js");s("./state/user-settings/init.js");function o(e,t){const{settings:s,unsavedSettings:o}=e.userSettings;let a=null;const i=(0,n.Z)(s,t);return void 0!==i&&(a=(0,n.Z)(o,t,i)),a}},"./state/selectors/has-site-pending-automated-transfer.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s("../node_modules/lodash-es/get.js"),o=s("./state/selectors/is-site-automated-transfer.js"),a=s("./state/sites/selectors/get-site-options.js");const i=(e,t)=>{const s=(0,a.Z)(e,t);return s?!(0,o.Z)(e,t)&&(0,n.Z)(s,"has_pending_automated_transfer",!1):null}},"./state/selectors/is-community-translator-enabled.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s("./lib/i18n-utils/constants.js"),o=s("./state/selectors/can-display-community-translator.js"),a=s("./state/selectors/get-user-setting.js");function i(e){return!!(0,a.Z)(e,n.DQ)&&!!(0,o.Z)(e)}},"./state/selectors/is-domain-only-site.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s("./state/selectors/get-raw-site.js");function o(e,t){const s=(0,n.Z)(e,t);return s?s.options?.is_domain_only??!1:null}},"./state/selectors/is-notifications-open.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s("../node_modules/lodash-es/get.js");s("./state/ui/init.js");function o(e){return(0,n.Z)(e,"ui.isNotificationsOpen",!1)}},"./state/selectors/is-site-migration-active-route.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s("./state/selectors/get-current-route.js");function o(e){const t=(0,n.Z)(e);return!!t&&t.match(/\/migrate\/(upgrade\/)?from\/[^/]+\/to\//)}},"./state/selectors/is-site-migration-in-progress.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s("./state/selectors/get-site-migration-status.js");function o(e,t){const s=(0,n.Z)(e,t);return"inactive"!==s&&"done"!==s}},"./state/selectors/is-site-wpcom-atomic.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s("../node_modules/lodash-es/get.js");const o=(e,t)=>(0,n.Z)(e,["sites","items",t,"options","is_wpcom_atomic"],!1)},"./state/selectors/is-vip-site.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s("./state/selectors/get-raw-site.js");function o(e,t){const s=(0,n.Z)(e,t);return s&&s.hasOwnProperty("is_vip")?s.is_vip:null}},"./state/sites/features/reducer.js":(e,t,s)=>{"use strict";s.d(t,{T:()=>a,E:()=>r});var n=s("../node_modules/lodash-es/omit.js"),o=s("./state/action-types.ts");const a={data:null,error:null,hasLoadedFromServer:!1,isRequesting:!1};function i(e,t,s){return Object.assign({},e,{[t]:Object.assign({},a,e[t],s)})}function r(e={},{type:t,siteId:s,features:a,error:r}){switch(t){case o.fa4:return i(e,s,{error:null,isRequesting:!0});case o.xNf:return i(e,s,{error:null,hasLoadedFromServer:!0,isRequesting:!1,data:a});case o.YCt:return i(e,s,{error:r,isRequesting:!1});case o.$eC:return(0,n.Z)(e,s)}return e}},"./state/sites/plans/reducer.js":(e,t,s)=>{"use strict";s.d(t,{T:()=>a,z:()=>r});var n=s("../node_modules/lodash-es/omit.js"),o=s("./state/action-types.ts");const a={data:null,error:null,hasLoadedFromServer:!1,isRequesting:!1};function i(e,t,s){return Object.assign({},e,{[t]:Object.assign({},a,e[t],s)})}function r(e={},t){switch(t.type){case o.gNn:return i(e,t.siteId,{error:null,isRequesting:!0});case o.Rmh:return i(e,t.siteId,{error:null,hasLoadedFromServer:!0,isRequesting:!1,data:t.plans});case o.$MQ:return i(e,t.siteId,{error:t.error,isRequesting:!1});case o.XLI:return(0,n.Z)(e,t.siteId);case o.VQe:return i(e,t.siteId,{isRequesting:!0});case o.Nag:return i(e,t.siteId,{error:null,hasLoadedFromServer:!0,isRequesting:!1,data:t.plans});case o.UMk:return i(e,t.siteId,{error:t.error,isRequesting:!1})}return e}},"./state/sites/products/reducer.js":(e,t,s)=>{"use strict";s.d(t,{T:()=>a,R:()=>r});var n=s("../node_modules/lodash-es/omit.js"),o=s("./state/action-types.ts");const a={data:null,error:null,hasLoadedFromServer:!1,isRequesting:!1};function i(e,t,s){return Object.assign({},e,{[t]:Object.assign({},a,e[t],s)})}function r(e={},t){switch(t.type){case o.eO9:return i(e,t.siteId,{error:null,isRequesting:!0});case o.S3d:return i(e,t.siteId,{error:null,hasLoadedFromServer:!0,isRequesting:!1,data:t.products});case o.whB:return i(e,t.siteId,{error:t.error,isRequesting:!1});case o.X77:return(0,n.Z)(e,t.siteId)}return e}},"./state/sites/schema.js":(e,t,s)=>{"use strict";s.d(t,{K:()=>n,W:()=>o});const n={type:"object",patternProperties:{"^\\d+$":{type:"object",required:["ID","name"],properties:{ID:{type:"number"},name:{type:"string"},URL:{type:"string"},jetpack:{type:"boolean"},icon:{type:"object",properties:{img:{type:"string"},ico:{type:"string"},media_id:{type:"number"}}},visible:{type:"boolean"},is_private:{type:"boolean"},is_vip:{type:"boolean"},options:{type:"object"},meta:{type:"object"},is_multisite:{type:"boolean"},capabilities:{type:"object",patternProperties:{"^[a-z_]+$":{type:"boolean"}}},plan:{type:"object",required:["product_id","product_slug"],properties:{product_id:{type:["number","string"]},product_slug:{type:"string"},product_name_short:{type:["string","null"]},expired:{type:"boolean"},user_is_owner:{type:"boolean"},is_free:{type:"boolean"}}},single_user_site:{type:"boolean"},updates:{type:"object",properties:{jp_version:{type:"string"},plugins:{type:"number"},themes:{type:"number"},total:{type:"number"},translations:{type:"number"},wordpress:{type:"number"},wp_version:{type:"string"}}},lang:{type:"string"}}}},additionalProperties:!1},o={type:["boolean","null"]}},"./state/sites/selectors/can-current-user-use-customer-home.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var n=s("./state/selectors/can-current-user.js"),o=s("./state/selectors/is-site-automated-transfer.js"),a=s("./state/selectors/is-vip-site.js"),i=s("./state/sites/selectors/is-jetpack-site.js"),r=s("./state/ui/selectors/get-selected-site-id.js"),c=s("./state/sites/selectors/get-site.js");function l(e,t=null){if(t||(t=(0,r.Z)(e)),(0,a.Z)(e,t))return!1;if((0,i.Z)(e,t)&&!(0,o.Z)(e,t))return!1;return(0,c.Z)(e,t)&&(0,n.i)(e,t,"manage_options")}},"./state/sites/selectors/get-site-plan-slug.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s("./state/sites/selectors/get-site-plan.ts");function o(e,t){return(0,n.Z)(e,t)?.product_slug??null}},"./state/sites/selectors/get-site-plan.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s("./state/selectors/get-raw-site.js");function o(e,t){if(!t)return null;const s=(0,n.Z)(e,t);return s?s.plan?.expired?s.jetpack?{product_id:2002,product_slug:"jetpack_free",product_name_short:"Free",free_trial:!1,expired:!1}:{product_id:1,product_slug:"free_plan",product_name_short:"Free",free_trial:!1,expired:!1}:s.plan:null}},"./state/support/constants.js":(e,t,s)=>{"use strict";s.d(t,{Lr:()=>n,bZ:()=>o,a6:()=>a});const n="none",o="active",a="expired"},"./state/support/init.js":(e,t,s)=>{"use strict";var n=s("./state/redux-store.ts"),o=s("../packages/state-utils/src/index.ts"),a=s("../node_modules/debug/src/browser.js"),i=s.n(a),r=s("./state/action-types.ts"),c=s("./state/support/constants.js");const l=i()("calypso:state:support:actions");const d=(0,o.xi)("support",(function(e=c.Lr,{type:t,nextState:s}){return t===r.wi9?e===c.Lr&&s===c.bZ||e===c.bZ&&s===c.a6?s:(l(`invalid support session transition from '${e}' to '${s}'`),e):e}));(0,n.x)(["support"],d)},"./state/support/selectors.js":(e,t,s)=>{"use strict";s.d(t,{o:()=>o});var n=s("./state/support/constants.js");s("./state/support/init.js");function o({support:e}){return e===n.bZ||e===n.a6}},"./state/ui/actions/notifications.js":(e,t,s)=>{"use strict";s.d(t,{P:()=>o});var n=s("./state/action-types.ts");s("./state/ui/init.js");const o=()=>({type:n.hxz})},"./state/ui/layout-focus/actions.js":(e,t,s)=>{"use strict";s.d(t,{Js:()=>o,SB:()=>a,zW:()=>i});var n=s("./state/action-types.ts");s("./state/ui/init.js");function o(e){return{type:n.kUt,area:e}}function a(e){return{type:n.vO0,area:e}}function i(){return{type:n.XTm}}},"./state/ui/layout-focus/selectors.js":(e,t,s)=>{"use strict";s.d(t,{d:()=>n});s("./state/ui/init.js");function n(e){return e.ui.layoutFocus.current}},"./state/ui/selectors/get-section-name.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var n=s("../node_modules/lodash-es/get.js"),o=s("./state/ui/selectors/get-section.js");function a(e){return(0,n.Z)((0,o.Z)(e),"name",null)}},"./state/ui/selectors/is-section-loading.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});s("./state/ui/init.js");function n(e){return e.ui.isSectionLoading}},"./state/ui/selectors/sidebar-visibility.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});s("./state/ui/init.js");var n=s("./state/preferences/selectors.js");function o(e){return(0,n.Oz)(e,"sidebarCollapsed")}},"./state/user-settings/init.js":(e,t,s)=>{"use strict";var n=s("./state/redux-store.ts"),o=s("../packages/state-utils/src/index.ts"),a=s("../node_modules/lodash-es/get.js"),i=s("./state/action-types.ts"),r=s("./state/utils/reducer-utils.ts");function c(e,t){return Array.isArray(t)||(t=[t]),function e(s,n){if(!s)return{};if(n<t.length-1){const o=e(s[t[n]],n+1);if(Object.keys(o).length>0)return{...s,[t[n]]:o}}const{[t[n]]:o,...a}=s;return a}(e,0)}const l=(0,o.xi)("userSettings",(0,r.U)({settings:(e={},{type:t,settingValues:s})=>{switch(t){case i.BJX:case i.y3Q:return{...e,...s}}return e},unsavedSettings:(e={},t)=>{switch(t.type){case i.jE7:{const{settingNames:s}=t;return s?Array.isArray(s)?s.reduce(c,e):c(e,s):{}}case i.yFC:return(0,a.Z)(e,t.settingName)===t.value?e:(s=e,n=t.settingName,o=t.value,Array.isArray(n)||(n=[n]),function e(t={},s){return{...t,[n[s]]:s===n.length-1?o:e(t[n[s]],s+1)}}(s,0));case i.aLm:return c(e,t.settingName)}var s,n,o;return e},fetching:(e=!1,t)=>{switch(t.type){case i.oi7:return!0;case i.WRd:case i.BJX:return!1}return e},updatingPassword:(e=!1,t)=>{switch(t.type){case i.qtP:return!!t.settingsOverride?.password;case i.y3Q:case i.tp5:return!1}return e},updating:(e=!1,t)=>{switch(t.type){case i.qtP:return!0;case i.y3Q:case i.tp5:return!1}return e},failed:(e=!1,t)=>{switch(t.type){case i.qtP:case i.oi7:case i.y3Q:case i.BJX:return!1;case i.WRd:case i.tp5:return!0}return e}}));(0,n.x)(["userSettings"],l)},"../packages/accessible-focus/src/index.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});const n=[9,32,37,38,39,40],o=["Tab"," ","Spacebar","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"];let a=!1;function i(){document.addEventListener("keydown",(function(e){a||function(e){let t;return void 0!==e.key?t=e.key:void 0!==e.keyIdentifier?t=e.keyIdentifier:void 0!==e.keyCode&&(t=e.keyCode),void 0!==t&&("string"==typeof t?-1!==o.indexOf(t):-1!==n.indexOf(t))}(e)&&(a=!0,document.documentElement.classList.add("accessible-focus"))})),document.addEventListener("mouseup",(function(){a&&(a=!1,document.documentElement.classList.remove("accessible-focus"))}))}},"../packages/components/src/dialog/index.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var n=s("../node_modules/classnames/index.js"),o=s.n(n),a=s("../node_modules/react/index.js"),i=s("../node_modules/react-modal/lib/index.js"),r=s.n(i),c=s("../packages/components/src/button/index.tsx");const l=({buttons:e,baseClassName:t,onButtonClick:s})=>e?a.createElement("div",{className:t+"__action-buttons"},e.map(((n,i)=>{const r=i;if((0,a.isValidElement)(n))return(0,a.cloneElement)(n,{key:r});const l=o()(n.className,n.additionalClassNames,{"is-primary":n.isPrimary||1===e.length});return a.createElement(c.Z,{key:r,className:l,"data-e2e-button":n.action,"data-tip-target":`dialog-base-action-${n.action}`,onClick:()=>s(n),disabled:!!n.disabled,href:n.href,target:n.target},a.createElement("span",{className:t+"__button-label"},n.label))}))):null,d=({additionalClassNames:e,buttons:t,baseClassName:s="dialog",className:n,children:i,isBackdropVisible:c=!0,isFullScreen:d=!0,isVisible:u=!1,label:m="",leaveTimeout:p=200,onClose:h,shouldCloseOnEsc:g})=>{const y=a.useCallback((()=>h?.()),[h]),_=a.useCallback((e=>{e.onClick?e.onClick((()=>h?.(e.action))):h?.(e.action)}),[h]),f=o()(s,"card",e),j=o()(s+"__backdrop",{"is-full-screen":d,"is-hidden":!c}),b=o()(s+"__content",n);return a.createElement(r(),{isOpen:u,onRequestClose:y,closeTimeoutMS:p,contentLabel:m,overlayClassName:j,className:f,htmlOpenClassName:"ReactModal__Html--open",role:"dialog",shouldCloseOnEsc:g},a.createElement("div",{className:b,tabIndex:-1},i),a.createElement(l,{buttons:t,onButtonClick:_,baseClassName:s}))}},"../packages/viewport/src/index.js":(e,t,s)=>{"use strict";s.d(t,{Gh:()=>o,oh:()=>a,kV:()=>u,Sp:()=>m,tq:()=>p,nI:()=>h,bQ:()=>g,jv:()=>y});const n=769,o="<480px",a=">960px",i="undefined"==typeof window||!window.matchMedia,r=()=>null;function c({min:e,max:t}={}){return void 0!==e&&void 0!==t?i?{matches:n>e&&n<=t}:window.matchMedia(`(min-width: ${e+1}px) and (max-width: ${t}px)`):void 0!==e?i?{matches:n>e}:window.matchMedia(`(min-width: ${e+1}px)`):void 0!==t&&(i?{matches:n<=t}:window.matchMedia(`(max-width: ${t}px)`))}const l={"<480px":c({max:480}),"<660px":c({max:660}),"<782px":c({max:782}),"<800px":c({max:800}),"<960px":c({max:960}),"<1040px":c({max:1040}),"<1280px":c({max:1280}),"<1400px":c({max:1400}),">480px":c({min:480}),">660px":c({min:660}),">782px":c({min:782}),">800px":c({min:800}),">960px":c({min:960}),">1040px":c({min:1040}),">1280px":c({min:1280}),">1400px":c({min:1400}),"480px-660px":c({min:480,max:660}),"660px-960px":c({min:660,max:960}),"480px-960px":c({min:480,max:960})};function d(e){if(l.hasOwnProperty(e))return l[e];try{console.warn("Undefined breakpoint used in `mobile-first-breakpoint`",e)}catch(e){}}function u(e){const t=d(e);return t?t.matches:void 0}function m(e,t){if(!t)return r;const s=d(e);if(s&&!i){const e=e=>t(e.matches);return s.addListener(e),()=>s.removeListener(e)}return r}function p(){return u(o)}function h(){return u(a)}function g(){return i?n:window.innerWidth}function y(){return p()?"mobile":!i&&window.innerWidth<1040?"tablet":"desktop"}}},e=>{e.O(0,[38711,64124,61320,92841,39774,10014,61403,70099,48932,94924,78211,66844],(()=>{return t="./boot/app.js",e(e.s=t);var t}));e.O()}]);